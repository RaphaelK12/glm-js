var THREEMATHS={REVISION:"70-maths-only"};"object"===typeof module&&(module.exports=THREEMATHS);void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:0});THREEMATHS.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREEMATHS.Quaternion.prototype={constructor:THREEMATHS.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(a){this._x=a},get y(){return this._y},set y(a){this._y=a},get z(){return this._z},set z(a){this._z=a},get w(){return this._w},set w(a){this._w=a},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;return this},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;return this},setFromEuler:function(a){if(!1===a instanceof THREEMATHS.Euler)throw Error("THREEMATHS.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
var b=Math.cos(a._x/2),c=Math.cos(a._y/2),d=Math.cos(a._z/2),e=Math.sin(a._x/2),f=Math.sin(a._y/2),g=Math.sin(a._z/2);"XYZ"===a.order?(this._x=e*c*d+b*f*g,this._y=b*f*d-e*c*g,this._z=b*c*g+e*f*d,this._w=b*c*d-e*f*g):"YXZ"===a.order?(this._x=e*c*d+b*f*g,this._y=b*f*d-e*c*g,this._z=b*c*g-e*f*d,this._w=b*c*d+e*f*g):"ZXY"===a.order?(this._x=e*c*d-b*f*g,this._y=b*f*d+e*c*g,this._z=b*c*g+e*f*d,this._w=b*c*d-e*f*g):"ZYX"===a.order?(this._x=e*c*d-b*f*g,this._y=b*f*d+e*c*g,this._z=b*c*g-e*f*d,this._w=b*c*
d+e*f*g):"YZX"===a.order?(this._x=e*c*d+b*f*g,this._y=b*f*d+e*c*g,this._z=b*c*g-e*f*d,this._w=b*c*d-e*f*g):"XZY"===a.order&&(this._x=e*c*d-b*f*g,this._y=b*f*d-e*c*g,this._z=b*c*g+e*f*d,this._w=b*c*d+e*f*g);return this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],f=b[5],g=b[9],h=b[2],j=b[6],b=b[10],i=c+f+b;0<i?(c=0.5/Math.sqrt(i+1),
this._w=0.25/c,this._x=(j-g)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>f&&c>b?(c=2*Math.sqrt(1+c-f-b),this._w=(j-g)/c,this._x=0.25*c,this._y=(a+e)/c,this._z=(d+h)/c):f>b?(c=2*Math.sqrt(1+f-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=0.25*c,this._z=(g+j)/c):(c=2*Math.sqrt(1+b-c-f),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(g+j)/c,this._z=0.25*c);return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREEMATHS.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?
a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+
this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);return this},multiply:function(a,b){return void 0!==b?(console.warn("THREEMATHS.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,f=a._w,g=b._x,h=b._y,j=b._z,
i=b._w;this._x=c*i+f*g+d*j-e*h;this._y=d*i+f*h+e*g-c*j;this._z=e*i+f*j+c*h-d*g;this._w=f*i-c*g-d*h-e*j;return this},multiplyVector3:function(a){console.warn("THREEMATHS.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,f=this._w,g=f*a._w+c*a._x+d*a._y+e*a._z;0>g?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=
-a._z,g=-g):this.copy(a);if(1<=g)return this._w=f,this._x=c,this._y=d,this._z=e,this;var h=Math.acos(g),j=Math.sqrt(1-g*g);if(0.001>Math.abs(j))return this._w=0.5*(f+this._w),this._x=0.5*(c+this._x),this._y=0.5*(d+this._y),this._z=0.5*(e+this._z),this;g=Math.sin((1-b)*h)/j;h=Math.sin(b*h)/j;this._w=f*g+this._w*h;this._x=c*g+this._x*h;this._y=d*g+this._y*h;this._z=e*g+this._z*h;return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,
b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREEMATHS.Quaternion(this._x,this._y,this._z,this._w)}};THREEMATHS.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};
THREEMATHS.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREEMATHS.Vector2.prototype={constructor:THREEMATHS.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},
add:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=
a.x;this.y-=a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);
return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREEMATHS.Vector2,b=new THREEMATHS.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);
this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},
distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,
b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},clone:function(){return new THREEMATHS.Vector2(this.x,this.y)}};THREEMATHS.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREEMATHS.Vector3.prototype={constructor:THREEMATHS.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;
this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREEMATHS.Euler&&console.error("THREEMATHS.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREEMATHS.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREEMATHS.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=
this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*
e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,f=a.y,g=a.z;a=a.w;var h=a*b+f*d-g*c,j=a*c+g*b-e*d,i=a*d+e*c-f*b,b=-e*b-f*c-g*d;this.x=h*a+b*-e+j*-g-i*-f;this.y=j*a+b*-f+i*-e-h*-g;this.z=i*a+b*-g+h*-f-j*-e;return this},project:function(){var a;return function(b){void 0===a&&(a=new THREEMATHS.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;
return function(b){void 0===a&&(a=new THREEMATHS.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=
this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREEMATHS.Vector3,b=new THREEMATHS.Vector3);
a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);
this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=
this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,f=b.x,g=b.y,
h=b.z;this.x=d*h-e*g;this.y=e*f-c*h;this.z=c*g-d*f;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREEMATHS.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREEMATHS.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREEMATHS.Vector3);return this.sub(a.copy(b).multiplyScalar(2*
this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREEMATHS.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(){console.error("THREEMATHS.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREEMATHS.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},
getPositionFromMatrix:function(a){console.warn("THREEMATHS.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREEMATHS.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREEMATHS.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,
b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===
this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this},clone:function(){return new THREEMATHS.Vector3(this.x,this.y,this.z)}};
THREEMATHS.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREEMATHS.Vector4.prototype={constructor:THREEMATHS.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,
this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var f=a[8],g=a[1],h=a[5],j=a[9];c=a[2];b=a[6];var i=a[10];if(0.01>Math.abs(d-g)&&0.01>Math.abs(f-c)&&0.01>Math.abs(j-b)){if(0.1>Math.abs(d+g)&&0.1>Math.abs(f+c)&&0.1>Math.abs(j+b)&&0.1>Math.abs(e+h+i-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;i=(i+1)/2;d=(d+g)/4;f=(f+c)/4;j=(j+b)/4;e>h&&e>i?0.01>e?(b=0,d=c=0.707106781):(b=Math.sqrt(e),c=d/b,d=f/b):h>i?0.01>
h?(b=0.707106781,c=0,d=0.707106781):(c=Math.sqrt(h),b=d/c,d=j/c):0.01>i?(c=b=0.707106781,d=0):(d=Math.sqrt(i),b=f/d,c=j/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-j)*(b-j)+(f-c)*(f-c)+(g-d)*(g-d));0.001>Math.abs(a)&&(a=1);this.x=(b-j)/a;this.y=(f-c)/a;this.z=(g-d)/a;this.w=Math.acos((e+h+i-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=
a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREEMATHS.Vector4,b=new THREEMATHS.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);
this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):
Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+
Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,
b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this},clone:function(){return new THREEMATHS.Vector4(this.x,this.y,this.z,this.w)}};THREEMATHS.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREEMATHS.Euler.DefaultOrder};THREEMATHS.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");
THREEMATHS.Euler.DefaultOrder="XYZ";
THREEMATHS.Euler.prototype={constructor:THREEMATHS.Euler,_x:0,_y:0,_z:0,_order:THREEMATHS.Euler.DefaultOrder,get x(){return this._x},set x(a){this._x=a},get y(){return this._y},set y(a){this._y=a},get z(){return this._z},set z(a){this._z=a},get order(){return this._order},set order(a){this._order=a},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;return this},setFromRotationMatrix:function(a,
b){var c=THREEMATHS.Math.clamp,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[1],j=d[5],i=d[9],k=d[2],m=d[6],d=d[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(g,-1,1)),0.99999>Math.abs(g)?(this._x=Math.atan2(-i,d),this._z=Math.atan2(-f,e)):(this._x=Math.atan2(m,j),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(i,-1,1)),0.99999>Math.abs(i)?(this._y=Math.atan2(g,d),this._z=Math.atan2(h,j)):(this._y=Math.atan2(-k,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(m,-1,1)),0.99999>Math.abs(m)?(this._y=Math.atan2(-k,
d),this._z=Math.atan2(-f,j)):(this._y=0,this._z=Math.atan2(h,e))):"ZYX"===b?(this._y=Math.asin(-c(k,-1,1)),0.99999>Math.abs(k)?(this._x=Math.atan2(m,d),this._z=Math.atan2(h,e)):(this._x=0,this._z=Math.atan2(-f,j))):"YZX"===b?(this._z=Math.asin(c(h,-1,1)),0.99999>Math.abs(h)?(this._x=Math.atan2(-i,j),this._y=Math.atan2(-k,e)):(this._x=0,this._y=Math.atan2(g,d))):"XZY"===b?(this._z=Math.asin(-c(f,-1,1)),0.99999>Math.abs(f)?(this._x=Math.atan2(m,j),this._y=Math.atan2(g,e)):(this._x=Math.atan2(-i,d),
this._y=0)):console.warn("THREEMATHS.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new THREEMATHS.Matrix4);a.makeRotationFromQuaternion(b);this.setFromRotationMatrix(a,c,d);return this}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new THREEMATHS.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),
equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);return this},toArray:function(){return[this._x,this._y,this._z,this._order]},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new THREEMATHS.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREEMATHS.Euler(this._x,
this._y,this._z,this._order)}};THREEMATHS.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREEMATHS.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREEMATHS.Matrix3.prototype={constructor:THREEMATHS.Matrix3,set:function(a,b,c,d,e,f,g,h,j){var i=this.elements;i[0]=a;i[3]=b;i[6]=c;i[1]=d;i[4]=e;i[7]=f;i[2]=g;i[5]=h;i[8]=j;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREEMATHS.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(a){console.warn("THREEMATHS.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREEMATHS.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=
a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],j=a[7],a=a[8];return b*f*a-b*g*j-c*e*a+c*g*h+d*e*j-d*f*h},getInverse:function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-
c[1]*c[4];c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];
a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},clone:function(){return(new THREEMATHS.Matrix3).fromArray(this.elements)}};
THREEMATHS.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREEMATHS.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREEMATHS.Matrix4.prototype={constructor:THREEMATHS.Matrix4,set:function(a,b,c,d,e,f,g,h,j,i,k,m,n,p,q,r){var l=this.elements;l[0]=a;l[4]=b;l[8]=c;l[12]=d;l[1]=e;l[5]=f;l[9]=g;l[13]=h;l[2]=j;l[6]=i;l[10]=k;l[14]=m;l[3]=n;l[7]=p;l[11]=q;l[15]=r;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREEMATHS.Matrix4: .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(a)},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){var d=this.elements;a.set(d[0],d[1],d[2]);b.set(d[4],d[5],d[6]);c.set(d[8],d[9],d[10]);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new THREEMATHS.Vector3;return function(b){var c=this.elements;b=b.elements;var d=1/a.set(b[0],b[1],b[2]).length(),
e=1/a.set(b[4],b[5],b[6]).length(),f=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*f;c[9]=b[9]*f;c[10]=b[10]*f;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREEMATHS.Euler&&console.error("THREEMATHS.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,f=Math.cos(c),c=Math.sin(c),g=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);
if("XYZ"===a.order){a=f*h;var j=f*e,i=c*h,k=c*e;b[0]=g*h;b[4]=-g*e;b[8]=d;b[1]=j+i*d;b[5]=a-k*d;b[9]=-c*g;b[2]=k-a*d;b[6]=i+j*d;b[10]=f*g}else"YXZ"===a.order?(a=g*h,j=g*e,i=d*h,k=d*e,b[0]=a+k*c,b[4]=i*c-j,b[8]=f*d,b[1]=f*e,b[5]=f*h,b[9]=-c,b[2]=j*c-i,b[6]=k+a*c,b[10]=f*g):"ZXY"===a.order?(a=g*h,j=g*e,i=d*h,k=d*e,b[0]=a-k*c,b[4]=-f*e,b[8]=i+j*c,b[1]=j+i*c,b[5]=f*h,b[9]=k-a*c,b[2]=-f*d,b[6]=c,b[10]=f*g):"ZYX"===a.order?(a=f*h,j=f*e,i=c*h,k=c*e,b[0]=g*h,b[4]=i*d-j,b[8]=a*d+k,b[1]=g*e,b[5]=k*d+a,b[9]=
j*d-i,b[2]=-d,b[6]=c*g,b[10]=f*g):"YZX"===a.order?(a=f*g,j=f*d,i=c*g,k=c*d,b[0]=g*h,b[4]=k-a*e,b[8]=i*e+j,b[1]=e,b[5]=f*h,b[9]=-c*h,b[2]=-d*h,b[6]=j*e+i,b[10]=a-k*e):"XZY"===a.order&&(a=f*g,j=f*d,i=c*g,k=c*d,b[0]=g*h,b[4]=-e,b[8]=d*h,b[1]=a*e+k,b[5]=f*h,b[9]=j*e-i,b[2]=i*e-j,b[6]=c*h,b[10]=k*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREEMATHS.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,f=a.w,g=c+c,h=d+d,j=e+e;a=c*g;var i=c*h,c=c*j,k=d*h,d=d*j,e=e*j,g=f*g,h=f*h,f=f*j;b[0]=1-(k+e);b[4]=i-f;b[8]=c+h;b[1]=i+f;b[5]=1-(a+e);b[9]=d-g;b[2]=c-h;b[6]=d+g;b[10]=1-(a+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREEMATHS.Vector3,b=new THREEMATHS.Vector3,c=new THREEMATHS.Vector3;return function(d,e,f){var g=this.elements;
c.subVectors(d,e).normalize();0===c.length()&&(c.z=1);a.crossVectors(f,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(f,c).normalize());b.crossVectors(c,a);g[0]=a.x;g[4]=b.x;g[8]=c.x;g[1]=a.y;g[5]=b.y;g[9]=c.y;g[2]=a.z;g[6]=b.z;g[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREEMATHS.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,
b){var c=a.elements,d=b.elements,e=this.elements,f=c[0],g=c[4],h=c[8],j=c[12],i=c[1],k=c[5],m=c[9],n=c[13],p=c[2],q=c[6],r=c[10],l=c[14],s=c[3],t=c[7],u=c[11],c=c[15],v=d[0],w=d[4],x=d[8],y=d[12],z=d[1],A=d[5],B=d[9],C=d[13],D=d[2],E=d[6],F=d[10],G=d[14],H=d[3],I=d[7],J=d[11],d=d[15];e[0]=f*v+g*z+h*D+j*H;e[4]=f*w+g*A+h*E+j*I;e[8]=f*x+g*B+h*F+j*J;e[12]=f*y+g*C+h*G+j*d;e[1]=i*v+k*z+m*D+n*H;e[5]=i*w+k*A+m*E+n*I;e[9]=i*x+k*B+m*F+n*J;e[13]=i*y+k*C+m*G+n*d;e[2]=p*v+q*z+r*D+l*H;e[6]=p*w+q*A+r*E+l*I;e[10]=
p*x+q*B+r*F+l*J;e[14]=p*y+q*C+r*G+l*d;e[3]=s*v+t*z+u*D+c*H;e[7]=s*w+t*A+u*E+c*I;e[11]=s*x+t*B+u*F+c*J;e[15]=s*y+t*C+u*G+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREEMATHS.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREEMATHS.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREEMATHS.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREEMATHS.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix4(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("THREEMATHS.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREEMATHS.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],f=a[1],g=a[5],h=a[9],j=a[13],i=a[2],k=a[6],m=a[10],n=a[14];return a[3]*(+e*h*k-d*j*k-e*g*m+c*j*m+d*g*n-c*h*n)+a[7]*(+b*h*n-b*j*m+e*f*m-d*f*n+d*j*i-e*h*i)+a[11]*(+b*j*k-b*g*n-e*f*k+c*f*n+e*g*i-c*j*i)+a[15]*(-d*g*i-b*h*k+b*g*m+d*f*k-c*f*m+c*h*i)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];
a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREEMATHS.Vector3;return function(){console.warn("THREEMATHS.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],f=d[4],g=d[8],h=d[12],j=d[1],i=d[5],k=d[9],m=d[13],n=d[2],p=d[6],q=d[10],r=d[14],l=d[3],s=d[7],t=d[11],d=d[15];c[0]=k*r*s-m*q*s+m*p*t-i*r*t-k*p*d+i*q*d;c[4]=h*q*s-g*r*s-h*p*t+f*r*t+g*p*d-f*q*d;c[8]=g*m*s-h*k*s+h*i*t-f*m*t-g*i*d+f*k*d;c[12]=h*k*p-g*m*p-h*i*q+f*m*q+g*i*r-f*k*r;c[1]=m*q*l-k*r*l-
m*n*t+j*r*t+k*n*d-j*q*d;c[5]=g*r*l-h*q*l+h*n*t-e*r*t-g*n*d+e*q*d;c[9]=h*k*l-g*m*l-h*j*t+e*m*t+g*j*d-e*k*d;c[13]=g*m*n-h*k*n+h*j*q-e*m*q-g*j*r+e*k*r;c[2]=i*r*l-m*p*l+m*n*s-j*r*s-i*n*d+j*p*d;c[6]=h*p*l-f*r*l-h*n*s+e*r*s+f*n*d-e*p*d;c[10]=f*m*l-h*i*l+h*j*s-e*m*s-f*j*d+e*i*d;c[14]=h*i*n-f*m*n-h*j*p+e*m*p+f*j*r-e*i*r;c[3]=k*p*l-i*q*l-k*n*s+j*q*s+i*n*t-j*p*t;c[7]=f*q*l-g*p*l+g*n*s-e*q*s-f*n*t+e*p*t;c[11]=g*i*l-f*k*l-g*j*s+e*k*s+f*j*t-e*i*t;c[15]=f*k*n-g*i*n+g*j*p-e*k*p-f*j*q+e*i*q;c=e*c[0]+j*c[4]+n*c[8]+
l*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(){console.warn("THREEMATHS.Matrix4: .translate() has been removed.")},rotateX:function(){console.warn("THREEMATHS.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.warn("THREEMATHS.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.warn("THREEMATHS.Matrix4: .rotateZ() has been removed.")},
rotateByAxis:function(){console.warn("THREEMATHS.Matrix4: .rotateByAxis() has been removed.")},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,
0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,f=a.x,g=a.y,h=a.z,j=e*f,i=e*g;this.set(j*f+c,j*g-d*h,j*h+d*g,0,
j*g+d*h,i*g+c,i*h-d*f,0,j*h-d*g,i*h+d*f,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREEMATHS.Vector3,b=new THREEMATHS.Matrix4;return function(c,d,e){var f=this.elements,g=a.set(f[0],f[1],f[2]).length(),h=a.set(f[4],f[5],f[6]).length(),j=a.set(f[8],f[9],f[10]).length();0>this.determinant()&&(g=
-g);c.x=f[12];c.y=f[13];c.z=f[14];b.elements.set(this.elements);c=1/g;var f=1/h,i=1/j;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=f;b.elements[5]*=f;b.elements[6]*=f;b.elements[8]*=i;b.elements[9]*=i;b.elements[10]*=i;d.setFromRotationMatrix(b);e.x=g;e.y=h;e.z=j;return this}}(),makeFrustum:function(a,b,c,d,e,f){var g=this.elements;g[0]=2*e/(b-a);g[4]=0;g[8]=(b+a)/(b-a);g[12]=0;g[1]=0;g[5]=2*e/(d-c);g[9]=(d+c)/(d-c);g[13]=0;g[2]=0;g[6]=0;g[10]=-(f+e)/(f-e);g[14]=-2*f*e/(f-e);
g[3]=0;g[7]=0;g[11]=-1;g[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREEMATHS.Math.degToRad(0.5*a));var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,f){var g=this.elements,h=b-a,j=c-d,i=f-e;g[0]=2/h;g[4]=0;g[8]=0;g[12]=-((b+a)/h);g[1]=0;g[5]=2/j;g[9]=0;g[13]=-((c+d)/j);g[2]=0;g[6]=0;g[10]=-2/i;g[14]=-((f+e)/i);g[3]=0;g[7]=0;g[11]=0;g[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;
return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){return(new THREEMATHS.Matrix4).fromArray(this.elements)}};
THREEMATHS.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19==e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=
b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return Math.floor(this.randFloat(a,b))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=
180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a}};GLMJS_PREFIX="glm-js: ";function createErrorType(a,b){function c(c){this.name=a;Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack;this.message=c;b&&b.apply(this,arguments)}c.prototype=Error();c.prototype.name=a;return c.prototype.constructor=c}var GLMJSError=createErrorType("GLMJSError");
$GLM_extern=function(a,b){b=b||a;return function(){GLM[b]=GLM.$functions[a]||GLM.outer[a];if(!GLM[b])throw new GLMJSError("$GLM_extern: unresolved external symbol: "+a);return GLM[b].apply(this,arguments)}};$GLM_intern=function(a,b){if(void 0===b&&"object"===typeof a)for(var c in a)$GLM_intern(c,a[c]);else return GLM.outer.console.debug("intern "+a,b&&(b.name||typeof b)),GLM.outer[a]=b};
GLM={version:"0.0.1",GLM_VERSION:95,$functions:{},outer:{console:{debug:function(){}||(console.debug?function(){console.debug([].slice.call(arguments).join(" "))}:function(){console.warn([].slice.call(arguments).join(" "))}),warn:function(){console.warn([].slice.call(arguments).join(" "))},info:function(){console.info([].slice.call(arguments).join(" "))},error:function(){console.error([].slice.call(arguments).join(" "))},write:function(a){try{console.write(a)}catch(b){this.debug(a)}}},quat_array_from_zyx:function(a){var b=
glm.quat();b["*="](glm.angleAxis(a.z,glm.vec3(0,0,1)));b["*="](glm.angleAxis(a.y,glm.vec3(0,1,0)));b["*="](glm.angleAxis(a.x,glm.vec3(1,0,0)));return b.elements},vec3_eulerAngles:function(a){var b=this.mat4_array_from_quat(a);a=b[0];var c=b[4],d=b[1],e=b[5],f=b[2],g=b[6],b=b[10],h=new glm.vec3;h.y=Math.asin(-glm._clamp(f,-1,1));0.99999>Math.abs(f)?(h.x=Math.atan2(g,b),h.z=Math.atan2(d,a)):(h.x=0,h.z=Math.atan2(-c,e));return h}},$intern:$GLM_intern,$extern:$GLM_extern,GLMJSError:GLMJSError,_radians:function(a){return a*
Math.PI/180},_degrees:function(a){return 180*a/Math.PI},normalize:$GLM_extern("normalize"),inverse:$GLM_extern("inverse"),length:$GLM_extern("length"),length2:$GLM_extern("length2"),transpose:$GLM_extern("transpose"),mix:$GLM_extern("mix"),clamp:$GLM_extern("clamp"),rotate:function(a,b,c){return a.mul(GLM.outer.mat4_angleAxis(b,c))},scale:function(a,b){return a.mul(GLM.outer.mat4_scale(b))},translate:function(a,b){return a.mul(GLM.outer.mat4_translation(b))},perspective:function(a,b,c,d){return GLM.outer.mat4_perspective(a,
b,c,d)},eulerAngles:function(a){return GLM.outer.vec3_eulerAngles(a)},angleAxis:function(a,b){return GLM.outer.quat_angleAxis(a,b)},make_mat4:function(a){return new GLM.mat4([].slice.call(a,0,16))},toMat4:function(a){return new GLM.mat4(a)},FAITHFUL:!0,to_string:function(a){try{var b=a.$type||typeof a;if(!GLM[b])throw new GLMJSError("unsupported argtype to GLM.to_string: "+[a,b]);if(!GLM[b].$)throw new GLMJSError("missing .$... GLM.to_string: "+[a,b]);return GLM.FAITHFUL?GLM[b].$.to_string(a).replace(/[\t\n]/g,
""):GLM[b].$.to_string(a)}catch(c){return GLM.outer.console.error("to_string error: ",b,a+"",c),c+""}},$to_array:function(a){return[].slice.call(a.elements)},$sizeof:function(a){return a.BYTES_PER_ELEMENT},_clamp:function(a,b,c){return a<b?b:a>c?c:a},max:function(a,b){return Math.max(a,b)},min:function(a,b){return Math.min(a,b)},sign:Math.sign||function(a){return 0<a?1:0>a?-1:0},epsilon:function(){return 1E-6},FIXEDPRECISION:6,$toString:function(a,b,c){try{var d="";c.map(function(a){return b[d=a].toFixed(0)})}catch(e){throw GLM.outer.console.error("$toString error",
a,Object.prototype.toString.call(b),d),new GLMJSError(e);}return[a,"(",c.map(function(a){return b[a].toFixed(GLM.FIXEDPRECISION)}).join(", "),")"].join("")}};
var GLM_template=GLM.$template={_genArgError:function(a,b,c,d){return new GLMJSError("unsupported argtype to "+b+": ("+a.sig+"): ["+c+"] :: "+d.map(GLM_template.jstypes.get)+" // "+Object.keys(a).join("||"))},jstypes:{get:function(a){return null===a?"null":void 0===a?"undefined":a.$type||GLM_template.jstypes[typeof a]||GLM_template.jstypes[a+""]||"<unknown "+[typeof a,a]+">"},number:"float","[object Float32Array]":"Float32Array"},"<T>":function(a,b){function c(c){var f=c&&[c.$type||d[typeof c]||"null"];
if(!a[f])throw GLM_template._genArgError(a,b,f,[c]);return a[f](c)}var d=GLM_template.jstypes;a.$sig="<T>";c.$template=a;return c},"<T,V,n>":function(a,b){function c(c,f,g){this.$type&&(g=f,f=c,c=this);var h=f&&[c.$type||d[typeof f],f.$type||d[typeof f]||d[f+""]||"<unknown "+f+">"];if(!a[h])throw GLM_template._genArgError(a,b,h,[].slice.call(arguments));if("number"!==typeof g)throw new GLMJSError(b+a.$sig+": unsupported n type: "+[typeof g,g]);return a[h](c,f,g)}var d=GLM_template.jstypes;a.$sig=
"<T,V,n>";c.$template=a;return c},"<T,V>":function(a,b){function c(c,f,g,h,j){this.$type&&(j=h,h=g,g=f,f=c,c=this);var i=f&&[c.$type||d[typeof f],f.$type||d[typeof f]||d[f+""]||"<unknown "+f+">"];if(!a[i])throw GLM_template._genArgError(a,b,i,[].slice.call(arguments));return a[i](c,f,g,h,j)}var d=GLM_template.jstypes;a.sig="<T,V>";c.$template=a;return c},override:function(a,b,c,d){GLM.outer.console.debug("override",a,b,c.op||"");if(!d)throw Error('unspecified target group (expected override(<TV>, "p", {TSP}, ret={GROUP}))');
var e=d[b]&&d[b];d[b]=GLM_template[a](GLM_template.denify(c),b);d[b].op=c.op;if(e){if(e.op!==d[b].op)throw Error('mismatch merging existing override: .op "'+[e.op,"!=",d[b].op].join(" ")+'"  p='+[b,e.op,d[b].op,"||"+Object.keys(e.$template).join("||")]);for(var f in e.$template)f in d[b].$template||(GLM.outer.console.debug("carrying-forward: ",b,f),d[b].$template[f]=e.$template[f])}return d},_override:function(a,b,c){for(var d in b)this.override(a,d,b[d],c);return c},operations:function(a){return this._override("<T,V>",
a,GLM.$functions)},calculators:function(a){return this._override("<T>",a,GLM.$functions)},functions:function(a){return this._override("<T,V,n>",a,GLM.$functions)},denify:function(a){for(var b in a)if(/vec<N>/.test(b)){var c=a[b];delete a[b];[2,3,4].forEach(function(d){var e=b.replace(/<N>/g,d);e in a||(a[e]=eval(("1,"+c).replace(/N/g,d)))})}return a},GLMType:function(a,b){var c=b.identity.length,d=function(e){var f=typeof e+arguments.length,g=b[f];if(!g)throw new GLMJSError("no template found for "+
a+".$."+f);if(this instanceof d)if(e instanceof Float32Array){if(e.length>c)throw glm.outer.console.error(a+" elements size mismatch: "+["wanted:"+c,"handed:"+e.length]),e=e.subarray(0,c),Error(a+" elements size mismatch: "+["wanted:"+c,"handed:"+e.length]);this.elements=e}else(this.elements=new Float32Array(c)).set(g.apply(b,arguments));else return new d(g.apply(b,arguments))};d.$=b;d.componentLength=c;d.BYTES_PER_ELEMENT=c*Float32Array.BYTES_PER_ELEMENT;d.toString=function(){return"function GLM."+
a+"(){ [ GLMType ] }"};d.prototype={$type:a,$typeName:b.name||"<"+a+">",$len:c,constructor:d,clone:function(){return new d(this)},toString:function(){return b.to_string(this)},byteLength:d.BYTES_PER_ELEMENT,componentLength:d.componentLength,get address(){var a=this.elements.byteOffset.toString(16);return"0x00000000".substr(0,10-a.length)+a}};return d}};
GLM.$template.functions({mix:{"float,float":function(a,b,c){return b*c+a*(1-c)},"vec<N>,vec<N>":function(a,b,c){if(void 0===c)throw Error("glm.mix<vecN,vecN>(v,n,rt) requires 3 arguments");a=glm.$to_array(a);b=glm.$to_array(b);var d=1-c;return new glm.vecN(a.map(function(a,f){return b[f]*c+a*d}))}},clamp:{"float,float":function(a,b,c){return GLM._clamp(a,b,c)},"vec<N>,float":function(a,b,c){return new GLM.vecN(GLM.$to_array(a).map(function(a){return GLM._clamp(a,b,c)}))}}});
GLM.degrees=GLM.$template.calculators({degrees:{"float":function(a){return GLM._degrees(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._degrees))}}}).degrees;GLM.radians=GLM.$template.calculators({radians:{"float":function(a){return GLM._radians(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._radians))}}}).radians;
GLM.to_glsl=GLM.$template.calculators({to_glsl:{"vec<N>":function(a){for(var b=GLM.$to_array(a);b.length&&b[b.length-2]===b[b.length-1];)b.pop();return a.$type+"("+b+")"},uvec4:function(a){return this.vec4(a)},quat:function(a){return 0===a.x+a.y+a.z?"quat("+a.w+")":"quat("+GLM.$to_array(a)+")"},mat3:function(a){a=GLM.$to_array(a);return a.reduce(function(a,c){return a+c},0)===3*a[0]?"mat3("+a[0]+")":"mat3("+a+")"},mat4:function(a){a=GLM.$to_array(a);return a.reduce(function(a,c){return a+c},0)===
4*a[0]?"mat4("+a[0]+")":"mat4("+a+")"}}}).to_glsl;GLM.from_glsl=function(a){var b;a.replace(/^(\w+)\(([-.0-9ef, ]+)\)$/,function(a,d,e){b=glm[d].apply(glm,e.split(",").map(parseFloat))});return b};GLM.$template.override("<T,V>","copy",{op:"=","mat4,mat4":function(a,b){a.elements.set(b.elements);return a},"mat3,mat3":function(a,b){a.elements.set(b.elements);return a},"quat,quat":function(a,b){a.elements.set(b.elements);return a},"vec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a}},GLM.$functions);
GLM.string={$typeName:"string",$:{to_string:function(a){return a}}};GLM.number={$typeName:"float",$:{to_string:function(a){return GLM.$toString("float",{value:a},["value"])}}};
GLM.vec2=GLM_template.GLMType("vec2",{name:"fvec2",identity:[0,0],undefined0:function(){return this.identity},number1:function(a){return[a,a]},number2:function(a,b){return[a,b]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]];default:if("y"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec2: "+a);return[a.x,a.y]}}throw new GLMJSError("unrecognized object passed to GLM.vec2: "+a);},to_string:function(a){return GLM.$toString(a.$typeName,
a,["x","y"])}});
GLM.vec3=GLM_template.GLMType("vec3",{name:"fvec3",identity:[0,0,0],undefined0:function(){return GLM.vec3.$.identity},number1:function(a){return[a,a,a]},number2:function(a,b){return[a,b,b]},number3:function(a,b,c){return[a,b,c]},object1:function(a){switch(a.length){case 4:case 3:return[a[0],a[1],a[2]];case 2:return[a[0],a[1],a[1]];default:if("z"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec3: "+a);return[a.x,a.y,a.z]}}throw new GLMJSError("unrecognized object passed to GLM.vec3: "+a);
},object2:function(a,b){if(a instanceof GLM.vec2)return[a.x,a.y,b];throw new GLMJSError("unrecognized object passed to GLM.vec3(o,z): "+[a,b]);},to_string:function(a){return GLM.$toString(a.$typeName,a,["x","y","z"])}});
GLM.vec4=GLM_template.GLMType("vec4",{name:"fvec4",identity:[0,0,0,0],undefined0:function(){return this.identity},number1:function(a){return[a,a,a,a]},number2:function(a,b){return[a,b,b,b]},number3:function(a,b,c){return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d]},object1:function(a){switch(a.length){case 4:return[a[0],a[1],a[2],a[3]];case 3:return[a[0],a[1],a[2],a[2]];case 2:return[a[0],a[1],a[1],a[1]];default:if("w"in a&&"x"in a){if(typeof a.x!==typeof a.w)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec4: "+
a);return[a.x,a.y,a.z,a.w]}}throw new GLMJSError("unrecognized object passed to GLM.vec4: "+[a,a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,b];throw new GLMJSError("unrecognized object passed to GLM.vec4(o,w): "+[a,b]);},object3:function(a,b,c){if(a instanceof GLM.vec2)return[a.x,a.y,b,c];throw new GLMJSError("unrecognized object passed to GLM.vec4(o,z,w): "+[a,b,c]);},to_string:function(a){return GLM.$toString(a.$typeName,a,["x","y","z","w"])}});
GLM.uvec4=GLM_template.GLMType("uvec4",{name:"uvec4",identity:[0,0,0,0],_clamp:function(a){return~~glm._clamp(a,0,Infinity)},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d].map(this._clamp)},object1:function(a){switch(a.length){case 4:return[a[0],
a[1],a[2],a[3]].map(this._clamp);case 3:return[a[0],a[1],a[2],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1],a[1]].map(this._clamp);default:if("w"in a&&"x"in a)return[a.x,a.y,a.z,a.w].map(this._clamp)}throw new GLMJSError("unrecognized object passed to GLM.uvec4: "+[a,a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,b].map(this._clamp);throw new GLMJSError("unrecognized object passed to GLM.uvec4(o,w): "+[a,b]);},to_string:function(a){return a.$typeName+"("+glm.$to_array(a)+
")"}});
GLM.mat3=GLM_template.GLMType("mat3",{name:"mat3x3",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,a,0,0,0,a]},object1:function(a){var b=a.elements||a;if(16===b.length)return[b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]];if(9===b.length)return b;throw new GLMJSError("unrecognized object passed to GLM.mat3: "+a);},to_string:function(a){var b=[0,1,2].map(function(b){return a[b]}).map(function(a){return GLM.$toString("\t",a,
["x","y","z"])});return a.$typeName+"(\n"+b.join(", \n")+"\n)"}});
GLM.mat4=GLM_template.GLMType("mat4",{name:"mat4x4",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number16:function(){return arguments},number1:function(a){return 1===a?this.identity:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]},object1:function(a){if(a instanceof GLM.quat||"quat"===a.$type)return GLM.outer.mat4_array_from_quat(a);var b=a.elements||a;if(9===b.length)return[b[0],b[1],b[2],0,b[3],b[4],b[5],0,b[6],b[7],b[8],0,0,0,0,1];if(16!==b.length)throw new GLMJSError("unrecognized object passed to GLM.mat4: "+
[a,b.length]);return b},to_string:function(a){var b=[0,1,2,3].map(function(b){return a[b]}).map(function(a){return GLM.$toString("\t",a,["x","y","z","w"])});return a.$typeName+"(\n"+b.join(", \n")+"\n)"}});
GLM.quat=GLM_template.GLMType("quat",{identity:[0,0,0,1],undefined0:function(){return this.identity},number1:function(a){if(1!==a)throw Error("only quat(1) syntax supported for quat(number1 args)...");return this.identity},number4:function(a,b,c,d){return[b,c,d,a]},object1:function(a){if(a instanceof GLM.mat4)return GLM.outer.quat_array_from_mat4(a);if(4===a.length)return a;if(a instanceof GLM.quat)return[a.x,a.y,a.z,a.w];if(a instanceof GLM.vec3)return GLM.outer.quat_array_from_zyx(a);if("w"in a&&
"x"in a)return[a.x,a.y,a.z,a.w];throw new GLMJSError("unrecognized object passed to GLM.quat.object1: "+[a,a.$type,typeof a,a.constructor]);},to_string:function(a){a=GLM.degrees(GLM.eulerAngles(a));return GLM.$toString("<quat>"+a.$typeName,a,["x","y","z"])}});
(function(){var a=[0,1,2,3].map(function(a){return{get:function(){return this.elements[a]},set:function(b){this.elements[a]=b}}}),b=function(b,c){c.forEach(function(c,e){Object.defineProperty(b.prototype,c,a[e])});if(isNaN(c[0])&&!/^_/.test(c[0])){do(function(a,c,e){Object.defineProperty(b.prototype,a,{get:function(){return new GLM[c](this.elements.subarray(0*e,1*e))}})})(c.join(""),"vec"+c.length,c.length);while(c[1]!=c.pop())}};b(GLM.vec2,["x","y"]);b(GLM.vec3,["x","y","z"]);b(GLM.vec3,["r","g",
"b"]);b(GLM.vec4,["x","y","z","w"]);b(GLM.vec4,["r","g","b","a"]);b(GLM.quat,["x","y","z","w"]);Object.defineProperty(GLM.quat.prototype,"_x",{get:function(){throw Error("erroneous quat._x access");}});[2,3,4].forEach(function(a){a=GLM["vec"+a];b(a,a.$.identity.map(function(a,b){return b}))});var c=Float32Array.BYTES_PER_ELEMENT;GLM.$partition=function(a,b,f,g){if(void 0===f)throw new GLMJSError("nrows is undefined");var h=b.$.identity.length;f=f||h;for(var j=c*h,i=0;i<f;i++)(function(c){var f=c*
j,i=g&&g+c,p=c*h;Object.defineProperty(a,c,{configurable:!0,enumerable:!0,set:function(f){console.warn("local elements !!SET"+f);if(f instanceof b)this.elements.set(f.elements,p);else if(f&&f.length===h)this.elements.set(f,p);else throw new GLMJSError("unsupported argtype to "+(a&&a.$type)+"["+c+"] setter: "+[typeof f,f]);},get:function(){if(g){if(this[i])return c||GLM.outer.console.debug("CACHEDBG: cache hit "+i),Object.defineProperty(this,c,{configurable:!0,enumerable:!1,value:this[i]}),this[i];
c||GLM.outer.console.debug("CACHEDBG: cache miss "+i)}var a,d=new b(a=new Float32Array(this.elements.buffer,this.elements.byteOffset+f,h));if(d.elements!==a)throw 5;g&&Object.defineProperty(this,i,{configurable:!0,enumerable:!1,value:d});return d}})})(i)};GLM.$partition(GLM.mat4.prototype,GLM.vec4,4,"_cache_");GLM.$partition(GLM.mat3.prototype,GLM.vec3,3,"_cache_")})();
GLM.$dumpTypes=function(a){for(var b in GLM)GLM[b].componentLength&&a("GLM."+b,JSON.stringify({"#type":GLM[b].prototype.$typeName,"#floats":GLM[b].componentLength,"#bytes":GLM[b].BYTES_PER_ELEMENT}))};
GLM.init=function(a){a.prefix&&(GLMJS_PREFIX=a.prefix);var b=a.log||function(){};try{b("GLM-js: ENV: "+_ENV._VERSION)}catch(c){}b("GLM-JS: initializing: "+JSON.stringify(a,0,2));b(JSON.stringify({functions:Object.keys(GLM.$functions)}));GLM.$symbols=[];GLM.$types=[];for(var d in GLM)"function"===typeof GLM[d]&&(/^[a-z]/.test(d)&&GLM.$symbols.push(d),"$"in GLM[d]&&GLM.$types.push(d));GLM.$types.forEach(function(a){for(var b in GLM.$functions){var c=GLM.$functions[b];c.op&&(GLM[a].prototype[b]=c,GLM[a].prototype[c.op]=
c)}});b("GLM-JS: "+GLM.version+" emulating GLM_VERSION="+GLM.GLM_VERSION+" vendor_name="+a.vendor_name+" vendor_version="+a.vendor_version);glm.vendor=a};
GLM.using_namespace=function(a){GLM.outer.console.warn("GLM.using_namespace munges globals; it should not be used!");var b=[],c=GLM.$symbols,d=c.filter(function(a){return eval("1, 'undefined' !== typeof "+a)});c.map(function(a){var c="GLM.using_namespace."+a+"=undefined;delete GLM.using_namespace."+a+";";try{GLM.using_namespace[a]=eval("1,"+a),b.push(new Function("",a+"=GLM.using_namespace."+a+";"+c))}catch(d){b.push(new Function("",a+"=undefined;delete "+a+";"+c))}eval(a+"=GLM."+a)});a();b.map(function(a){a()});
a=c.filter(function(a){return eval("1, 'undefined' !== typeof "+a)});if(d.length!==a.length)throw Error(JSON.stringify({before:d,after:a,usn:Object.keys(GLM.using_namespace)}));};try{module.exports=GLM}catch(e$$24){}try{THREE.exists}catch(e$$25){THREE=THREEMATHS}glm=GLM;
var DLL=glm.outer["three.js"]={vendor_name:"three.js",vendor_version:THREE.REVISION,_name:"glm.three.js",_version:"0.0.0",$tmp:{euler:new THREE.Euler,mat4:new THREE.Matrix4,quat:new THREE.Quaternion,vec4:new THREE.Vector4,vec3:new THREE.Vector3,vec2:new THREE.Vector2}};
DLL.$functions=function(a){return{mat4_perspective:function(b,c,d,e){b=glm.degrees(b);return glm.make_mat4(a.mat4.makePerspective(b,c,d,e).elements)},mat4_angleAxis:function(b,c){return glm.make_mat4(a.mat4.makeRotationAxis(c,b).elements)},quat_angleAxis:function(b,c){return new glm.quat(a.quat.setFromAxisAngle(glm.normalize(c),b))},mat4_translation:function(b){return glm.make_mat4(a.mat4.makeTranslation(b.x,b.y,b.z).elements)},mat4_scale:function(b){return glm.make_mat4(a.mat4.makeScale(b.x,b.y,
b.z).elements)},vec3_eulerAngles:function(b){return new glm.vec3(a.euler.setFromQuaternion(b,"ZYX"))},mat4_array_from_quat:function(b){return a.mat4.makeRotationFromQuaternion(b).elements},quat_array_from_mat4:function(b){return a.quat.setFromRotationMatrix(b).toArray()}}}(DLL.$tmp);
(function(a){glm.$template.operations({mul:{op:"*",$tmp2:a.quat.clone(),"quat,quat":function(b,c){b=a.quat.fromArray(b.elements);c=this.$tmp2.fromArray(c.elements);return new glm.quat(b.multiply(c))},"quat,vec3":function(b,c){return a.vec3.applyQuaternion.call(c.clone(),a.quat.fromArray(b.elements))},"vec4,quat":function(b,c){return a.vec4.applyMatrix4.call(b.clone(),glm.toMat4(c))},"vec3,quat":function(a,c){return this["quat,vec3"](c,a)},"vec<N>,float":function(b,c){return a.vecN.multiplyScalar.call(b.clone(),
c)},"mat4,vec4":function(b,c){return a.vec4.applyMatrix4.call(c.clone(),b)},"mat4,mat4":function(b,c){b=b.clone();return a.mat4.multiplyMatrices.call(b,b,c)}},mul_eq:{op:"*=","vec<N>,float":function(b,c){return a.vecN.multiplyScalar.call(b,c)},"mat4,mat4":function(b,c){return a.mat4.multiplyMatrices.call(b,b,c)},$tmp2:a.quat.clone(),"quat,quat":function(b,c){var d=a.quat.fromArray(b.elements);c=this.$tmp2.fromArray(c.elements);d.multiply(c);b.elements.set(d.toArray());return b}}});glm.$template.functions({mix:{$tmp2:a.quat.clone(),
"quat,quat":function(b,c,d){return new glm.quat(a.quat.fromArray(b.elements).slerp(this.$tmp2.fromArray(c.elements),d))}}});glm.$template.calculators({normalize:{"vec<N>":function(b){return new glm.vecN(a.vecN.copy(b).normalize())},quat:function(b){return new glm.quat(a.quat.fromArray(b.elements).normalize())}},length2:{"vec<N>":function(b){return a.vecN.lengthSq.call(b)},quat:function(b){return a.quat.fromArray(b.elements).lengthSq()}},length:{"vec<N>":function(b){return a.vecN.length.call(b)},quat:function(b){return a.quat.fromArray(b.elements).length()}},
inverse:{quat:function(b){return new glm.quat(a.quat.fromArray(b.elements).inverse())},mat4:function(b){return new glm.mat4(a.mat4.getInverse(b))}},transpose:{mat4:function(b){return a.mat4.transpose.call(b.clone())}}})})(DLL.$tmp);glm.$intern(DLL.$functions);$tmp=DLL.$tmp;glm.init({vendor_name:DLL.vendor_name,vendor_version:DLL.vendor_version},"glm-js[three]: ");try{module.exports=glm}catch(e$$26){};
