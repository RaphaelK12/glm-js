var THREEMATHS={REVISION:"70-maths-only"};try{THREE.exists}catch(e$$10){THREE=THREEMATHS}"object"===typeof module&&(module.exports=THREEMATHS);void 0===Math.sign&&(Math.sign=function(a){return 0>a?-1:0<a?1:+a});THREEMATHS.Quaternion=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._w=void 0!==d?d:1};
THREEMATHS.Quaternion.prototype={constructor:THREEMATHS.Quaternion,_x:0,_y:0,_z:0,_w:0,get x(){return this._x},set x(a){this._x=a},get y(){return this._y},set y(a){this._y=a},get z(){return this._z},set z(a){this._z=a},get w(){return this._w},set w(a){this._w=a},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._w=d;return this},copy:function(a){this._x=a.x;this._y=a.y;this._z=a.z;this._w=a.w;return this},setFromEuler:function(a){if(!1===a instanceof THREEMATHS.Euler)throw Error("THREEMATHS.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
var b=Math.cos(a._x/2),c=Math.cos(a._y/2),d=Math.cos(a._z/2),e=Math.sin(a._x/2),g=Math.sin(a._y/2),f=Math.sin(a._z/2);"XYZ"===a.order?(this._x=e*c*d+b*g*f,this._y=b*g*d-e*c*f,this._z=b*c*f+e*g*d,this._w=b*c*d-e*g*f):"YXZ"===a.order?(this._x=e*c*d+b*g*f,this._y=b*g*d-e*c*f,this._z=b*c*f-e*g*d,this._w=b*c*d+e*g*f):"ZXY"===a.order?(this._x=e*c*d-b*g*f,this._y=b*g*d+e*c*f,this._z=b*c*f+e*g*d,this._w=b*c*d-e*g*f):"ZYX"===a.order?(this._x=e*c*d-b*g*f,this._y=b*g*d+e*c*f,this._z=b*c*f-e*g*d,this._w=b*c*
d+e*g*f):"YZX"===a.order?(this._x=e*c*d+b*g*f,this._y=b*g*d+e*c*f,this._z=b*c*f-e*g*d,this._w=b*c*d-e*g*f):"XZY"===a.order&&(this._x=e*c*d-b*g*f,this._y=b*g*d-e*c*f,this._z=b*c*f+e*g*d,this._w=b*c*d+e*g*f);return this},setFromAxisAngle:function(a,b){var c=b/2,d=Math.sin(c);this._x=a.x*d;this._y=a.y*d;this._z=a.z*d;this._w=Math.cos(c);return this},setFromRotationMatrix:function(a){var b=a.elements,c=b[0];a=b[4];var d=b[8],e=b[1],g=b[5],f=b[9],h=b[2],i=b[6],b=b[10],j=c+g+b;0<j?(c=0.5/Math.sqrt(j+1),
this._w=0.25/c,this._x=(i-f)*c,this._y=(d-h)*c,this._z=(e-a)*c):c>g&&c>b?(c=2*Math.sqrt(1+c-g-b),this._w=(i-f)/c,this._x=0.25*c,this._y=(a+e)/c,this._z=(d+h)/c):g>b?(c=2*Math.sqrt(1+g-c-b),this._w=(d-h)/c,this._x=(a+e)/c,this._y=0.25*c,this._z=(f+i)/c):(c=2*Math.sqrt(1+b-c-g),this._w=(e-a)/c,this._x=(d+h)/c,this._y=(f+i)/c,this._z=0.25*c);return this},setFromUnitVectors:function(){var a,b;return function(c,d){void 0===a&&(a=new THREEMATHS.Vector3);b=c.dot(d)+1;1E-6>b?(b=0,Math.abs(c.x)>Math.abs(c.z)?
a.set(-c.y,c.x,0):a.set(0,-c.z,c.y)):a.crossVectors(c,d);this._x=a.x;this._y=a.y;this._z=a.z;this._w=b;this.normalize();return this}}(),inverse:function(){this.conjugate().normalize();return this},conjugate:function(){this._x*=-1;this._y*=-1;this._z*=-1;return this},dot:function(a){return this._x*a._x+this._y*a._y+this._z*a._z+this._w*a._w},lengthSq:function(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w},length:function(){return Math.sqrt(this._x*this._x+this._y*this._y+
this._z*this._z+this._w*this._w)},normalize:function(){var a=this.length();0===a?(this._z=this._y=this._x=0,this._w=1):(a=1/a,this._x*=a,this._y*=a,this._z*=a,this._w*=a);return this},multiply:function(a,b){return void 0!==b?(console.warn("THREEMATHS.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."),this.multiplyQuaternions(a,b)):this.multiplyQuaternions(this,a)},multiplyQuaternions:function(a,b){var c=a._x,d=a._y,e=a._z,g=a._w,f=b._x,h=b._y,i=b._z,
j=b._w;this._x=c*j+g*f+d*i-e*h;this._y=d*j+g*h+e*f-c*i;this._z=e*j+g*i+c*h-d*f;this._w=g*j-c*f-d*h-e*i;return this},multiplyVector3:function(a){console.warn("THREEMATHS.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead.");return a.applyQuaternion(this)},slerp:function(a,b){if(0===b)return this;if(1===b)return this.copy(a);var c=this._x,d=this._y,e=this._z,g=this._w,f=g*a._w+c*a._x+d*a._y+e*a._z;0>f?(this._w=-a._w,this._x=-a._x,this._y=-a._y,this._z=
-a._z,f=-f):this.copy(a);if(1<=f)return this._w=g,this._x=c,this._y=d,this._z=e,this;var h=Math.acos(f),i=Math.sqrt(1-f*f);if(0.0010>Math.abs(i))return this._w=0.5*(g+this._w),this._x=0.5*(c+this._x),this._y=0.5*(d+this._y),this._z=0.5*(e+this._z),this;f=Math.sin((1-b)*h)/i;h=Math.sin(b*h)/i;this._w=g*f+this._w*h;this._x=c*f+this._x*h;this._y=d*f+this._y*h;this._z=e*f+this._z*h;return this},equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._w===this._w},fromArray:function(a,
b){void 0===b&&(b=0);this._x=a[b];this._y=a[b+1];this._z=a[b+2];this._w=a[b+3];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this._x;a[b+1]=this._y;a[b+2]=this._z;a[b+3]=this._w;return a},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREEMATHS.Quaternion(this._x,this._y,this._z,this._w)}};THREEMATHS.Quaternion.slerp=function(a,b,c,d){return c.copy(a).slerp(b,d)};
THREEMATHS.Vector2=function(a,b){this.x=a||0;this.y=b||0};
THREEMATHS.Vector2.prototype={constructor:THREEMATHS.Vector2,set:function(a,b){this.x=a;this.y=b;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;return this},
add:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;return this},addScalar:function(a){this.x+=a;this.y+=a;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=
a.x;this.y-=a.y;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;return this},multiply:function(a){this.x*=a.x;this.y*=a.y;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;return this},divide:function(a){this.x/=a.x;this.y/=a.y;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a):this.y=this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);
return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREEMATHS.Vector2,b=new THREEMATHS.Vector2);a.set(c,c);b.set(d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this},round:function(){this.x=Math.round(this.x);
this.y=Math.round(this.y);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);return this},negate:function(){this.x=-this.x;this.y=-this.y;return this},dot:function(a){return this.x*a.x+this.y*a.y},lengthSq:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},normalize:function(){return this.divideScalar(this.length())},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},
distanceToSquared:function(a){var b=this.x-a.x;a=this.y-a.y;return b*b+a*a},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;return a},fromAttribute:function(a,
b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];return this},clone:function(){return new THREEMATHS.Vector2(this.x,this.y)}};THREEMATHS.Vector3=function(a,b,c){this.x=a||0;this.y=b||0;this.z=c||0};
THREEMATHS.Vector3.prototype={constructor:THREEMATHS.Vector3,set:function(a,b,c){this.x=a;this.y=b;this.z=c;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw Error("index is out of range: "+
a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;return this},add:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;return this},addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),
this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;return this},multiply:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."),this.multiplyVectors(a,b);this.x*=a.x;this.y*=a.y;this.z*=a.z;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;return this},multiplyVectors:function(a,b){this.x=a.x*b.x;
this.y=a.y*b.y;this.z=a.z*b.z;return this},applyEuler:function(){var a;return function(b){!1===b instanceof THREEMATHS.Euler&&console.error("THREEMATHS.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order.");void 0===a&&(a=new THREEMATHS.Quaternion);this.applyQuaternion(a.setFromEuler(b));return this}}(),applyAxisAngle:function(){var a;return function(b,c){void 0===a&&(a=new THREEMATHS.Quaternion);this.applyQuaternion(a.setFromAxisAngle(b,c));return this}}(),applyMatrix3:function(a){var b=
this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[3]*c+a[6]*d;this.y=a[1]*b+a[4]*c+a[7]*d;this.z=a[2]*b+a[5]*c+a[8]*d;return this},applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12];this.y=a[1]*b+a[5]*c+a[9]*d+a[13];this.z=a[2]*b+a[6]*c+a[10]*d+a[14];return this},applyProjection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;var e=1/(a[3]*b+a[7]*c+a[11]*d+a[15]);this.x=(a[0]*b+a[4]*c+a[8]*d+a[12])*e;this.y=(a[1]*b+a[5]*c+a[9]*d+a[13])*
e;this.z=(a[2]*b+a[6]*c+a[10]*d+a[14])*e;return this},applyQuaternion:function(a){var b=this.x,c=this.y,d=this.z,e=a.x,g=a.y,f=a.z;a=a.w;var h=a*b+g*d-f*c,i=a*c+f*b-e*d,j=a*d+e*c-g*b,b=-e*b-g*c-f*d;this.x=h*a+b*-e+i*-f-j*-g;this.y=i*a+b*-g+j*-e-h*-f;this.z=j*a+b*-f+h*-g-i*-e;return this},project:function(){var a;return function(b){void 0===a&&(a=new THREEMATHS.Matrix4);a.multiplyMatrices(b.projectionMatrix,a.getInverse(b.matrixWorld));return this.applyProjection(a)}}(),unproject:function(){var a;
return function(b){void 0===a&&(a=new THREEMATHS.Matrix4);a.multiplyMatrices(b.matrixWorld,a.getInverse(b.projectionMatrix));return this.applyProjection(a)}}(),transformDirection:function(a){var b=this.x,c=this.y,d=this.z;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d;this.y=a[1]*b+a[5]*c+a[9]*d;this.z=a[2]*b+a[6]*c+a[10]*d;this.normalize();return this},divide:function(a){this.x/=a.x;this.y/=a.y;this.z/=a.z;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a):this.z=this.y=
this.x=0;return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=a.y);this.z<a.z&&(this.z=a.z);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREEMATHS.Vector3,b=new THREEMATHS.Vector3);
a.set(c,c,c);b.set(d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);this.z=Math.floor(this.z);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);
this.z=0>this.z?Math.ceil(this.z):Math.floor(this.z);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=
this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;return this},cross:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."),this.crossVectors(a,b);var c=this.x,d=this.y,e=this.z;this.x=d*a.z-e*a.y;this.y=e*a.x-c*a.z;this.z=c*a.y-d*a.x;return this},crossVectors:function(a,b){var c=a.x,d=a.y,e=a.z,g=b.x,f=b.y,
h=b.z;this.x=d*h-e*f;this.y=e*g-c*h;this.z=c*f-d*g;return this},projectOnVector:function(){var a,b;return function(c){void 0===a&&(a=new THREEMATHS.Vector3);a.copy(c).normalize();b=this.dot(a);return this.copy(a).multiplyScalar(b)}}(),projectOnPlane:function(){var a;return function(b){void 0===a&&(a=new THREEMATHS.Vector3);a.copy(this).projectOnVector(b);return this.sub(a)}}(),reflect:function(){var a;return function(b){void 0===a&&(a=new THREEMATHS.Vector3);return this.sub(a.copy(b).multiplyScalar(2*
this.dot(b)))}}(),angleTo:function(a){a=this.dot(a)/(this.length()*a.length());return Math.acos(THREEMATHS.Math.clamp(a,-1,1))},distanceTo:function(a){return Math.sqrt(this.distanceToSquared(a))},distanceToSquared:function(a){var b=this.x-a.x,c=this.y-a.y;a=this.z-a.z;return b*b+c*c+a*a},setEulerFromRotationMatrix:function(){console.error("THREEMATHS.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")},setEulerFromQuaternion:function(){console.error("THREEMATHS.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")},
getPositionFromMatrix:function(a){console.warn("THREEMATHS.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition().");return this.setFromMatrixPosition(a)},getScaleFromMatrix:function(a){console.warn("THREEMATHS.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale().");return this.setFromMatrixScale(a)},getColumnFromMatrix:function(a,b){console.warn("THREEMATHS.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn().");return this.setFromMatrixColumn(a,
b)},setFromMatrixPosition:function(a){this.x=a.elements[12];this.y=a.elements[13];this.z=a.elements[14];return this},setFromMatrixScale:function(a){var b=this.set(a.elements[0],a.elements[1],a.elements[2]).length(),c=this.set(a.elements[4],a.elements[5],a.elements[6]).length();a=this.set(a.elements[8],a.elements[9],a.elements[10]).length();this.x=b;this.y=c;this.z=a;return this},setFromMatrixColumn:function(a,b){var c=4*a,d=b.elements;this.x=d[c];this.y=d[c+1];this.z=d[c+2];return this},equals:function(a){return a.x===
this.x&&a.y===this.y&&a.z===this.z},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];return this},toArray:function(a,b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];return this},clone:function(){return new THREEMATHS.Vector3(this.x,this.y,this.z)}};
THREEMATHS.Vector4=function(a,b,c,d){this.x=a||0;this.y=b||0;this.z=c||0;this.w=void 0!==d?d:1};
THREEMATHS.Vector4.prototype={constructor:THREEMATHS.Vector4,set:function(a,b,c,d){this.x=a;this.y=b;this.z=c;this.w=d;return this},setX:function(a){this.x=a;return this},setY:function(a){this.y=a;return this},setZ:function(a){this.z=a;return this},setW:function(a){this.w=a;return this},setComponent:function(a,b){switch(a){case 0:this.x=b;break;case 1:this.y=b;break;case 2:this.z=b;break;case 3:this.w=b;break;default:throw Error("index is out of range: "+a);}},getComponent:function(a){switch(a){case 0:return this.x;
case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw Error("index is out of range: "+a);}},copy:function(a){this.x=a.x;this.y=a.y;this.z=a.z;this.w=void 0!==a.w?a.w:1;return this},add:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."),this.addVectors(a,b);this.x+=a.x;this.y+=a.y;this.z+=a.z;this.w+=a.w;return this},addScalar:function(a){this.x+=a;this.y+=a;this.z+=a;this.w+=a;return this},
addVectors:function(a,b){this.x=a.x+b.x;this.y=a.y+b.y;this.z=a.z+b.z;this.w=a.w+b.w;return this},sub:function(a,b){if(void 0!==b)return console.warn("THREEMATHS.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."),this.subVectors(a,b);this.x-=a.x;this.y-=a.y;this.z-=a.z;this.w-=a.w;return this},subVectors:function(a,b){this.x=a.x-b.x;this.y=a.y-b.y;this.z=a.z-b.z;this.w=a.w-b.w;return this},multiplyScalar:function(a){this.x*=a;this.y*=a;this.z*=a;this.w*=a;return this},
applyMatrix4:function(a){var b=this.x,c=this.y,d=this.z,e=this.w;a=a.elements;this.x=a[0]*b+a[4]*c+a[8]*d+a[12]*e;this.y=a[1]*b+a[5]*c+a[9]*d+a[13]*e;this.z=a[2]*b+a[6]*c+a[10]*d+a[14]*e;this.w=a[3]*b+a[7]*c+a[11]*d+a[15]*e;return this},divideScalar:function(a){0!==a?(a=1/a,this.x*=a,this.y*=a,this.z*=a,this.w*=a):(this.z=this.y=this.x=0,this.w=1);return this},setAxisAngleFromQuaternion:function(a){this.w=2*Math.acos(a.w);var b=Math.sqrt(1-a.w*a.w);1E-4>b?(this.x=1,this.z=this.y=0):(this.x=a.x/b,
this.y=a.y/b,this.z=a.z/b);return this},setAxisAngleFromRotationMatrix:function(a){var b,c,d;a=a.elements;var e=a[0];d=a[4];var g=a[8],f=a[1],h=a[5],i=a[9];c=a[2];b=a[6];var j=a[10];if(0.01>Math.abs(d-f)&&0.01>Math.abs(g-c)&&0.01>Math.abs(i-b)){if(0.1>Math.abs(d+f)&&0.1>Math.abs(g+c)&&0.1>Math.abs(i+b)&&0.1>Math.abs(e+h+j-3))return this.set(1,0,0,0),this;a=Math.PI;e=(e+1)/2;h=(h+1)/2;j=(j+1)/2;d=(d+f)/4;g=(g+c)/4;i=(i+b)/4;e>h&&e>j?0.01>e?(b=0,d=c=0.707106781):(b=Math.sqrt(e),c=d/b,d=g/b):h>j?0.01>
h?(b=0.707106781,c=0,d=0.707106781):(c=Math.sqrt(h),b=d/c,d=i/c):0.01>j?(c=b=0.707106781,d=0):(d=Math.sqrt(j),b=g/d,c=i/d);this.set(b,c,d,a);return this}a=Math.sqrt((b-i)*(b-i)+(g-c)*(g-c)+(f-d)*(f-d));0.0010>Math.abs(a)&&(a=1);this.x=(b-i)/a;this.y=(g-c)/a;this.z=(f-d)/a;this.w=Math.acos((e+h+j-1)/2);return this},min:function(a){this.x>a.x&&(this.x=a.x);this.y>a.y&&(this.y=a.y);this.z>a.z&&(this.z=a.z);this.w>a.w&&(this.w=a.w);return this},max:function(a){this.x<a.x&&(this.x=a.x);this.y<a.y&&(this.y=
a.y);this.z<a.z&&(this.z=a.z);this.w<a.w&&(this.w=a.w);return this},clamp:function(a,b){this.x<a.x?this.x=a.x:this.x>b.x&&(this.x=b.x);this.y<a.y?this.y=a.y:this.y>b.y&&(this.y=b.y);this.z<a.z?this.z=a.z:this.z>b.z&&(this.z=b.z);this.w<a.w?this.w=a.w:this.w>b.w&&(this.w=b.w);return this},clampScalar:function(){var a,b;return function(c,d){void 0===a&&(a=new THREEMATHS.Vector4,b=new THREEMATHS.Vector4);a.set(c,c,c,c);b.set(d,d,d,d);return this.clamp(a,b)}}(),floor:function(){this.x=Math.floor(this.x);
this.y=Math.floor(this.y);this.z=Math.floor(this.z);this.w=Math.floor(this.w);return this},ceil:function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);this.z=Math.ceil(this.z);this.w=Math.ceil(this.w);return this},round:function(){this.x=Math.round(this.x);this.y=Math.round(this.y);this.z=Math.round(this.z);this.w=Math.round(this.w);return this},roundToZero:function(){this.x=0>this.x?Math.ceil(this.x):Math.floor(this.x);this.y=0>this.y?Math.ceil(this.y):Math.floor(this.y);this.z=0>this.z?Math.ceil(this.z):
Math.floor(this.z);this.w=0>this.w?Math.ceil(this.w):Math.floor(this.w);return this},negate:function(){this.x=-this.x;this.y=-this.y;this.z=-this.z;this.w=-this.w;return this},dot:function(a){return this.x*a.x+this.y*a.y+this.z*a.z+this.w*a.w},lengthSq:function(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)},lengthManhattan:function(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+
Math.abs(this.w)},normalize:function(){return this.divideScalar(this.length())},setLength:function(a){var b=this.length();0!==b&&a!==b&&this.multiplyScalar(a/b);return this},lerp:function(a,b){this.x+=(a.x-this.x)*b;this.y+=(a.y-this.y)*b;this.z+=(a.z-this.z)*b;this.w+=(a.w-this.w)*b;return this},equals:function(a){return a.x===this.x&&a.y===this.y&&a.z===this.z&&a.w===this.w},fromArray:function(a,b){void 0===b&&(b=0);this.x=a[b];this.y=a[b+1];this.z=a[b+2];this.w=a[b+3];return this},toArray:function(a,
b){void 0===a&&(a=[]);void 0===b&&(b=0);a[b]=this.x;a[b+1]=this.y;a[b+2]=this.z;a[b+3]=this.w;return a},fromAttribute:function(a,b,c){void 0===c&&(c=0);b=b*a.itemSize+c;this.x=a.array[b];this.y=a.array[b+1];this.z=a.array[b+2];this.w=a.array[b+3];return this},clone:function(){return new THREEMATHS.Vector4(this.x,this.y,this.z,this.w)}};THREEMATHS.Euler=function(a,b,c,d){this._x=a||0;this._y=b||0;this._z=c||0;this._order=d||THREEMATHS.Euler.DefaultOrder};THREEMATHS.Euler.RotationOrders="XYZ YZX ZXY XZY YXZ ZYX".split(" ");
THREEMATHS.Euler.DefaultOrder="XYZ";
THREEMATHS.Euler.prototype={constructor:THREEMATHS.Euler,_x:0,_y:0,_z:0,_order:THREEMATHS.Euler.DefaultOrder,get x(){return this._x},set x(a){this._x=a},get y(){return this._y},set y(a){this._y=a},get z(){return this._z},set z(a){this._z=a},get order(){return this._order},set order(a){this._order=a},set:function(a,b,c,d){this._x=a;this._y=b;this._z=c;this._order=d||this._order;return this},copy:function(a){this._x=a._x;this._y=a._y;this._z=a._z;this._order=a._order;return this},setFromRotationMatrix:function(a,
b){var c=THREEMATHS.Math.clamp,d=a.elements,e=d[0],g=d[4],f=d[8],h=d[1],i=d[5],j=d[9],k=d[2],m=d[6],d=d[10];b=b||this._order;"XYZ"===b?(this._y=Math.asin(c(f,-1,1)),0.99999>Math.abs(f)?(this._x=Math.atan2(-j,d),this._z=Math.atan2(-g,e)):(this._x=Math.atan2(m,i),this._z=0)):"YXZ"===b?(this._x=Math.asin(-c(j,-1,1)),0.99999>Math.abs(j)?(this._y=Math.atan2(f,d),this._z=Math.atan2(h,i)):(this._y=Math.atan2(-k,e),this._z=0)):"ZXY"===b?(this._x=Math.asin(c(m,-1,1)),0.99999>Math.abs(m)?(this._y=Math.atan2(-k,
d),this._z=Math.atan2(-g,i)):(this._y=0,this._z=Math.atan2(h,e))):"ZYX"===b?(this._y=Math.asin(-c(k,-1,1)),0.99999>Math.abs(k)?(this._x=Math.atan2(m,d),this._z=Math.atan2(h,e)):(this._x=0,this._z=Math.atan2(-g,i))):"YZX"===b?(this._z=Math.asin(c(h,-1,1)),0.99999>Math.abs(h)?(this._x=Math.atan2(-j,i),this._y=Math.atan2(-k,e)):(this._x=0,this._y=Math.atan2(f,d))):"XZY"===b?(this._z=Math.asin(-c(g,-1,1)),0.99999>Math.abs(g)?(this._x=Math.atan2(m,i),this._y=Math.atan2(f,e)):(this._x=Math.atan2(-j,d),
this._y=0)):console.warn("THREEMATHS.Euler: .setFromRotationMatrix() given unsupported order: "+b);this._order=b;return this},setFromQuaternion:function(){var a;return function(b,c,d){void 0===a&&(a=new THREEMATHS.Matrix4);a.makeRotationFromQuaternion(b);this.setFromRotationMatrix(a,c,d);return this}}(),setFromVector3:function(a,b){return this.set(a.x,a.y,a.z,b||this._order)},reorder:function(){var a=new THREEMATHS.Quaternion;return function(b){a.setFromEuler(this);this.setFromQuaternion(a,b)}}(),
equals:function(a){return a._x===this._x&&a._y===this._y&&a._z===this._z&&a._order===this._order},fromArray:function(a){this._x=a[0];this._y=a[1];this._z=a[2];void 0!==a[3]&&(this._order=a[3]);return this},toArray:function(){return[this._x,this._y,this._z,this._order]},toVector3:function(a){return a?a.set(this._x,this._y,this._z):new THREEMATHS.Vector3(this._x,this._y,this._z)},onChange:function(a){this.onChangeCallback=a;return this},onChangeCallback:function(){},clone:function(){return new THREEMATHS.Euler(this._x,
this._y,this._z,this._order)}};THREEMATHS.Matrix3=function(){this.elements=new Float32Array([1,0,0,0,1,0,0,0,1]);0<arguments.length&&console.error("THREEMATHS.Matrix3: the constructor no longer reads arguments. use .set() instead.")};
THREEMATHS.Matrix3.prototype={constructor:THREEMATHS.Matrix3,set:function(a,b,c,d,e,g,f,h,i){var j=this.elements;j[0]=a;j[3]=b;j[6]=c;j[1]=d;j[4]=e;j[7]=g;j[2]=f;j[5]=h;j[8]=i;return this},identity:function(){this.set(1,0,0,0,1,0,0,0,1);return this},copy:function(a){a=a.elements;this.set(a[0],a[3],a[6],a[1],a[4],a[7],a[2],a[5],a[8]);return this},multiplyVector3:function(a){console.warn("THREEMATHS.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead.");return a.applyMatrix3(this)},
multiplyVector3Array:function(a){console.warn("THREEMATHS.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREEMATHS.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix3(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[3]*=
a;b[6]*=a;b[1]*=a;b[4]*=a;b[7]*=a;b[2]*=a;b[5]*=a;b[8]*=a;return this},determinant:function(){var a=this.elements,b=a[0],c=a[1],d=a[2],e=a[3],g=a[4],f=a[5],h=a[6],i=a[7],a=a[8];return b*g*a-b*f*i-c*e*a+c*f*h+d*e*i-d*g*h},getInverse:function(a,b){var c=a.elements,d=this.elements;d[0]=c[10]*c[5]-c[6]*c[9];d[1]=-c[10]*c[1]+c[2]*c[9];d[2]=c[6]*c[1]-c[2]*c[5];d[3]=-c[10]*c[4]+c[6]*c[8];d[4]=c[10]*c[0]-c[2]*c[8];d[5]=-c[6]*c[0]+c[2]*c[4];d[6]=c[9]*c[4]-c[5]*c[8];d[7]=-c[9]*c[0]+c[1]*c[8];d[8]=c[5]*c[0]-
c[1]*c[4];c=c[0]*d[0]+c[1]*d[3]+c[2]*d[6];if(0===c){if(b)throw Error("Matrix3.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix3.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},transpose:function(){var a,b=this.elements;a=b[1];b[1]=b[3];b[3]=a;a=b[2];b[2]=b[6];b[6]=a;a=b[5];b[5]=b[7];b[7]=a;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];
a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];return a},getNormalMatrix:function(a){this.getInverse(a).transpose();return this},transposeIntoArray:function(a){var b=this.elements;a[0]=b[0];a[1]=b[3];a[2]=b[6];a[3]=b[1];a[4]=b[4];a[5]=b[7];a[6]=b[2];a[7]=b[5];a[8]=b[8];return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8]]},clone:function(){return(new THREEMATHS.Matrix3).fromArray(this.elements)}};
THREEMATHS.Matrix4=function(){this.elements=new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]);0<arguments.length&&console.error("THREEMATHS.Matrix4: the constructor no longer reads arguments. use .set() instead.")};
THREEMATHS.Matrix4.prototype={constructor:THREEMATHS.Matrix4,set:function(a,b,c,d,e,g,f,h,i,j,k,m,n,p,q,r){var l=this.elements;l[0]=a;l[4]=b;l[8]=c;l[12]=d;l[1]=e;l[5]=g;l[9]=f;l[13]=h;l[2]=i;l[6]=j;l[10]=k;l[14]=m;l[3]=n;l[7]=p;l[11]=q;l[15]=r;return this},identity:function(){this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1);return this},copy:function(a){this.elements.set(a.elements);return this},extractPosition:function(a){console.warn("THREEMATHS.Matrix4: .extractPosition() has been renamed to .copyPosition().");
return this.copyPosition(a)},copyPosition:function(a){var b=this.elements;a=a.elements;b[12]=a[12];b[13]=a[13];b[14]=a[14];return this},extractBasis:function(a,b,c){var d=this.elements;a.set(d[0],d[1],d[2]);b.set(d[4],d[5],d[6]);c.set(d[8],d[9],d[10]);return this},makeBasis:function(a,b,c){this.set(a.x,b.x,c.x,0,a.y,b.y,c.y,0,a.z,b.z,c.z,0,0,0,0,1);return this},extractRotation:function(){var a=new THREEMATHS.Vector3;return function(b){var c=this.elements;b=b.elements;var d=1/a.set(b[0],b[1],b[2]).length(),
e=1/a.set(b[4],b[5],b[6]).length(),g=1/a.set(b[8],b[9],b[10]).length();c[0]=b[0]*d;c[1]=b[1]*d;c[2]=b[2]*d;c[4]=b[4]*e;c[5]=b[5]*e;c[6]=b[6]*e;c[8]=b[8]*g;c[9]=b[9]*g;c[10]=b[10]*g;return this}}(),makeRotationFromEuler:function(a){!1===a instanceof THREEMATHS.Euler&&console.error("THREEMATHS.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");var b=this.elements,c=a.x,d=a.y,e=a.z,g=Math.cos(c),c=Math.sin(c),f=Math.cos(d),d=Math.sin(d),h=Math.cos(e),e=Math.sin(e);
if("XYZ"===a.order){a=g*h;var i=g*e,j=c*h,k=c*e;b[0]=f*h;b[4]=-f*e;b[8]=d;b[1]=i+j*d;b[5]=a-k*d;b[9]=-c*f;b[2]=k-a*d;b[6]=j+i*d;b[10]=g*f}else"YXZ"===a.order?(a=f*h,i=f*e,j=d*h,k=d*e,b[0]=a+k*c,b[4]=j*c-i,b[8]=g*d,b[1]=g*e,b[5]=g*h,b[9]=-c,b[2]=i*c-j,b[6]=k+a*c,b[10]=g*f):"ZXY"===a.order?(a=f*h,i=f*e,j=d*h,k=d*e,b[0]=a-k*c,b[4]=-g*e,b[8]=j+i*c,b[1]=i+j*c,b[5]=g*h,b[9]=k-a*c,b[2]=-g*d,b[6]=c,b[10]=g*f):"ZYX"===a.order?(a=g*h,i=g*e,j=c*h,k=c*e,b[0]=f*h,b[4]=j*d-i,b[8]=a*d+k,b[1]=f*e,b[5]=k*d+a,b[9]=
i*d-j,b[2]=-d,b[6]=c*f,b[10]=g*f):"YZX"===a.order?(a=g*f,i=g*d,j=c*f,k=c*d,b[0]=f*h,b[4]=k-a*e,b[8]=j*e+i,b[1]=e,b[5]=g*h,b[9]=-c*h,b[2]=-d*h,b[6]=i*e+j,b[10]=a-k*e):"XZY"===a.order&&(a=g*f,i=g*d,j=c*f,k=c*d,b[0]=f*h,b[4]=-e,b[8]=d*h,b[1]=a*e+k,b[5]=g*h,b[9]=i*e-j,b[2]=j*e-i,b[6]=c*h,b[10]=k*e+a);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},setRotationFromQuaternion:function(a){console.warn("THREEMATHS.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion().");
return this.makeRotationFromQuaternion(a)},makeRotationFromQuaternion:function(a){var b=this.elements,c=a.x,d=a.y,e=a.z,g=a.w,f=c+c,h=d+d,i=e+e;a=c*f;var j=c*h,c=c*i,k=d*h,d=d*i,e=e*i,f=g*f,h=g*h,g=g*i;b[0]=1-(k+e);b[4]=j-g;b[8]=c+h;b[1]=j+g;b[5]=1-(a+e);b[9]=d-f;b[2]=c-h;b[6]=d+f;b[10]=1-(a+k);b[3]=0;b[7]=0;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return this},lookAt:function(){var a=new THREEMATHS.Vector3,b=new THREEMATHS.Vector3,c=new THREEMATHS.Vector3;return function(d,e,g){var f=this.elements;
c.subVectors(d,e).normalize();0===c.length()&&(c.z=1);a.crossVectors(g,c).normalize();0===a.length()&&(c.x+=1E-4,a.crossVectors(g,c).normalize());b.crossVectors(c,a);f[0]=a.x;f[4]=b.x;f[8]=c.x;f[1]=a.y;f[5]=b.y;f[9]=c.y;f[2]=a.z;f[6]=b.z;f[10]=c.z;return this}}(),multiply:function(a,b){return void 0!==b?(console.warn("THREEMATHS.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."),this.multiplyMatrices(a,b)):this.multiplyMatrices(this,a)},multiplyMatrices:function(a,
b){var c=a.elements,d=b.elements,e=this.elements,g=c[0],f=c[4],h=c[8],i=c[12],j=c[1],k=c[5],m=c[9],n=c[13],p=c[2],q=c[6],r=c[10],l=c[14],s=c[3],t=c[7],u=c[11],c=c[15],v=d[0],w=d[4],x=d[8],y=d[12],z=d[1],A=d[5],B=d[9],C=d[13],D=d[2],E=d[6],F=d[10],G=d[14],H=d[3],I=d[7],J=d[11],d=d[15];e[0]=g*v+f*z+h*D+i*H;e[4]=g*w+f*A+h*E+i*I;e[8]=g*x+f*B+h*F+i*J;e[12]=g*y+f*C+h*G+i*d;e[1]=j*v+k*z+m*D+n*H;e[5]=j*w+k*A+m*E+n*I;e[9]=j*x+k*B+m*F+n*J;e[13]=j*y+k*C+m*G+n*d;e[2]=p*v+q*z+r*D+l*H;e[6]=p*w+q*A+r*E+l*I;e[10]=
p*x+q*B+r*F+l*J;e[14]=p*y+q*C+r*G+l*d;e[3]=s*v+t*z+u*D+c*H;e[7]=s*w+t*A+u*E+c*I;e[11]=s*x+t*B+u*F+c*J;e[15]=s*y+t*C+u*G+c*d;return this},multiplyToArray:function(a,b,c){var d=this.elements;this.multiplyMatrices(a,b);c[0]=d[0];c[1]=d[1];c[2]=d[2];c[3]=d[3];c[4]=d[4];c[5]=d[5];c[6]=d[6];c[7]=d[7];c[8]=d[8];c[9]=d[9];c[10]=d[10];c[11]=d[11];c[12]=d[12];c[13]=d[13];c[14]=d[14];c[15]=d[15];return this},multiplyScalar:function(a){var b=this.elements;b[0]*=a;b[4]*=a;b[8]*=a;b[12]*=a;b[1]*=a;b[5]*=a;b[9]*=
a;b[13]*=a;b[2]*=a;b[6]*=a;b[10]*=a;b[14]*=a;b[3]*=a;b[7]*=a;b[11]*=a;b[15]*=a;return this},multiplyVector3:function(a){console.warn("THREEMATHS.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead.");return a.applyProjection(this)},multiplyVector4:function(a){console.warn("THREEMATHS.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead.");return a.applyMatrix4(this)},multiplyVector3Array:function(a){console.warn("THREEMATHS.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead.");
return this.applyToVector3Array(a)},applyToVector3Array:function(){var a=new THREEMATHS.Vector3;return function(b,c,d){void 0===c&&(c=0);void 0===d&&(d=b.length);for(var e=0;e<d;e+=3,c+=3)a.x=b[c],a.y=b[c+1],a.z=b[c+2],a.applyMatrix4(this),b[c]=a.x,b[c+1]=a.y,b[c+2]=a.z;return b}}(),rotateAxis:function(a){console.warn("THREEMATHS.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead.");a.transformDirection(this)},crossVector:function(a){console.warn("THREEMATHS.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead.");
return a.applyMatrix4(this)},determinant:function(){var a=this.elements,b=a[0],c=a[4],d=a[8],e=a[12],g=a[1],f=a[5],h=a[9],i=a[13],j=a[2],k=a[6],m=a[10],n=a[14];return a[3]*(+e*h*k-d*i*k-e*f*m+c*i*m+d*f*n-c*h*n)+a[7]*(+b*h*n-b*i*m+e*g*m-d*g*n+d*i*j-e*h*j)+a[11]*(+b*i*k-b*f*n-e*g*k+c*g*n+e*f*j-c*i*j)+a[15]*(-d*f*j-b*h*k+b*f*m+d*g*k-c*g*m+c*h*j)},transpose:function(){var a=this.elements,b;b=a[1];a[1]=a[4];a[4]=b;b=a[2];a[2]=a[8];a[8]=b;b=a[6];a[6]=a[9];a[9]=b;b=a[3];a[3]=a[12];a[12]=b;b=a[7];a[7]=a[13];
a[13]=b;b=a[11];a[11]=a[14];a[14]=b;return this},flattenToArrayOffset:function(a,b){var c=this.elements;a[b]=c[0];a[b+1]=c[1];a[b+2]=c[2];a[b+3]=c[3];a[b+4]=c[4];a[b+5]=c[5];a[b+6]=c[6];a[b+7]=c[7];a[b+8]=c[8];a[b+9]=c[9];a[b+10]=c[10];a[b+11]=c[11];a[b+12]=c[12];a[b+13]=c[13];a[b+14]=c[14];a[b+15]=c[15];return a},getPosition:function(){var a=new THREEMATHS.Vector3;return function(){console.warn("THREEMATHS.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
var b=this.elements;return a.set(b[12],b[13],b[14])}}(),setPosition:function(a){var b=this.elements;b[12]=a.x;b[13]=a.y;b[14]=a.z;return this},getInverse:function(a,b){var c=this.elements,d=a.elements,e=d[0],g=d[4],f=d[8],h=d[12],i=d[1],j=d[5],k=d[9],m=d[13],n=d[2],p=d[6],q=d[10],r=d[14],l=d[3],s=d[7],t=d[11],d=d[15];c[0]=k*r*s-m*q*s+m*p*t-j*r*t-k*p*d+j*q*d;c[4]=h*q*s-f*r*s-h*p*t+g*r*t+f*p*d-g*q*d;c[8]=f*m*s-h*k*s+h*j*t-g*m*t-f*j*d+g*k*d;c[12]=h*k*p-f*m*p-h*j*q+g*m*q+f*j*r-g*k*r;c[1]=m*q*l-k*r*l-
m*n*t+i*r*t+k*n*d-i*q*d;c[5]=f*r*l-h*q*l+h*n*t-e*r*t-f*n*d+e*q*d;c[9]=h*k*l-f*m*l-h*i*t+e*m*t+f*i*d-e*k*d;c[13]=f*m*n-h*k*n+h*i*q-e*m*q-f*i*r+e*k*r;c[2]=j*r*l-m*p*l+m*n*s-i*r*s-j*n*d+i*p*d;c[6]=h*p*l-g*r*l-h*n*s+e*r*s+g*n*d-e*p*d;c[10]=g*m*l-h*j*l+h*i*s-e*m*s-g*i*d+e*j*d;c[14]=h*j*n-g*m*n-h*i*p+e*m*p+g*i*r-e*j*r;c[3]=k*p*l-j*q*l-k*n*s+i*q*s+j*n*t-i*p*t;c[7]=g*q*l-f*p*l+f*n*s-e*q*s-g*n*t+e*p*t;c[11]=f*j*l-g*k*l-f*i*s+e*k*s+g*i*t-e*j*t;c[15]=g*k*n-f*j*n+f*i*p-e*k*p-g*i*q+e*j*q;c=e*c[0]+i*c[4]+n*c[8]+
l*c[12];if(0==c){if(b)throw Error("Matrix4.getInverse(): can't invert matrix, determinant is 0");console.warn("Matrix4.getInverse(): can't invert matrix, determinant is 0");this.identity();return this}this.multiplyScalar(1/c);return this},translate:function(){console.warn("THREEMATHS.Matrix4: .translate() has been removed.")},rotateX:function(){console.warn("THREEMATHS.Matrix4: .rotateX() has been removed.")},rotateY:function(){console.warn("THREEMATHS.Matrix4: .rotateY() has been removed.")},rotateZ:function(){console.warn("THREEMATHS.Matrix4: .rotateZ() has been removed.")},
rotateByAxis:function(){console.warn("THREEMATHS.Matrix4: .rotateByAxis() has been removed.")},scale:function(a){var b=this.elements,c=a.x,d=a.y;a=a.z;b[0]*=c;b[4]*=d;b[8]*=a;b[1]*=c;b[5]*=d;b[9]*=a;b[2]*=c;b[6]*=d;b[10]*=a;b[3]*=c;b[7]*=d;b[11]*=a;return this},getMaxScaleOnAxis:function(){var a=this.elements;return Math.sqrt(Math.max(a[0]*a[0]+a[1]*a[1]+a[2]*a[2],Math.max(a[4]*a[4]+a[5]*a[5]+a[6]*a[6],a[8]*a[8]+a[9]*a[9]+a[10]*a[10])))},makeTranslation:function(a,b,c){this.set(1,0,0,a,0,1,0,b,0,
0,1,c,0,0,0,1);return this},makeRotationX:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(1,0,0,0,0,b,-a,0,0,a,b,0,0,0,0,1);return this},makeRotationY:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,0,a,0,0,1,0,0,-a,0,b,0,0,0,0,1);return this},makeRotationZ:function(a){var b=Math.cos(a);a=Math.sin(a);this.set(b,-a,0,0,a,b,0,0,0,0,1,0,0,0,0,1);return this},makeRotationAxis:function(a,b){var c=Math.cos(b),d=Math.sin(b),e=1-c,g=a.x,f=a.y,h=a.z,i=e*g,j=e*f;this.set(i*g+c,i*f-d*h,i*h+d*f,0,
i*f+d*h,j*f+c,j*h-d*g,0,i*h-d*f,j*h+d*g,e*h*h+c,0,0,0,0,1);return this},makeScale:function(a,b,c){this.set(a,0,0,0,0,b,0,0,0,0,c,0,0,0,0,1);return this},compose:function(a,b,c){this.makeRotationFromQuaternion(b);this.scale(c);this.setPosition(a);return this},decompose:function(){var a=new THREEMATHS.Vector3,b=new THREEMATHS.Matrix4;return function(c,d,e){var g=this.elements,f=a.set(g[0],g[1],g[2]).length(),h=a.set(g[4],g[5],g[6]).length(),i=a.set(g[8],g[9],g[10]).length();0>this.determinant()&&(f=
-f);c.x=g[12];c.y=g[13];c.z=g[14];b.elements.set(this.elements);c=1/f;var g=1/h,j=1/i;b.elements[0]*=c;b.elements[1]*=c;b.elements[2]*=c;b.elements[4]*=g;b.elements[5]*=g;b.elements[6]*=g;b.elements[8]*=j;b.elements[9]*=j;b.elements[10]*=j;d.setFromRotationMatrix(b);e.x=f;e.y=h;e.z=i;return this}}(),makeFrustum:function(a,b,c,d,e,g){var f=this.elements;f[0]=2*e/(b-a);f[4]=0;f[8]=(b+a)/(b-a);f[12]=0;f[1]=0;f[5]=2*e/(d-c);f[9]=(d+c)/(d-c);f[13]=0;f[2]=0;f[6]=0;f[10]=-(g+e)/(g-e);f[14]=-2*g*e/(g-e);
f[3]=0;f[7]=0;f[11]=-1;f[15]=0;return this},makePerspective:function(a,b,c,d){a=c*Math.tan(THREEMATHS.Math.degToRad(0.5*a));var e=-a;return this.makeFrustum(e*b,a*b,e,a,c,d)},makeOrthographic:function(a,b,c,d,e,g){var f=this.elements,h=b-a,i=c-d,j=g-e;f[0]=2/h;f[4]=0;f[8]=0;f[12]=-((b+a)/h);f[1]=0;f[5]=2/i;f[9]=0;f[13]=-((c+d)/i);f[2]=0;f[6]=0;f[10]=-2/j;f[14]=-((g+e)/j);f[3]=0;f[7]=0;f[11]=0;f[15]=1;return this},fromArray:function(a){this.elements.set(a);return this},toArray:function(){var a=this.elements;
return[a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],a[8],a[9],a[10],a[11],a[12],a[13],a[14],a[15]]},clone:function(){return(new THREEMATHS.Matrix4).fromArray(this.elements)}};
THREEMATHS.Math={generateUUID:function(){var a="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),b=Array(36),c=0,d;return function(){for(var e=0;36>e;e++)8==e||13==e||18==e||23==e?b[e]="-":14==e?b[e]="4":(2>=c&&(c=33554432+16777216*Math.random()|0),d=c&15,c>>=4,b[e]=a[19==e?d&3|8:d]);return b.join("")}}(),clamp:function(a,b,c){return a<b?b:a>c?c:a},clampBottom:function(a,b){return a<b?b:a},mapLinear:function(a,b,c,d,e){return d+(a-b)*(e-d)/(c-b)},smoothstep:function(a,b,c){if(a<=
b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*(3-2*a)},smootherstep:function(a,b,c){if(a<=b)return 0;if(a>=c)return 1;a=(a-b)/(c-b);return a*a*a*(a*(6*a-15)+10)},random16:function(){return(65280*Math.random()+255*Math.random())/65535},randInt:function(a,b){return Math.floor(this.randFloat(a,b))},randFloat:function(a,b){return a+Math.random()*(b-a)},randFloatSpread:function(a){return a*(0.5-Math.random())},degToRad:function(){var a=Math.PI/180;return function(b){return b*a}}(),radToDeg:function(){var a=
180/Math.PI;return function(b){return b*a}}(),isPowerOfTwo:function(a){return 0===(a&a-1)&&0!==a}};try{glm.exists&&alert("glm.common.js loaded over exist glm instance: "+glm)}catch(e$$18){}glm=null;GLMJS_PREFIX="glm-js: ";var GLMJSError=function(a,b){function c(c){this.name=a;Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack;this.message=c;b&&b.apply(this,arguments)}c.prototype=Error();c.prototype.name=a;return c.prototype.constructor=c}("GLMJSError");
$GLM_extern=function(a,b){b=b||a;return function(){GLM[b]=GLM.$outer.functions[a]||GLM.$outer[a];if(!GLM[b])throw new GLM.GLMJSError("$GLM_extern: unresolved external symbol: "+a);GLM.$DEBUG&&GLM.$outer.console.debug("$GLM_extern: resolved external symbol "+a+" "+typeof GLM[b]);return GLM[b].apply(this,arguments)}};
$GLM_reset_logging=function(a){if(a||"undefined"===typeof $GLM_log)$GLM_log=function(a,b){GLM.$outer.console.log.apply(GLM.$outer.console,[].slice.call(arguments).map(function(a){return GLM.$isGLMObject(a)||!isNaN(a)?GLM.to_string(a):a+""}))};if(a||"undefined"===typeof $GLM_console_log)$GLM_console_log=function(a,b){(console[a]||function(){}).apply(console,[].slice.call(arguments,1))};if(a||"undefined"===typeof $GLM_console_logger)$GLM_console_logger=function(a){return $GLM_console_log.bind($GLM_console_log,
a)};var b=$GLM_console_logger,c={};"debug,warn,info,error,log,write".replace(/\w+/g,function(a){c[a]=b(a)});"object"===typeof GLM&&GLM.$outer&&(GLM.$outer.console=c);return c};
GLM={$DEBUG:"undefined"!==typeof $GLM_DEBUG&&$GLM_DEBUG,version:"0.0.3",GLM_VERSION:96,$outer:{functions:{},intern:function(a,b){if(void 0===b&&"object"===typeof a)for(var c in a)GLM.$outer.intern(c,a[c]);else return GLM.$DEBUG&&GLM.$outer.console.debug("intern "+a,b&&(b.name||typeof b)),GLM.$outer[a]=b},$import:function(a){GLM.$outer.intern(a.statics);GLM.$template.extend(GLM,GLM.$template.functions(a.functions),GLM.$template.operations(a.operations),GLM.$template.calculators(a.calculators));GLM.$init(a)},
console:$GLM_reset_logging(),quat_array_from_xyz:function(a){var b=glm.quat();b["*="](glm.angleAxis(a.x,glm.vec3(1,0,0)));b["*="](glm.angleAxis(a.y,glm.vec3(0,1,0)));b["*="](glm.angleAxis(a.z,glm.vec3(0,0,1)));return b.elements},quat_array_from_zyx:function(a){var b=glm.quat();b["*="](glm.angleAxis(a.z,glm.vec3(0,0,1)));b["*="](glm.angleAxis(a.y,glm.vec3(0,1,0)));b["*="](glm.angleAxis(a.x,glm.vec3(1,0,0)));return b.elements},_vec3_eulerAngles:function(a){var b=this.mat4_array_from_quat(a);a=b[0];
var c=b[4],d=b[1],e=b[5],g=b[2],f=b[6],b=b[10],h=new glm.vec3;h.y=Math.asin(-glm._clamp(g,-1,1));0.99999>Math.abs(g)?(h.x=Math.atan2(f,b),h.z=Math.atan2(d,a)):(h.x=0,h.z=Math.atan2(-c,e));return h}},$extern:$GLM_extern,$log:$GLM_log,GLMJSError:GLMJSError,_radians:function(a){return a*Math.PI/180},_degrees:function(a){return 180*a/Math.PI},normalize:$GLM_extern("normalize"),inverse:$GLM_extern("inverse"),length:$GLM_extern("length"),length2:$GLM_extern("length2"),transpose:$GLM_extern("transpose"),
mix:$GLM_extern("mix"),clamp:$GLM_extern("clamp"),angleAxis:$GLM_extern("angleAxis"),rotate:$GLM_extern("rotate"),scale:$GLM_extern("scale"),translate:$GLM_extern("translate"),perspective:function(a,b,c,d){return GLM.$outer.mat4_perspective(a,b,c,d)},eulerAngles:function(a){return GLM.$outer.vec3_eulerAngles(a)},angle:function(a){return 2*Math.acos(a.w)},axis:function(a){var b=1-a.w*a.w;if(0>=b)return glm.vec3(0,0,1);b=1/Math.sqrt(b);return glm.vec3(a.x*b,a.y*b,a.z*b)},$from_ptr:function(a,b,c){if(this!==
GLM)throw new GLM.GLMJSError("... use glm.make_<type>() (not new glm.make<type>())");b=new Float32Array(b.buffer||b,c||0,a.componentLength);b=new Float32Array(b);return new a(b)},make_vec2:function(a,b){return GLM.$from_ptr.call(this,GLM.vec2,a,2===arguments.length?b:a.byteOffset)},make_vec3:function(a,b){return GLM.$from_ptr.call(this,GLM.vec3,a,2===arguments.length?b:a.byteOffset)},make_vec4:function(a,b){return GLM.$from_ptr.call(this,GLM.vec4,a,2===arguments.length?b:a.byteOffset)},make_quat:function(a,
b){return GLM.$from_ptr.call(this,GLM.quat,a,2===arguments.length?b:a.byteOffset)},make_mat3:function(a,b){return GLM.$from_ptr.call(this,GLM.mat3,a,2===arguments.length?b:a.byteOffset)},make_mat4:function(a,b){return GLM.$from_ptr.call(this,GLM.mat4,a,2===arguments.length?b:a.byteOffset)},diagonal4x4:function(a){if("vec4"!==a.$type)throw new GLM.GLMJSError("unsupported argtype to GLM.diagonal4x4: "+["type:"+type.o]);a=a.elements;return new GLM.mat4([a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,a[3]])},
toMat4:function(a){return new GLM.mat4(GLM.$outer.mat4_array_from_quat(a))},FAITHFUL:!0,to_string:function(a,b){try{var c=a.$type||typeof a;if(!GLM[c])throw new GLM.GLMJSError("unsupported argtype to GLM.to_string: "+["type:"+c,a]);return GLM.FAITHFUL?GLM.$to_string(a,b).replace(/[\t\n]/g,""):GLM.$to_string(a,b)}catch(d){return GLM.$DEBUG&&GLM.$outer.console.error("to_string error: ",c,a+"",d),d+""}},$sizeof:function(a){return a.BYTES_PER_ELEMENT},$types:[],$isGLMConstructor:function(a){return!!(a&&
a.prototype instanceof GLM.$GLMBaseType)},$getGLMType:function(a){return a instanceof GLM.$GLMBaseType&&a.constructor||"string"===typeof a&&GLM[a]},$isGLMObject:function(a){return a instanceof GLM.$GLMBaseType&&a.$type},$to_array:function(a){return[].slice.call(a.elements)},$to_json:function(a,b,c){this instanceof GLM.$GLMBaseType&&(c=b,b=a,a=this);return JSON.stringify(GLM.$to_object(a),b,c)},$inspect:function(a){this instanceof GLM.$GLMBaseType&&(a=this);return GLM.$to_json(a,null,2)},_clamp:function(a,
b,c){return a<b?b:a>c?c:a},max:function(a,b){return Math.max(a,b)},min:function(a,b){return Math.min(a,b)},_sign:function(a){return 0<a?1:0>a?-1:+a},epsilon:function(){return 1E-6},FIXEDPRECISION:6,$toFixedString:function(a,b,c,d){d=void 0===d?GLM.FIXEDPRECISION:d;if(!c||!c.map)throw Error("unsupported argtype to $toFixedString(..,..,props="+typeof c+")");try{var e="";c.map(function(a){a=b[e=a];if(!a.toFixed)throw Error("!toFixed in w");return a.toFixed(0)})}catch(g){throw GLM.$DEBUG&&GLM.$outer.console.error("$toFixedString error",
a,typeof b,Object.prototype.toString.call(b),e),GLM.$DEBUG&&glm.$log("$toFixedString error",a,typeof b,Object.prototype.toString.call(b),e),new GLM.GLMJSError(g);}c=c.map(function(a){return b[a].toFixed(d)});return a+"("+c.join(", ")+")"}};GLM.sign=Math.sign||GLM._sign;
GLM.$GLMBaseType=function(){function a(a,c){var d=a.$||{};this.$type=c;this.$type_name=d.name||"<"+c+">";d.components&&(this.$components=d.components[0]);this.$len=this.components=a.componentLength;this.constructor=a;this.byteLength=a.BYTES_PER_ELEMENT;GLM.$types.push(c)}a.prototype={clone:function(){return new this.constructor(new this.elements.constructor(this.elements))},toString:function(){return GLM.$to_string(this)},inspect:function(){return GLM.$inspect(this)},toJSON:function(){return GLM.$to_object(this)}};
Object.defineProperty(a.prototype,"address",{get:function(){var a=this.elements.byteOffset.toString(16);return"0x00000000".substr(0,10-a.length)+a}});return a}();GLM.$subarray=function(){function a(a,b,c){return a.subarray(b,c||a.length)}function b(a,b,c){c=c||a.length;return new Float32Array(a.buffer,a.byteOffset+b*Float32Array.BYTES_PER_ELEMENT,c-b)}var c=new Float32Array([0,0]);c.subarray(1).subarray(0)[0]=1;return 1!==c[1]?b:a}();
var GLM_template=GLM.$template={_genArgError:function(a,b,c,d){~d.indexOf(void 0)&&(d=d.slice(0,d.indexOf(void 0)));var e=RegExp.prototype.test.bind(/^[^$_]/);return new GLM.GLMJSError("unsupported argtype to "+b+""+a.$sig+": [typ="+c+"] :: got arg types: "+d.map(GLM.$template.jstypes.get)+" // supported types: "+Object.keys(a).filter(e).join("||"))},jstypes:{get:function(a){if(null===a)a="null";else if(void 0===a)a="undefined";else{var b;if(!(b=a.$type))if(!(b=GLM.$template.jstypes[typeof a]))if(!(b=
GLM.$template.jstypes[a+""]))a:{if("object"===typeof a){if(a instanceof Float32Array){b="Float32Array";break a}if(a instanceof ArrayBuffer){b="ArrayBuffer";break a}}b="<unknown "+[typeof a,a]+">"}a=b}return a},"0":"float",number:"float",string:"string","[object Float32Array]":"Float32Array","[object ArrayBuffer]":"ArrayBuffer","function":"function"},_add_overrides:function(a,b){for(var c in b)b[c]&&GLM[c].override(a,b[c])},_add_inline_override:function(a,b,c){this[b]=eval(GLM.$template._traceable("glm_"+
a+"_"+b,c))();return this},_inline_helpers:function(a,b){return{$type:"built-in",$type_name:b,$template:a,F:a,dbg:b,override:this._add_inline_override.bind(a,b),link:function(c){var d=a[c];d||(d=a[[c,"undefined"]]);if(!d)throw new GLM.GLMJSError("error linking direct function for "+b+"<"+c+"> or "+b+"<"+[c,void 0]+">");return/\bthis\./.test(d+"")?d.bind(a):d}}},"<T>":function(a,b){a.$sig="<T>";return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("Tglm_"+b,function(b){this instanceof
GLM.$GLMBaseType&&(b=this);var d=[b&&b.$type||GLM.$template.jstypes[typeof b]||"null"];if(!a[d])throw GLM.$template._genArgError(a,arguments.callee.dbg,d,[b]);return a[d](b)}))())},"<T,...>":function(a,b){a.$sig="<T,...>";var c=GLM.$template.jstypes;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("Tdotglm_"+b,function(b){for(var e=Array(arguments.length),g=0;g<e.length;g++)e[g]=arguments[g];this instanceof GLM.$GLMBaseType&&e.unshift(b=this);g=[b&&b.$type||c[typeof b]||c.get(b)||
"null"];if(!a[g])throw GLM.$template._genArgError(a,arguments.callee.dbg,g,e);return a[g].apply(a,e)}))())},"<T,V,n>":function(a,b){a.$sig="<T,V,n>";var c=GLM.$template.jstypes;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("TVnglm_"+b,function(){for(var b=Array(arguments.length),e=0;e<b.length;e++)b[e]=arguments[e];this instanceof GLM.$GLMBaseType&&b.unshift(this);var e=b[0],g=b[1],b=b[2],f=[e&&e.$type||c[typeof e]||c[e+""]||"<unknown "+e+">",g&&g.$type||c[typeof g]||c[g+""]||
"<unknown "+g+">"];if(!a[f])throw GLM.$template._genArgError(a,arguments.callee.dbg,f,[e,g,b]);if("number"!==typeof b)throw new GLM.GLMJSError(arguments.callee.dbg+a.$sig+": unsupported n type: "+[typeof b,b]);return a[f](e,g,b)}))())},"<T,V>":function(a,b){a.$sig="<T,V>";var c=GLM.$template.jstypes,d=GLM.$GLMBaseType,e=GLM.$template._genArgError;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("TVglm_"+b,function(){for(var b=Array(arguments.length),f=0;f<b.length;f++)b[f]=arguments[f];
this instanceof d&&b.unshift(this);var f=b[0],h=b[1],f=[f&&f.$type||c[typeof f],h&&h.$type||c[typeof h]||c[h+""]||Array.isArray(h)&&"array"+h.length+""||""+h+""];if(!a[f])throw e(a,arguments.callee.dbg,f,b);return a[f].apply(a,b)}))())},override:function(a,b,c,d){GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: ",a,b,c.$op?'$op: ["'+c.$op+'"]':"");if(!d)throw Error("unspecified target group "+d+' (expected override(<TV>, "p", {TSP}, ret={GROUP}))');var e=d[b];if(e&&e.$op!==c.$op)throw Error('glm.$template.override: mismatch merging existing override: .$op "'+
[e.$op,"!=",c.$op].join(" ")+'"  p='+[b,e.$op,c.$op,"||"+Object.keys(e.$template).join("||")]);var g=GLM.$template[a](GLM.$template.deNify(c,b),b);g.$op=c.$op;if(e){var f=[],h;for(h in g.$template)h in e.$template||(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+h+" overlayed"),e.$template[h]=g.$template[h]);Object.keys(e.$template).forEach(function(a){a in g.$template||(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+a+" carried-forward"),f.push(a))});
GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+Object.keys(d[b].$template).filter(function(a){return!~a.indexOf("$")}).map(function(a){return!~f.indexOf(a)?"*"+a+"*":a}).join(" | "))}else d[b]=g,GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+Object.keys(d[b].$template).filter(function(a){return!~a.indexOf("$")}).map(function(a){return"*"+a+"*"}).join(" | "));return d},_override:function(a,b,c){for(var d in b)this.override(a,d,b[d],c);return c},
slingshot:function(){return this.extend.apply(this,[].reverse.call(arguments))},extend:function(a,b){[].slice.call(arguments,1).forEach(function(b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])});return a},operations:function(a){return this._override("<T,V>",a,GLM.$outer.functions)},calculators:function(a){return this._override("<T>",a,GLM.$outer.functions)},varargs_functions:function(a){return this._override("<T,...>",a,GLM.$outer.functions)},functions:function(a){return this._override("<T,V,n>",
a,GLM.$outer.functions)},_tojsname:function(a){return(a||"_").replace(/[^$a-zA-Z0-9_]/g,"_")},_traceable:function(a,b){var c=b;if("function"!==typeof c)throw new GLM.GLMJSError("_traceable expects tidy function as first arg "+c);if(!a)throw new GLM.GLMJSError("_traceable expects hint or what's the point"+[c,a]);a=this._tojsname(a||"_traceable");c=(c+"").replace(/^(\s*var\s*(\w+)\s*=\s*)__VA_ARGS__;/mg,function(a,b,c){return b+"new Array(arguments.length);for(var I=0;I<varname.length;I++)varname[I]=arguments[I];".replace(/I/g,
"__VA_ARGS__I").replace(/varname/g,c)}).replace(/\barguments[.]callee\b/g,a);if(2===c.split(/^\s*function\b/).length)c=(function(){SRC;return HINT}+"").replace("HINT",a.replace(/[$]/g,"$$$$")).replace("SRC",c.replace(/[$]/g,"$$$$").replace(/^function\s*\(/,"function "+a+"("));else throw new GLM.GLMJSError("expected singular anonymous function: "+[c,a]);c="1,"+c;if(GLM.$DEBUG)try{eval(c)}catch(d){throw console.error(a,c,b,d),d;}return c},deNify:function(a,b){var c={vec:[2,3,4],mat:[3,4]},d=this._tojsname.bind(this),
e;for(e in a){var g=!1;e.replace(/([vV]ec|[mM]at)(?:\w*)<N>/,function(f,h){g=!0;var i=a[e];delete a[e];c[h.toLowerCase()].forEach(function(c){var f=e.replace(/<N[*]N>/g,c*c).replace(/<N>/g,c);if(!(f in a)){var g=d("glm_"+b+"_"+f);a[f]=(new Function("","'use strict'; return "+(i+"").replace(/^function\s*\(/,"function "+g+"(").replace(/N[*]N/g,c*c).replace(/N/g,c)))()}})}.bind(this));/^[$]/.test(e)?GLM.$DEBUG&&GLM.$outer.console.debug("@ NOT naming "+e):!g&&("function"===typeof a[e]&&!a[e].name)&&(GLM.$DEBUG&&
GLM.$outer.console.debug("naming "+d(b+"_"+e)),a[e]=eval(this._traceable("glm_"+b+"_"+e,a[e]))())}return a},$_module_stamp:+new Date,GLMType:function(a,b){var c=b.identity.length;Object.keys(b).filter(function(a){return"function"===typeof b[a]&&!b[a].name}).map(function(c){var d=a+"_"+c;GLM.$DEBUG&&GLM.$outer.console.debug("naming $."+c+" == "+d,this._traceable(d,b[c]));b[c]=eval(this._traceable("glm_"+d,b[c]))()}.bind(this));var d=eval(this._traceable("glm_"+a+"$class",function(a){for(var b=d.$,
c=d.prototype.$type,h=Array(arguments.length),i=0;i<h.length;i++)h[i]=arguments[i];var j=typeof a+h.length,i=b[j];if(!i)throw new GLM.GLMJSError("no template found for "+c+".$."+j);if(this instanceof d){if(a instanceof Float32Array){2<GLM.$DEBUG&&GLM.$outer.console.info("adopting elements...",typeof a);if(a.length!=d.componentLength)throw GLM.$outer.console.error(c+" elements size mismatch: "+["wanted:"+d.componentLength,"handed:"+a.length]),b=GLM.$subarray(a,0,d.componentLength),new GLM.GLMJSError(c+
" elements size mismatch: "+["wanted:"+d.componentLength,"handed:"+a.length,"theoreticaly-correctable?:"+(b.length===d.componentLength)]);c=a}else(c=new Float32Array(d.componentLength)).set(i.apply(b,h));Object.defineProperty(this,"elements",{enumerable:!1,configurable:!0,value:c})}else return new d(i.apply(b,h))}))();b.components=b.components?b.components.map(function(a){return"string"===typeof a?a.split(""):a}):[];d.$=b;d.componentLength=c;d.BYTES_PER_ELEMENT=c*Float32Array.BYTES_PER_ELEMENT;d.prototype=
new GLM.$GLMBaseType(d,a);return d}};
GLM.$template.functions({mix:{"float,float":function(a,b,c){return b*c+a*(1-c)},"vec<N>,vec<N>":function(a,b,c){if(void 0===c)throw Error("glm.mix<vecN,vecN>(v,n,rt) requires 3 arguments");a=glm.$to_array(a);b=glm.$to_array(b);var d=1-c;return new glm.vecN(a.map(function(a,g){return b[g]*c+a*d}))}},clamp:{"float,float":function(a,b,c){return GLM._clamp(a,b,c)},"vec<N>,float":function(a,b,c){return new GLM.vecN(GLM.$to_array(a).map(function(a){return GLM._clamp(a,b,c)}))}}});
GLM.$template.extend(GLM,GLM.$template.calculators({degrees:{"float":function(a){return GLM._degrees(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._degrees))}},radians:{"float":function(a){return GLM._radians(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._radians))}},$to_object:{vec2:function(a){return{x:a.x,y:a.y}},vec3:function(a){return{x:a.x,y:a.y,z:a.z}},vec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},uvec2:function(a){return{x:a.x,y:a.y}},uvec3:function(a){return{x:a.x,
y:a.y,z:a.z}},uvec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},quat:function(a){return{w:a.w,x:a.x,y:a.y,z:a.z}},mat3:function(a){return{"0":this.vec3(a[0]),1:this.vec3(a[1]),2:this.vec3(a[2])}},mat4:function(a){return{"0":this.vec4(a[0]),1:this.vec4(a[1]),2:this.vec4(a[2]),3:this.vec4(a[3])}}}}),GLM.$template.varargs_functions({$from_glsl:{string:function(a,b){var c;a.replace(/^([$\w]+)\(([-.0-9ef, ]+)\)$/,function(a,e,g){a=glm[e]||glm["$"+e];if(!a)throw new GLM.GLMJSError("glsl decoding issue: unknown type '"+
e+"'");c=g.split(",").map(parseFloat);if(b){for(;c.length<a.componentLength;)c.push(c[c.length-1]);return c}c=a.apply(glm,c)});return c}},$to_glsl:{"vec<N>":function(a){for(var b=GLM.$to_array(a);b.length&&b[b.length-2]===b[b.length-1];)b.pop();return a.$type+"("+b+")"},"uvec<N>":function(a){return this.vecN(a)},quat:function(a){return 0===a.x+a.y+a.z?"quat("+a.w+")":"quat("+GLM.$to_array(a)+")"},"mat<N>":function(a){a=GLM.$to_array(a);return a.reduce(function(a,c){return a+c},0)===a[0]*N?"matN("+
a[0]+")":"matN("+a+")"}}}));
GLM.$template.operations({rotate:{"float,vec3":function(a,b){return GLM.$outer.mat4_angleAxis(a,b)},"mat4,float":function(a,b,c){return a.mul(GLM.$outer.mat4_angleAxis(b,c))}},scale:{"mat4,vec3":function(a,b){return a.mul(GLM.$outer.mat4_scale(b))},"vec3,undefined":function(a){return GLM.$outer.mat4_scale(a)}},translate:{"mat4,vec3":function(a,b){return a.mul(GLM.$outer.mat4_translation(b))},"vec3,undefined":function(a){return GLM.$outer.mat4_translation(a)}},angleAxis:{"float,vec3":function(a,b){return GLM.$outer.quat_angleAxis(a,
b)},"float,float":function(a,b,c,d){return GLM.$outer.quat_angleAxis(a,glm.vec3(b,c,d))}}});
GLM.$to_string=GLM.$template.varargs_functions({$to_string:{"function":function(a){return"[function "+(a.name||"anonymous")+"]"},ArrayBuffer:function(a){return"[object ArrayBuffer "+JSON.stringify({byteLength:a.byteLength})+"]"},Float32Array:function(a){return"[object Float32Array "+JSON.stringify({length:a.length,byteOffset:a.byteOffset,byteLength:a.byteLength,BPE:a.BYTES_PER_ELEMENT})+"]"},"float":function(a,b){return GLM.$toFixedString("float",{value:a},["value"],b)},string:function(a){return a},
"vec<N>":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b)},"uvec<N>":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b||0)},"mat<N>":function(a,b){var c=[0,1,2,3].slice(0,N).map(function(b){return a[b]}).map(function(a){return GLM.$toFixedString("\t",a,a.$components,b)});return a.$type_name+"(\n"+c.join(", \n")+"\n)"},quat:function(a,b){a=GLM.degrees(GLM.eulerAngles(a));return GLM.$toFixedString("<quat>"+a.$type_name,a,["x","y","z"],b)}}}).$to_string;
GLM.$template.operations({copy:{$op:"=","vec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a},"vec<N>,array<N>":function(a,b){a.elements.set(b);return a},"uvec<N>,uvec<N>":function(a,b){a.elements.set(b.elements);return a},"uvec<N>,array<N>":function(a,b){a.elements.set(b);return a},"uvec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a},"vec<N>,uvec<N>":function(a,b){a.elements.set(b.elements);return a},"quat,quat":function(a,b){a.elements.set(b.elements);return a},"mat<N>,mat<N>":function(a,
b){a.elements.set(b.elements);return a},"mat<N>,array<N>":function(a,b){b=b.reduce(function(a,b){if(!a.concat)throw new GLM.GLMJSError("matN,arrayN -- [[.length===4] x 4] expected");return a.concat(b)});if(b===N)throw new GLM.GLMJSError("matN,arrayN -- [[N],[N],[N],[N]] expected");return a["="](b)},"mat<N>,array<N*N>":function(a,b){a.elements.set(b);return a},"mat4,array9":function(a,b){a.elements.set((new glm.mat4(b)).elements);return a}},sub:{$op:"-","vec<N>,vec<N>":function(a,b){return new glm.vecN(glm.$to_array(a).map(function(a,
d){return a-b[d]}))}},sub_eq:{$op:"-=","vec<N>,vec<N>":function(a,b){glm.$to_array(a).map(function(c,d){return a.elements[d]=c-b[d]});return a}},add:{$op:"+","vec<N>,vec<N>":function(a,b){return new glm.vecN(glm.$to_array(a).map(function(a,d){return a+b[d]}))}},add_eq:{$op:"+=","vec<N>,vec<N>":function(a,b){glm.$to_array(a).map(function(c,d){return a.elements[d]=c+b[d]});return a}},div:{$op:"/","vec<N>,float":function(a,b){return new glm.vecN(glm.$to_array(a).map(function(a){return a/b}))}},div_eq:{$op:"/=",
"vec<N>,float":function(a,b){for(var c=0;c<N;c++)a.elements[c]/=b;return a}},eql:{$op:"==",$eq:function(a,b){return b.elements.length===glm.$to_array(a).filter(function(a,d){return a===b.elements[d]}).length},"vec<N>,vec<N>":function(a,b){return this.$eq(a,b)},"mat<N>,mat<N>":function(a,b){return this.$eq(a,b)},"quat,quat":function(a,b){return this.$eq(a,b)},"uvec<N>,uvec<N>":function(a,b){return this.$eq(a,b)}}});GLM.string={$type_name:"string",$:{}};GLM.number={$type_name:"float",$:{}};
GLM.vec2=GLM.$template.GLMType("vec2",{name:"fvec2",identity:[0,0],components:["xy","01"],undefined0:function(){return this.identity},number1:function(a){return[a,a]},number2:function(a,b){return[a,b]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]];default:if("y"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.vec2: "+a);return[a.x,a.y]}}throw new GLM.GLMJSError("unrecognized object passed to GLM.vec2: "+a);}});
GLM.uvec2=GLM.$template.GLMType("uvec2",{name:"uvec2",identity:[0,0],components:["xy","01"],_clamp:function(a){return~~glm._clamp(a,0,Infinity)},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]].map(this._clamp);default:if("y"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.uvec2: "+
a);return[a.x,a.y].map(this._clamp)}}throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec2: "+a);}});
GLM.vec3=GLM.$template.GLMType("vec3",{name:"fvec3",identity:[0,0,0],components:["xyz","012","rgb"],undefined0:function(){return GLM.vec3.$.identity},number1:function(a){return[a,a,a]},number2:function(a,b){return[a,b,b]},number3:function(a,b,c){return[a,b,c]},object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]];case 2:return[a[0],a[1],a[1]];default:if("z"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.vec3: "+
a);return[a.x,a.y,a.z]}}throw new GLM.GLMJSError("unrecognized object passed to GLM.vec3: "+a);},object2:function(a,b){if(a instanceof GLM.vec2||a instanceof GLM.uvec2)return[a.x,a.y,b];throw new GLM.GLMJSError("unrecognized object passed to GLM.vec3(o,z): "+[a,b]);}});
GLM.uvec3=GLM.$template.GLMType("uvec3",{name:"uvec3",identity:[0,0,0],components:["xyz","012"],_clamp:function(a){return~~glm._clamp(a,0,Infinity)},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c]},object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]].map(this._clamp);
case 2:return[a[0],a[1],a[1]].map(this._clamp);default:if("z"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.uvec3: "+a);return[a.x,a.y,a.z].map(this._clamp)}}throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec3: "+a);},object2:function(a,b){if(a instanceof GLM.vec2)return[a.x,a.y,b].map(this._clamp);if(a instanceof GLM.uvec2)return[a.x,a.y,this._clamp(b)];throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec3(o,z): "+
[a,b]);}});
GLM.vec4=GLM.$template.GLMType("vec4",{name:"fvec4",identity:[0,0,0,0],components:["xyzw","0123","rgba"],undefined0:function(){return this.identity},number1:function(a){return[a,a,a,a]},number2:function(a,b){return[a,b,b,b]},number3:function(a,b,c){return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d]},object1:function(a){if(a)switch(a.length){case 4:return[a[0],a[1],a[2],a[3]];case 3:return[a[0],a[1],a[2],a[2]];case 2:return[a[0],a[1],a[1],a[1]];default:if("w"in a&&"x"in a){if(typeof a.x!==typeof a.w)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.vec4: "+
a);return[a.x,a.y,a.z,a.w]}}throw new GLM.GLMJSError("unrecognized object passed to GLM.vec4: "+[a,a&&a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3||a instanceof GLM.uvec3)return[a.x,a.y,a.z,b];throw new GLM.GLMJSError("unrecognized object passed to GLM.vec4(o,w): "+[a,b]);},object3:function(a,b,c){if(a instanceof GLM.vec2||a instanceof GLM.uvec2)return[a.x,a.y,b,c];throw new GLM.GLMJSError("unrecognized object passed to GLM.vec4(o,z,w): "+[a,b,c]);}});
GLM.uvec4=GLM.$template.GLMType("uvec4",{name:"uvec4",identity:[0,0,0,0],components:["xyzw","0123"],_clamp:function(a){return~~glm._clamp(a,0,Infinity)},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d].map(this._clamp)},object1:function(a){if(a)switch(a.length){case 4:return[a[0],
a[1],a[2],a[3]].map(this._clamp);case 3:return[a[0],a[1],a[2],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1],a[1]].map(this._clamp);default:if("w"in a&&"x"in a)return[a.x,a.y,a.z,a.w].map(this._clamp)}throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec4: "+[a,a&&a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,b].map(this._clamp);if(a instanceof GLM.uvec3)return[a.x,a.y,a.z,this._clamp(b)];throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec4(o,w): "+
[a,b]);},object3:function(a,b,c){if(a instanceof GLM.vec2)return[a.x,a.y,b,c].map(this._clamp);if(a instanceof GLM.uvec2)return[a.x,a.y,this._clamp(b),this._clamp(c)];throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec4(o,z,w): "+[a,b,c]);}});
GLM.mat3=GLM.$template.GLMType("mat3",{name:"mat3x3",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,a,0,0,0,a]},number9:function(){return arguments},object1:function(a){if(a){var b=a.elements||a;if(16===b.length)return[b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]];if(9===b.length)return b}throw new GLM.GLMJSError("unrecognized object passed to GLM.mat3: "+a);},object3:function(a,b,c){return[a,b,c].map(glm.$to_array).reduce(function(a,
b){return a.concat(b)})}});
GLM.mat4=GLM.$template.GLMType("mat4",{name:"mat4x4",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number16:function(){return arguments},number1:function(a){return 1===a?this.identity:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]},object1:function(a){var b;if(a){b=a.elements||a;if(9===b.length)return[b[0],b[1],b[2],0,b[3],b[4],b[5],0,b[6],b[7],b[8],0,0,0,0,1];if(4===b.length&&b[0]&&4===b[0].length)return b[0].concat(b[1],b[2],b[3]);if(16===b.length)return b}throw new GLM.GLMJSError("unrecognized object passed to GLM.mat4: "+[a,
b&&b.length]);},object4:function(a,b,c,d){return[a,b,c,d].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});
GLM.quat=GLM.$template.GLMType("quat",{identity:[0,0,0,1],components:["xyzw","0123"],undefined0:function(){return this.identity},number1:function(a){if(1!==a)throw Error("only quat(1) syntax supported for quat(number1 args)...");return this.identity},number4:function(a,b,c,d){return[b,c,d,a]},object1:function(a){if(a){if(a instanceof GLM.mat4)return GLM.$outer.quat_array_from_mat4(a);if(4===a.length)return[a[0],a[1],a[2],a[3]];if(a instanceof GLM.quat)return[a.x,a.y,a.z,a.w];if(a instanceof GLM.vec3)return GLM.$outer.quat_array_from_zyx(a);
if("w"in a&&"x"in a)return[a.x,a.y,a.z,a.w]}throw new GLM.GLMJSError("unrecognized object passed to GLM.quat.object1: "+[a,a&&a.$type,typeof a,a&&a.constructor]);}});
(function(){var a=function(a,c,d,e){a.$properties=a.$properties||{def:function(c,d){this[c]=d;Object.defineProperty(a.prototype,c,d)}};var g=a.$properties,f=g.def.bind(g),h=[0,1,2,3].map(function(a){return{enumerable:d,get:function(){return this.elements[a]},set:function(b){this.elements[a]=b}}});c.forEach(function(a,b){f(a,h[b])});if(isNaN(c[0])&&!/^_/.test(c[0])){var i=c.slice();do(function(a,b,c){"quat"===b&&(b="vec"+c);f(a,{enumerable:!1,get:function(){return new GLM[b](GLM.$subarray(this.elements,
0*c,1*c))},set:function(a){return(new GLM[b](GLM.$subarray(this.elements,0*c,1*c)))["="](a)}})})(i.join(""),a.prototype.$type.replace(/[1-9]$/,i.length),i.length);while(i[1]!=i.pop());if(e)return g;i=c.slice();if(c={xyz:{yz:1},xyzw:{yzw:1,yz:1,zw:2}}[i.join("")])for(var j in c)(function(a,b,c,d){f(a,{enumerable:!1,get:function(){return new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d))},set:function(a){return(new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d)))["="](a)}})})(j,a.prototype.$type.replace(/[1-9]$/,
j.length),j.length,c[j])}return g};a(GLM.vec2,GLM.vec2.$.components[0],!0);a(GLM.vec2,GLM.vec2.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[0],!0);a(GLM.vec3,GLM.vec3.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[2]);a(GLM.vec4,GLM.vec4.$.components[0],!0);a(GLM.vec4,GLM.vec4.$.components[1]);a(GLM.vec4,GLM.vec4.$.components[2]);a(GLM.quat,GLM.quat.$.components[0],!0,"noswizzles");a(GLM.quat,GLM.quat.$.components[1]);GLM.quat.$properties.def("wxyz",{enumerable:!1,get:function(){return new GLM.vec4(this.w,
this.x,this.y,this.z)},set:function(a){a=GLM.vec4(a);return this["="](GLM.quat(a.x,a.y,a.z,a.w))}});a(GLM.uvec2,GLM.uvec2.$.components[0],!0);a(GLM.uvec2,GLM.uvec2.$.components[1]);a(GLM.uvec3,GLM.uvec3.$.components[0],!0);a(GLM.uvec3,GLM.uvec3.$.components[1]);a(GLM.uvec4,GLM.uvec4.$.components[0],!0);a(GLM.uvec4,GLM.uvec4.$.components[1]);Object.defineProperty(GLM.quat.prototype,"_x",{get:function(){throw Error("erroneous quat._x access");}});GLM.$partition=function(a,c,d,e){if(void 0===d)throw new GLM.GLMJSError("nrows is undefined");
var g=c.$.identity.length;d=d||g;for(var f=function(a){GLM.$DEBUG&&GLM.$outer.console.debug("CACHEDBG: "+a)},h=0;h<d;h++)(function(d){var h=e&&e+d,k=d*g;Object.defineProperty(a,d,{configurable:!0,enumerable:!0,set:function(e){if(e instanceof c)this.elements.set(e.elements,k);else if(e&&e.length===g)this.elements.set(e,k);else throw new GLM.GLMJSError("unsupported argtype to "+(a&&a.$type)+"["+d+"] setter: "+[typeof e,e]);},get:function(){if(e){if(this[h])return d||f("cache hit "+h),this[h];d||f("cache miss "+
h)}var a,b=new c(a=GLM.$subarray(this.elements,k,k+g));if(b.elements!==a)throw new GLM.GLMJSError("v.elements !== t");e&&Object.defineProperty(this,h,{configurable:!0,enumerable:!1,value:b});return b}})})(h)};GLM.$partition(GLM.mat4.prototype,GLM.vec4,4,"_cache_");GLM.$partition(GLM.mat3.prototype,GLM.vec3,3,"_cache_")})();
GLM.$dumpTypes=function(a){GLM.$types.forEach(function(b){GLM[b].componentLength&&a("GLM."+b,JSON.stringify({"#type":GLM[b].prototype.$type_name,"#floats":GLM[b].componentLength,"#bytes":GLM[b].BYTES_PER_ELEMENT}))})};
GLM.$init=function(a){a.prefix&&(GLMJS_PREFIX=a.prefix);var b=a.log||function(){};try{b("GLM-js: ENV: "+_ENV._VERSION)}catch(c){}b("GLM-JS: initializing: "+JSON.stringify(a,0,2));b(JSON.stringify({functions:Object.keys(GLM.$outer.functions)}));GLM.$outer.vec3_eulerAngles=GLM.$outer.vec3_eulerAngles||GLM.$outer._vec3_eulerAngles;GLM.$symbols=[];for(var d in GLM)"function"===typeof GLM[d]&&/^[a-z]/.test(d)&&GLM.$symbols.push(d);GLM.$types.forEach(function(a){var b=GLM[a].prototype.$type,c;for(c in GLM.$outer.functions){var d=
GLM.$outer.functions[c];d.$op&&(GLM.$DEBUG&&GLM.$outer.console.debug("mapping operator<"+b+"> "+c+" / "+d.$op),GLM[a].prototype[c]=d,GLM[a].prototype[d.$op]=d)}});b("GLM-JS: "+GLM.version+" emulating GLM_VERSION="+GLM.GLM_VERSION+" vendor_name="+a.vendor_name+" vendor_version="+a.vendor_version);glm.vendor=a};
GLM.using_namespace=function(a){GLM.$DEBUG&&GLM.$outer.console.debug("GLM.using_namespace munges globals; it should probably not be used!");var b=GLM.$symbols,c=[],d=[],e=GLM.using_namespace.before=[],g=GLM.using_namespace.after=[];eval(b.map(function(a,b){return"GLM.using_namespace['"+a+"'] = GLM.using_namespace.before["+b+"] = 'undefined' !== typeof "+a+";"}).join("\n"));GLM.$DEBUG&&console.warn("GLM.using_namespace before #globals: "+e.length);b.map(function(a){var b="GLM.using_namespace['"+a+
"']=undefined;delete GLM.using_namespace['"+a+"'];";try{d.push(a+"=GLM.using_namespace['"+a+"'];"+b)}catch(e){d.push(a+"=undefined;delete "+a+";"+b)}c.push(a+"=GLM."+a+";")});eval(c.join("\n"));a=a();eval(d.join("\n"));eval(b.map(function(a,b){return"GLM.using_namespace.after["+b+"] = 'undefined' !== typeof "+a+";"}).join("\n"));GLM.$DEBUG&&console.warn("GLM.using_namespace after #globals: "+g.length);if(e.length!==g.length)throw Error(JSON.stringify({before:e,after:g,usn:Object.keys(GLM.using_namespace)}));
return a};try{module.exports=GLM}catch(e$$25){}if("undefined"===typeof THREE)throw Error("this adapter requires THREE to be availed...");THREE.exists;glm=GLM;var DLL={vendor_name:"three.js",vendor_version:THREE.REVISION,_name:"glm.three.js",_version:"0.0.1",prefix:"glm-js[three]: "};
DLL.statics={$mat4:new THREE.Matrix4,mat4_perspective:function(a,b,c,d){a=glm.degrees(a);return new glm.mat4(new Float32Array(this.$mat4.makePerspective(a,b,c,d).elements))},mat4_angleAxis:function(a,b){return new glm.mat4(this.$mat4.makeRotationAxis(b,a))},quat_angleAxis:function(a,b){return new glm.quat(this.$quat.setFromAxisAngle(glm.normalize(b),a))},mat4_translation:function(a){return new glm.mat4(this.$mat4.makeTranslation(a.x,a.y,a.z))},mat4_scale:function(a){return new glm.mat4(this.$mat4.makeScale(a.x,
a.y,a.z))},$euler:new THREE.Euler,vec3_eulerAngles:function(a){return new glm.vec3(this.$euler.setFromQuaternion(a,"ZYX"))},mat4_array_from_quat:function(a){return this.$mat4.makeRotationFromQuaternion(a).toArray()},$quat:new THREE.Quaternion,quat_array_from_mat4:function(a){return this.$quat.setFromRotationMatrix(a).toArray()}};
DLL.operations={mul:{$op:"*","$vec<N>":"new THREE.VectorN()",$quat:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),$quat2:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),"quat,quat":function(a,b){a=this.$quat(a.elements);b=this.$quat2(b.elements);return new glm.quat(a.multiply(b))},"quat,vec3":function(a,b){return this.$vec3.applyQuaternion.call(b.clone(),this.$quat(a.elements))},"vec4,quat":function(a,b){return this.$vec4.applyMatrix4.call(a.clone(),glm.toMat4(b))},
"vec3,quat":function(a,b){return this["quat,vec3"](b,a)},"$vec<N>_multiplyScalar":"THREE.VectorN.prototype.multiplyScalar","vec<N>,float":function(a,b){return this.$vecN_multiplyScalar.call(a.clone(),b)},"mat4,vec4":function(a,b){return this.$vec4.applyMatrix4.call(b.clone(),a)},$mat4_multiplyMatrices:THREE.Matrix4.prototype.multiplyMatrices,"mat<N>,mat<N>":function(a,b){a=new glm.mat4(a);b=new glm.mat4(b);return new glm.matN(this.$mat4_multiplyMatrices.call(a,a,b))}},mul_eq:{$op:"*=","$vec<N>_multiplyScalar":"THREE.VectorN.prototype.multiplyScalar",
"vec<N>,float":function(a,b){return this.$vecN_multiplyScalar.call(a,b)},$mat4_multiplyMatrices:THREE.Matrix4.prototype.multiplyMatrices,"mat4,mat4":function(a,b){return this.$mat4_multiplyMatrices.call(a,a,b)},$mat4_copy_multiplyMatrices:THREE.Matrix4.prototype.multiplyMatrices.bind(new THREE.Matrix4),"mat3,mat3":function(a,b){return a.copy(new glm.mat3(this.$mat4_copy_multiplyMatrices(new glm.mat4(a),new glm.mat4(b))))},$quat:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),$quat2:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),
"quat,quat":function(a,b){var c=this.$quat(a.elements);b=this.$quat2(b.elements);c.multiply(b);a.elements.set(c.toArray());return a}}};DLL.functions={mix:{$quat:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),$quat2:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),"quat,quat":function(a,b,c){return new glm.quat(this.$quat(a.elements).slerp(this.$quat2(b.elements),c))}}};
DLL.calculators={normalize:{"$vec<N>":"new THREE.VectorN()","vec<N>":function(a){return new glm.vecN(this.$vecN.copy(a).normalize())},$quat:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),quat:function(a){return new glm.quat(this.$quat(a.elements).normalize())}},length2:{"$vec<N>":"new THREE.VectorN()","vec<N>":function(a){return this.$vecN.lengthSq.call(a)},$quat:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),quat:function(a){return this.$quat(a.elements).lengthSq()}},
length:{"$vec<N>":"new THREE.VectorN()","vec<N>":function(a){return this.$vecN.length.call(a)},$quat:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),quat:function(a){return this.$quat(a.elements).length()}},inverse:{$quat:THREE.Quaternion.prototype.fromArray.bind(new THREE.Quaternion),$mat4:new THREE.Matrix4,quat:function(a){return new glm.quat(this.$quat(a.elements).inverse())},slowmat4:function(a){return new glm.mat4(this.$mat4.getInverse(a))},_pm:{multiplyScalar:function(a){for(var b=
0;16>b;b++)this.elements[b]*=a}},mat4:function(a){a=a.clone();this._pm.elements=a.elements;this.$mat4.getInverse.call(this._pm,a);return a}},transpose:{$mat4_transpose:THREE.Matrix4.prototype.transpose,mat4:function(a){return this.$mat4_transpose.call(a.clone())}}};glm.$outer.$import(DLL);
glm.$THREE=function(){function a(a,b){var e=a._key=Object.keys(a),g=a._ref=a._key.map(function(a){return b[a]});return a.byObject=function(a){var b=g.indexOf(a.constructor);if(!~b)throw new GLM.GLMJSError("unsupported argtype for remapping (index not found): "+a);b=this[e[b]];if(!b)throw new GLM.GLMJSError("unsupported argtype for remapping (key not found): "+a);return b.apply(this,arguments)}.bind(a)}var b={g2t:GLM.$template.deNify({"vec<N>":function(a){var b=new THREE.VectorN;return b.set.apply(b,
glm.$to_array(a))},"mat<N>":function(a){return(new THREE.MatrixN).copy(a)},quat:function(a){var b=new THREE.Quaternion;return b.set.apply(b,glm.$to_array(a))}}),t2g:GLM.$template.deNify({"Vector<N>":function(a){return new glm.vecN(a)},"Matrix<N>":function(a){return new glm.matN(a)},Quaternion:function(a){return new glm.quat(a._w,a._x,a._y,a._z)},Euler:function(a){return new glm.vec3(a)}})};return{$map:b,to_glm:a(b.t2g,THREE),from_glm:a(b.g2t,glm)}}();try{module.exports=glm}catch(e$$26){};
