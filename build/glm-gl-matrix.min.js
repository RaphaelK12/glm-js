var GLMAT={};GLMAT_VERSION="2.2.2";
(function(b){b.VERSION=GLMAT_VERSION;if(!d)var d=1E-6;if(!e)var e="undefined"!==typeof Float32Array?Float32Array:Array;if(!h)var h=Math.random;var f={setMatrixArrayType:function(a){e=a}};"undefined"!==typeof b&&(b.glMatrix=f);var k=Math.PI/180;f.toRadian=function(a){return a*k};f={create:function(){var a=new e(2);a[0]=0;a[1]=0;return a},clone:function(a){var c=new e(2);c[0]=a[0];c[1]=a[1];return c},fromValues:function(a,c){var g=new e(2);g[0]=a;g[1]=c;return g},copy:function(a,c){a[0]=c[0];a[1]=c[1];
return a},set:function(a,c,g){a[0]=c;a[1]=g;return a},add:function(a,c,g){a[0]=c[0]+g[0];a[1]=c[1]+g[1];return a},subtract:function(a,c,g){a[0]=c[0]-g[0];a[1]=c[1]-g[1];return a}};f.sub=f.subtract;f.multiply=function(a,c,g){a[0]=c[0]*g[0];a[1]=c[1]*g[1];return a};f.mul=f.multiply;f.divide=function(a,c,g){a[0]=c[0]/g[0];a[1]=c[1]/g[1];return a};f.div=f.divide;f.min=function(a,c,g){a[0]=Math.min(c[0],g[0]);a[1]=Math.min(c[1],g[1]);return a};f.max=function(a,c,g){a[0]=Math.max(c[0],g[0]);a[1]=Math.max(c[1],
g[1]);return a};f.scale=function(a,c,g){a[0]=c[0]*g;a[1]=c[1]*g;return a};f.scaleAndAdd=function(a,c,g,b){a[0]=c[0]+g[0]*b;a[1]=c[1]+g[1]*b;return a};f.distance=function(a,c){var g=c[0]-a[0],b=c[1]-a[1];return Math.sqrt(g*g+b*b)};f.dist=f.distance;f.squaredDistance=function(a,c){var g=c[0]-a[0],b=c[1]-a[1];return g*g+b*b};f.sqrDist=f.squaredDistance;f.length=function(a){var c=a[0];a=a[1];return Math.sqrt(c*c+a*a)};f.len=f.length;f.squaredLength=function(a){var c=a[0];a=a[1];return c*c+a*a};f.sqrLen=
f.squaredLength;f.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];return a};f.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];return a};f.normalize=function(a,c){var g=c[0],b=c[1],g=g*g+b*b;0<g&&(g=1/Math.sqrt(g),a[0]=c[0]*g,a[1]=c[1]*g);return a};f.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]};f.cross=function(a,c,g){c=c[0]*g[1]-c[1]*g[0];a[0]=a[1]=0;a[2]=c;return a};f.lerp=function(a,c,g,b){var d=c[0];c=c[1];a[0]=d+b*(g[0]-d);a[1]=c+b*(g[1]-c);return a};f.random=function(a,c){c=c||1;var g=2*h()*Math.PI;
a[0]=Math.cos(g)*c;a[1]=Math.sin(g)*c;return a};f.transformMat2=function(a,c,g){var b=c[0];c=c[1];a[0]=g[0]*b+g[2]*c;a[1]=g[1]*b+g[3]*c;return a};f.transformMat2d=function(a,c,g){var b=c[0];c=c[1];a[0]=g[0]*b+g[2]*c+g[4];a[1]=g[1]*b+g[3]*c+g[5];return a};f.transformMat3=function(a,c,g){var b=c[0];c=c[1];a[0]=g[0]*b+g[3]*c+g[6];a[1]=g[1]*b+g[4]*c+g[7];return a};f.transformMat4=function(a,c,g){var b=c[0];c=c[1];a[0]=g[0]*b+g[4]*c+g[12];a[1]=g[1]*b+g[5]*c+g[13];return a};var l=f.create();f.forEach=function(a,
c,g,b,d,i){c||(c=2);g||(g=0);for(b=b?Math.min(b*c+g,a.length):a.length;g<b;g+=c)l[0]=a[g],l[1]=a[g+1],d(l,l,i),a[g]=l[0],a[g+1]=l[1];return a};f.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!==typeof b&&(b.vec2=f);var j={create:function(){var a=new e(3);a[0]=0;a[1]=0;a[2]=0;return a},clone:function(a){var c=new e(3);c[0]=a[0];c[1]=a[1];c[2]=a[2];return c},fromValues:function(a,c,g){var b=new e(3);b[0]=a;b[1]=c;b[2]=g;return b},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];return a},
set:function(a,c,g,b){a[0]=c;a[1]=g;a[2]=b;return a},add:function(a,c,g){a[0]=c[0]+g[0];a[1]=c[1]+g[1];a[2]=c[2]+g[2];return a},subtract:function(a,c,g){a[0]=c[0]-g[0];a[1]=c[1]-g[1];a[2]=c[2]-g[2];return a}};j.sub=j.subtract;j.multiply=function(a,c,g){a[0]=c[0]*g[0];a[1]=c[1]*g[1];a[2]=c[2]*g[2];return a};j.mul=j.multiply;j.divide=function(a,c,g){a[0]=c[0]/g[0];a[1]=c[1]/g[1];a[2]=c[2]/g[2];return a};j.div=j.divide;j.min=function(a,c,g){a[0]=Math.min(c[0],g[0]);a[1]=Math.min(c[1],g[1]);a[2]=Math.min(c[2],
g[2]);return a};j.max=function(a,c,g){a[0]=Math.max(c[0],g[0]);a[1]=Math.max(c[1],g[1]);a[2]=Math.max(c[2],g[2]);return a};j.scale=function(a,c,g){a[0]=c[0]*g;a[1]=c[1]*g;a[2]=c[2]*g;return a};j.scaleAndAdd=function(a,c,g,b){a[0]=c[0]+g[0]*b;a[1]=c[1]+g[1]*b;a[2]=c[2]+g[2]*b;return a};j.distance=function(a,c){var g=c[0]-a[0],b=c[1]-a[1],d=c[2]-a[2];return Math.sqrt(g*g+b*b+d*d)};j.dist=j.distance;j.squaredDistance=function(a,c){var g=c[0]-a[0],b=c[1]-a[1],d=c[2]-a[2];return g*g+b*b+d*d};j.sqrDist=
j.squaredDistance;j.length=function(a){var c=a[0],g=a[1];a=a[2];return Math.sqrt(c*c+g*g+a*a)};j.len=j.length;j.squaredLength=function(a){var c=a[0],g=a[1];a=a[2];return c*c+g*g+a*a};j.sqrLen=j.squaredLength;j.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];return a};j.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];return a};j.normalize=function(a,c){var g=c[0],b=c[1],d=c[2],g=g*g+b*b+d*d;0<g&&(g=1/Math.sqrt(g),a[0]=c[0]*g,a[1]=c[1]*g,a[2]=c[2]*g);return a};j.dot=function(a,c){return a[0]*
c[0]+a[1]*c[1]+a[2]*c[2]};j.cross=function(a,c,g){var b=c[0],d=c[1];c=c[2];var i=g[0],s=g[1];g=g[2];a[0]=d*g-c*s;a[1]=c*i-b*g;a[2]=b*s-d*i;return a};j.lerp=function(a,c,g,b){var d=c[0],i=c[1];c=c[2];a[0]=d+b*(g[0]-d);a[1]=i+b*(g[1]-i);a[2]=c+b*(g[2]-c);return a};j.random=function(a,c){c=c||1;var g=2*h()*Math.PI,b=2*h()-1,d=Math.sqrt(1-b*b)*c;a[0]=Math.cos(g)*d;a[1]=Math.sin(g)*d;a[2]=b*c;return a};j.transformMat4=function(a,c,g){var b=c[0],d=c[1];c=c[2];var i=g[3]*b+g[7]*d+g[11]*c+g[15],i=i||1;a[0]=
(g[0]*b+g[4]*d+g[8]*c+g[12])/i;a[1]=(g[1]*b+g[5]*d+g[9]*c+g[13])/i;a[2]=(g[2]*b+g[6]*d+g[10]*c+g[14])/i;return a};j.transformMat3=function(a,c,g){var b=c[0],d=c[1];c=c[2];a[0]=b*g[0]+d*g[3]+c*g[6];a[1]=b*g[1]+d*g[4]+c*g[7];a[2]=b*g[2]+d*g[5]+c*g[8];return a};j.transformQuat=function(a,c,g){var b=c[0],d=c[1],i=c[2];c=g[0];var s=g[1],f=g[2];g=g[3];var e=g*b+s*i-f*d,h=g*d+f*b-c*i,t=g*i+c*d-s*b,b=-c*b-s*d-f*i;a[0]=e*g+b*-c+h*-f-t*-s;a[1]=h*g+b*-s+t*-c-e*-f;a[2]=t*g+b*-f+e*-s-h*-c;return a};j.rotateX=
function(a,c,g,b){var d=[],i=[];d[0]=c[0]-g[0];d[1]=c[1]-g[1];d[2]=c[2]-g[2];i[0]=d[0];i[1]=d[1]*Math.cos(b)-d[2]*Math.sin(b);i[2]=d[1]*Math.sin(b)+d[2]*Math.cos(b);a[0]=i[0]+g[0];a[1]=i[1]+g[1];a[2]=i[2]+g[2];return a};j.rotateY=function(a,c,g,b){var d=[],i=[];d[0]=c[0]-g[0];d[1]=c[1]-g[1];d[2]=c[2]-g[2];i[0]=d[2]*Math.sin(b)+d[0]*Math.cos(b);i[1]=d[1];i[2]=d[2]*Math.cos(b)-d[0]*Math.sin(b);a[0]=i[0]+g[0];a[1]=i[1]+g[1];a[2]=i[2]+g[2];return a};j.rotateZ=function(a,c,g,b){var d=[],i=[];d[0]=c[0]-
g[0];d[1]=c[1]-g[1];d[2]=c[2]-g[2];i[0]=d[0]*Math.cos(b)-d[1]*Math.sin(b);i[1]=d[0]*Math.sin(b)+d[1]*Math.cos(b);i[2]=d[2];a[0]=i[0]+g[0];a[1]=i[1]+g[1];a[2]=i[2]+g[2];return a};var r=j.create();j.forEach=function(a,c,g,b,d,i){c||(c=3);g||(g=0);for(b=b?Math.min(b*c+g,a.length):a.length;g<b;g+=c)r[0]=a[g],r[1]=a[g+1],r[2]=a[g+2],d(r,r,i),a[g]=r[0],a[g+1]=r[1],a[g+2]=r[2];return a};j.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!==typeof b&&(b.vec3=j);var m={create:function(){var a=
new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var c=new e(4);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},fromValues:function(a,c,g,b){var d=new e(4);d[0]=a;d[1]=c;d[2]=g;d[3]=b;return d},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a},set:function(a,c,g,b,d){a[0]=c;a[1]=g;a[2]=b;a[3]=d;return a},add:function(a,c,g){a[0]=c[0]+g[0];a[1]=c[1]+g[1];a[2]=c[2]+g[2];a[3]=c[3]+g[3];return a},subtract:function(a,c,g){a[0]=c[0]-g[0];a[1]=c[1]-g[1];a[2]=c[2]-g[2];
a[3]=c[3]-g[3];return a}};m.sub=m.subtract;m.multiply=function(a,c,g){a[0]=c[0]*g[0];a[1]=c[1]*g[1];a[2]=c[2]*g[2];a[3]=c[3]*g[3];return a};m.mul=m.multiply;m.divide=function(a,c,g){a[0]=c[0]/g[0];a[1]=c[1]/g[1];a[2]=c[2]/g[2];a[3]=c[3]/g[3];return a};m.div=m.divide;m.min=function(a,c,g){a[0]=Math.min(c[0],g[0]);a[1]=Math.min(c[1],g[1]);a[2]=Math.min(c[2],g[2]);a[3]=Math.min(c[3],g[3]);return a};m.max=function(a,c,g){a[0]=Math.max(c[0],g[0]);a[1]=Math.max(c[1],g[1]);a[2]=Math.max(c[2],g[2]);a[3]=
Math.max(c[3],g[3]);return a};m.scale=function(a,c,g){a[0]=c[0]*g;a[1]=c[1]*g;a[2]=c[2]*g;a[3]=c[3]*g;return a};m.scaleAndAdd=function(a,c,g,b){a[0]=c[0]+g[0]*b;a[1]=c[1]+g[1]*b;a[2]=c[2]+g[2]*b;a[3]=c[3]+g[3]*b;return a};m.distance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1],p=c[2]-a[2],i=c[3]-a[3];return Math.sqrt(b*b+d*d+p*p+i*i)};m.dist=m.distance;m.squaredDistance=function(a,c){var b=c[0]-a[0],d=c[1]-a[1],p=c[2]-a[2],i=c[3]-a[3];return b*b+d*d+p*p+i*i};m.sqrDist=m.squaredDistance;m.length=function(a){var c=
a[0],b=a[1],d=a[2];a=a[3];return Math.sqrt(c*c+b*b+d*d+a*a)};m.len=m.length;m.squaredLength=function(a){var c=a[0],b=a[1],d=a[2];a=a[3];return c*c+b*b+d*d+a*a};m.sqrLen=m.squaredLength;m.negate=function(a,c){a[0]=-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=-c[3];return a};m.inverse=function(a,c){a[0]=1/c[0];a[1]=1/c[1];a[2]=1/c[2];a[3]=1/c[3];return a};m.normalize=function(a,c){var b=c[0],d=c[1],p=c[2],i=c[3],b=b*b+d*d+p*p+i*i;0<b&&(b=1/Math.sqrt(b),a[0]=c[0]*b,a[1]=c[1]*b,a[2]=c[2]*b,a[3]=c[3]*b);return a};
m.dot=function(a,c){return a[0]*c[0]+a[1]*c[1]+a[2]*c[2]+a[3]*c[3]};m.lerp=function(a,c,b,d){var p=c[0],i=c[1],s=c[2];c=c[3];a[0]=p+d*(b[0]-p);a[1]=i+d*(b[1]-i);a[2]=s+d*(b[2]-s);a[3]=c+d*(b[3]-c);return a};m.random=function(a,c){c=c||1;a[0]=h();a[1]=h();a[2]=h();a[3]=h();m.normalize(a,a);m.scale(a,a,c);return a};m.transformMat4=function(a,c,b){var d=c[0],p=c[1],i=c[2];c=c[3];a[0]=b[0]*d+b[4]*p+b[8]*i+b[12]*c;a[1]=b[1]*d+b[5]*p+b[9]*i+b[13]*c;a[2]=b[2]*d+b[6]*p+b[10]*i+b[14]*c;a[3]=b[3]*d+b[7]*p+
b[11]*i+b[15]*c;return a};m.transformQuat=function(a,c,b){var d=c[0],p=c[1],i=c[2];c=b[0];var s=b[1],f=b[2];b=b[3];var e=b*d+s*i-f*p,h=b*p+f*d-c*i,t=b*i+c*p-s*d,d=-c*d-s*p-f*i;a[0]=e*b+d*-c+h*-f-t*-s;a[1]=h*b+d*-s+t*-c-e*-f;a[2]=t*b+d*-f+e*-s-h*-c;return a};var B=m.create();m.forEach=function(a,c,b,d,p,i){c||(c=4);b||(b=0);for(d=d?Math.min(d*c+b,a.length):a.length;b<d;b+=c)B[0]=a[b],B[1]=a[b+1],B[2]=a[b+2],B[3]=a[b+3],p(B,B,i),a[b]=B[0],a[b+1]=B[1],a[b+2]=B[2],a[b+3]=B[3];return a};m.str=function(a){return"vec4("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof b&&(b.vec4=m);f={create:function(){var a=new e(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var c=new e(4);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,c){if(a===c){var b=c[1];a[1]=c[2];a[2]=b}else a[0]=c[0],a[1]=c[2],a[2]=c[1],a[3]=c[3];return a},invert:function(a,c){var b=
c[0],d=c[1],p=c[2],i=c[3],s=b*i-p*d;if(!s)return null;s=1/s;a[0]=i*s;a[1]=-d*s;a[2]=-p*s;a[3]=b*s;return a},adjoint:function(a,c){var b=c[0];a[0]=c[3];a[1]=-c[1];a[2]=-c[2];a[3]=b;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,c,b){var d=c[0],p=c[1],i=c[2];c=c[3];var s=b[0],f=b[1],e=b[2];b=b[3];a[0]=d*s+i*f;a[1]=p*s+c*f;a[2]=d*e+i*b;a[3]=p*e+c*b;return a}};f.mul=f.multiply;f.rotate=function(a,c,b){var d=c[0],p=c[1],i=c[2];c=c[3];var s=Math.sin(b);b=Math.cos(b);a[0]=
d*b+i*s;a[1]=p*b+c*s;a[2]=d*-s+i*b;a[3]=p*-s+c*b;return a};f.scale=function(a,c,b){var d=c[1],p=c[2],i=c[3],s=b[0];b=b[1];a[0]=c[0]*s;a[1]=d*s;a[2]=p*b;a[3]=i*b;return a};f.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};f.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};f.LDU=function(a,c,b,d){a[2]=d[2]/d[0];b[0]=d[0];b[1]=d[1];b[3]=d[3]-a[2]*b[1];return[a,c,b]};"undefined"!==typeof b&&(b.mat2=f);f={create:function(){var a=
new e(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var c=new e(6);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,c){var b=c[0],d=c[1],p=c[2],i=c[3],s=c[4],f=c[5],e=b*i-d*p;if(!e)return null;e=1/e;a[0]=i*e;a[1]=-d*e;a[2]=-p*e;a[3]=b*e;a[4]=(p*f-i*s)*e;a[5]=(d*s-b*f)*e;return a},
determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,c,b){var d=c[0],p=c[1],i=c[2],s=c[3],e=c[4];c=c[5];var f=b[0],h=b[1],t=b[2],n=b[3],j=b[4];b=b[5];a[0]=d*f+i*h;a[1]=p*f+s*h;a[2]=d*t+i*n;a[3]=p*t+s*n;a[4]=d*j+i*b+e;a[5]=p*j+s*b+c;return a}};f.mul=f.multiply;f.rotate=function(a,c,b){var d=c[0],p=c[1],i=c[2],s=c[3],f=c[4];c=c[5];var e=Math.sin(b);b=Math.cos(b);a[0]=d*b+i*e;a[1]=p*b+s*e;a[2]=d*-e+i*b;a[3]=p*-e+s*b;a[4]=f;a[5]=c;return a};f.scale=function(a,c,b){var d=c[1],p=c[2],
i=c[3],s=c[4],e=c[5],f=b[0];b=b[1];a[0]=c[0]*f;a[1]=d*f;a[2]=p*b;a[3]=i*b;a[4]=s;a[5]=e;return a};f.translate=function(a,c,b){var d=c[0],p=c[1],i=c[2],s=c[3],e=c[4];c=c[5];var f=b[0];b=b[1];a[0]=d;a[1]=p;a[2]=i;a[3]=s;a[4]=d*f+i*b+e;a[5]=p*f+s*b+c;return a};f.str=function(a){return"mat2d("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};f.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!==
typeof b&&(b.mat2d=f);f={create:function(){var a=new e(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[4];a[4]=c[5];a[5]=c[6];a[6]=c[8];a[7]=c[9];a[8]=c[10];return a},clone:function(a){var c=new e(9);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return a},
identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,c){if(a===c){var b=c[1],d=c[2],p=c[5];a[1]=c[3];a[2]=c[6];a[3]=b;a[5]=c[7];a[6]=d;a[7]=p}else a[0]=c[0],a[1]=c[3],a[2]=c[6],a[3]=c[1],a[4]=c[4],a[5]=c[7],a[6]=c[2],a[7]=c[5],a[8]=c[8];return a},invert:function(a,c){var b=c[0],d=c[1],p=c[2],i=c[3],s=c[4],e=c[5],f=c[6],h=c[7],t=c[8],n=t*s-e*h,j=-t*i+e*f,D=h*i-s*f,l=b*n+d*j+p*D;if(!l)return null;l=1/l;a[0]=n*l;a[1]=(-t*d+p*h)*l;a[2]=(e*
d-p*s)*l;a[3]=j*l;a[4]=(t*b-p*f)*l;a[5]=(-e*b+p*i)*l;a[6]=D*l;a[7]=(-h*b+d*f)*l;a[8]=(s*b-d*i)*l;return a},adjoint:function(a,c){var b=c[0],d=c[1],p=c[2],i=c[3],s=c[4],e=c[5],f=c[6],h=c[7],j=c[8];a[0]=s*j-e*h;a[1]=p*h-d*j;a[2]=d*e-p*s;a[3]=e*f-i*j;a[4]=b*j-p*f;a[5]=p*i-b*e;a[6]=i*h-s*f;a[7]=d*f-b*h;a[8]=b*s-d*i;return a},determinant:function(a){var c=a[3],b=a[4],d=a[5],p=a[6],i=a[7],e=a[8];return a[0]*(e*b-d*i)+a[1]*(-e*c+d*p)+a[2]*(i*c-b*p)},multiply:function(a,c,b){var d=c[0],p=c[1],i=c[2],e=c[3],
f=c[4],h=c[5],j=c[6],t=c[7];c=c[8];var n=b[0],l=b[1],D=b[2],k=b[3],m=b[4],u=b[5],v=b[6],q=b[7];b=b[8];a[0]=n*d+l*e+D*j;a[1]=n*p+l*f+D*t;a[2]=n*i+l*h+D*c;a[3]=k*d+m*e+u*j;a[4]=k*p+m*f+u*t;a[5]=k*i+m*h+u*c;a[6]=v*d+q*e+b*j;a[7]=v*p+q*f+b*t;a[8]=v*i+q*h+b*c;return a}};f.mul=f.multiply;f.translate=function(a,c,b){var d=c[0],p=c[1],i=c[2],e=c[3],f=c[4],h=c[5],j=c[6],t=c[7];c=c[8];var n=b[0];b=b[1];a[0]=d;a[1]=p;a[2]=i;a[3]=e;a[4]=f;a[5]=h;a[6]=n*d+b*e+j;a[7]=n*p+b*f+t;a[8]=n*i+b*h+c;return a};f.rotate=
function(a,c,b){var d=c[0],p=c[1],i=c[2],e=c[3],f=c[4],h=c[5],j=c[6],t=c[7];c=c[8];var n=Math.sin(b);b=Math.cos(b);a[0]=b*d+n*e;a[1]=b*p+n*f;a[2]=b*i+n*h;a[3]=b*e-n*d;a[4]=b*f-n*p;a[5]=b*h-n*i;a[6]=j;a[7]=t;a[8]=c;return a};f.scale=function(a,c,b){var d=b[0];b=b[1];a[0]=d*c[0];a[1]=d*c[1];a[2]=d*c[2];a[3]=b*c[3];a[4]=b*c[4];a[5]=b*c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];return a};f.fromMat2d=function(a,c){a[0]=c[0];a[1]=c[1];a[2]=0;a[3]=c[2];a[4]=c[3];a[5]=0;a[6]=c[4];a[7]=c[5];a[8]=1;return a};f.fromQuat=
function(a,c){var b=c[0],d=c[1],p=c[2],i=c[3],e=b+b,f=d+d,h=p+p,b=b*e,j=d*e,d=d*f,t=p*e,n=p*f,p=p*h,e=i*e,f=i*f,i=i*h;a[0]=1-d-p;a[3]=j-i;a[6]=t+f;a[1]=j+i;a[4]=1-b-p;a[7]=n-e;a[2]=t-f;a[5]=n+e;a[8]=1-b-d;return a};f.normalFromMat4=function(a,c){var b=c[0],d=c[1],p=c[2],i=c[3],e=c[4],f=c[5],h=c[6],j=c[7],t=c[8],n=c[9],l=c[10],D=c[11],k=c[12],m=c[13],u=c[14],q=c[15],y=b*f-d*e,z=b*h-p*e,w=b*j-i*e,x=d*h-p*f,r=d*j-i*f,B=p*j-i*h,A=t*m-n*k,G=t*u-l*k,t=t*q-D*k,H=n*u-l*m,n=n*q-D*m,l=l*q-D*u,D=y*l-z*n+w*H+
x*t-r*G+B*A;if(!D)return null;D=1/D;a[0]=(f*l-h*n+j*H)*D;a[1]=(h*t-e*l-j*G)*D;a[2]=(e*n-f*t+j*A)*D;a[3]=(p*n-d*l-i*H)*D;a[4]=(b*l-p*t+i*G)*D;a[5]=(d*t-b*n-i*A)*D;a[6]=(m*B-u*r+q*x)*D;a[7]=(u*w-k*B-q*z)*D;a[8]=(k*r-m*w+q*y)*D;return a};f.str=function(a){return"mat3("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};f.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],
2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!==typeof b&&(b.mat3=f);var A={create:function(){var a=new e(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var c=new e(16);c[0]=a[0];c[1]=a[1];c[2]=a[2];c[3]=a[3];c[4]=a[4];c[5]=a[5];c[6]=a[6];c[7]=a[7];c[8]=a[8];c[9]=a[9];c[10]=a[10];c[11]=a[11];c[12]=a[12];c[13]=a[13];c[14]=a[14];c[15]=a[15];return c},copy:function(a,c){a[0]=c[0];a[1]=c[1];a[2]=
c[2];a[3]=c[3];a[4]=c[4];a[5]=c[5];a[6]=c[6];a[7]=c[7];a[8]=c[8];a[9]=c[9];a[10]=c[10];a[11]=c[11];a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},transpose:function(a,c){if(a===c){var b=c[1],d=c[2],p=c[3],i=c[6],e=c[7],f=c[11];a[1]=c[4];a[2]=c[8];a[3]=c[12];a[4]=b;a[6]=c[9];a[7]=c[13];a[8]=d;a[9]=i;a[11]=c[14];a[12]=p;a[13]=e;a[14]=f}else a[0]=
c[0],a[1]=c[4],a[2]=c[8],a[3]=c[12],a[4]=c[1],a[5]=c[5],a[6]=c[9],a[7]=c[13],a[8]=c[2],a[9]=c[6],a[10]=c[10],a[11]=c[14],a[12]=c[3],a[13]=c[7],a[14]=c[11],a[15]=c[15];return a},invert:function(a,c){var b=c[0],d=c[1],p=c[2],i=c[3],e=c[4],f=c[5],h=c[6],j=c[7],t=c[8],n=c[9],l=c[10],k=c[11],m=c[12],q=c[13],u=c[14],v=c[15],y=b*f-d*e,z=b*h-p*e,w=b*j-i*e,x=d*h-p*f,r=d*j-i*f,B=p*j-i*h,A=t*q-n*m,G=t*u-l*m,H=t*v-k*m,C=n*u-l*q,I=n*v-k*q,E=l*v-k*u,F=y*E-z*I+w*C+x*H-r*G+B*A;if(!F)return null;F=1/F;a[0]=(f*E-h*
I+j*C)*F;a[1]=(p*I-d*E-i*C)*F;a[2]=(q*B-u*r+v*x)*F;a[3]=(l*r-n*B-k*x)*F;a[4]=(h*H-e*E-j*G)*F;a[5]=(b*E-p*H+i*G)*F;a[6]=(u*w-m*B-v*z)*F;a[7]=(t*B-l*w+k*z)*F;a[8]=(e*I-f*H+j*A)*F;a[9]=(d*H-b*I-i*A)*F;a[10]=(m*r-q*w+v*y)*F;a[11]=(n*w-t*r-k*y)*F;a[12]=(f*G-e*C-h*A)*F;a[13]=(b*C-d*G+p*A)*F;a[14]=(q*z-m*x-u*y)*F;a[15]=(t*x-n*z+l*y)*F;return a},adjoint:function(a,c){var b=c[0],d=c[1],e=c[2],i=c[3],f=c[4],h=c[5],j=c[6],l=c[7],t=c[8],n=c[9],k=c[10],m=c[11],q=c[12],r=c[13],u=c[14],v=c[15];a[0]=h*(k*v-m*u)-
n*(j*v-l*u)+r*(j*m-l*k);a[1]=-(d*(k*v-m*u)-n*(e*v-i*u)+r*(e*m-i*k));a[2]=d*(j*v-l*u)-h*(e*v-i*u)+r*(e*l-i*j);a[3]=-(d*(j*m-l*k)-h*(e*m-i*k)+n*(e*l-i*j));a[4]=-(f*(k*v-m*u)-t*(j*v-l*u)+q*(j*m-l*k));a[5]=b*(k*v-m*u)-t*(e*v-i*u)+q*(e*m-i*k);a[6]=-(b*(j*v-l*u)-f*(e*v-i*u)+q*(e*l-i*j));a[7]=b*(j*m-l*k)-f*(e*m-i*k)+t*(e*l-i*j);a[8]=f*(n*v-m*r)-t*(h*v-l*r)+q*(h*m-l*n);a[9]=-(b*(n*v-m*r)-t*(d*v-i*r)+q*(d*m-i*n));a[10]=b*(h*v-l*r)-f*(d*v-i*r)+q*(d*l-i*h);a[11]=-(b*(h*m-l*n)-f*(d*m-i*n)+t*(d*l-i*h));a[12]=
-(f*(n*u-k*r)-t*(h*u-j*r)+q*(h*k-j*n));a[13]=b*(n*u-k*r)-t*(d*u-e*r)+q*(d*k-e*n);a[14]=-(b*(h*u-j*r)-f*(d*u-e*r)+q*(d*j-e*h));a[15]=b*(h*k-j*n)-f*(d*k-e*n)+t*(d*j-e*h);return a},determinant:function(a){var c=a[0],b=a[1],d=a[2],e=a[3],i=a[4],f=a[5],h=a[6],j=a[7],l=a[8],t=a[9],n=a[10],k=a[11],m=a[12],q=a[13],r=a[14];a=a[15];return(c*f-b*i)*(n*a-k*r)-(c*h-d*i)*(t*a-k*q)+(c*j-e*i)*(t*r-n*q)+(b*h-d*f)*(l*a-k*m)-(b*j-e*f)*(l*r-n*m)+(d*j-e*h)*(l*q-t*m)},multiply:function(a,c,b){var d=c[0],e=c[1],i=c[2],
f=c[3],h=c[4],j=c[5],l=c[6],t=c[7],n=c[8],k=c[9],m=c[10],q=c[11],r=c[12],u=c[13],v=c[14];c=c[15];var y=b[0],z=b[1],w=b[2],x=b[3];a[0]=y*d+z*h+w*n+x*r;a[1]=y*e+z*j+w*k+x*u;a[2]=y*i+z*l+w*m+x*v;a[3]=y*f+z*t+w*q+x*c;y=b[4];z=b[5];w=b[6];x=b[7];a[4]=y*d+z*h+w*n+x*r;a[5]=y*e+z*j+w*k+x*u;a[6]=y*i+z*l+w*m+x*v;a[7]=y*f+z*t+w*q+x*c;y=b[8];z=b[9];w=b[10];x=b[11];a[8]=y*d+z*h+w*n+x*r;a[9]=y*e+z*j+w*k+x*u;a[10]=y*i+z*l+w*m+x*v;a[11]=y*f+z*t+w*q+x*c;y=b[12];z=b[13];w=b[14];x=b[15];a[12]=y*d+z*h+w*n+x*r;a[13]=
y*e+z*j+w*k+x*u;a[14]=y*i+z*l+w*m+x*v;a[15]=y*f+z*t+w*q+x*c;return a}};A.mul=A.multiply;A.translate=function(a,c,b){var d=b[0],e=b[1];b=b[2];var i,f,h,j,l,k,n,m,q,r,B,u;c===a?(a[12]=c[0]*d+c[4]*e+c[8]*b+c[12],a[13]=c[1]*d+c[5]*e+c[9]*b+c[13],a[14]=c[2]*d+c[6]*e+c[10]*b+c[14],a[15]=c[3]*d+c[7]*e+c[11]*b+c[15]):(i=c[0],f=c[1],h=c[2],j=c[3],l=c[4],k=c[5],n=c[6],m=c[7],q=c[8],r=c[9],B=c[10],u=c[11],a[0]=i,a[1]=f,a[2]=h,a[3]=j,a[4]=l,a[5]=k,a[6]=n,a[7]=m,a[8]=q,a[9]=r,a[10]=B,a[11]=u,a[12]=i*d+l*e+q*b+
c[12],a[13]=f*d+k*e+r*b+c[13],a[14]=h*d+n*e+B*b+c[14],a[15]=j*d+m*e+u*b+c[15]);return a};A.scale=function(a,c,b){var d=b[0],e=b[1];b=b[2];a[0]=c[0]*d;a[1]=c[1]*d;a[2]=c[2]*d;a[3]=c[3]*d;a[4]=c[4]*e;a[5]=c[5]*e;a[6]=c[6]*e;a[7]=c[7]*e;a[8]=c[8]*b;a[9]=c[9]*b;a[10]=c[10]*b;a[11]=c[11]*b;a[12]=c[12];a[13]=c[13];a[14]=c[14];a[15]=c[15];return a};A.rotate=function(a,c,b,e){var f=e[0],i=e[1];e=e[2];var h=Math.sqrt(f*f+i*i+e*e),j,l,k,m,n,q,r,B,A,u,v,y,z,w,x,C,I,E,G,H;if(Math.abs(h)<d)return null;h=1/h;f*=
h;i*=h;e*=h;j=Math.sin(b);l=Math.cos(b);k=1-l;b=c[0];h=c[1];m=c[2];n=c[3];q=c[4];r=c[5];B=c[6];A=c[7];u=c[8];v=c[9];y=c[10];z=c[11];w=f*f*k+l;x=i*f*k+e*j;C=e*f*k-i*j;I=f*i*k-e*j;E=i*i*k+l;G=e*i*k+f*j;H=f*e*k+i*j;f=i*e*k-f*j;i=e*e*k+l;a[0]=b*w+q*x+u*C;a[1]=h*w+r*x+v*C;a[2]=m*w+B*x+y*C;a[3]=n*w+A*x+z*C;a[4]=b*I+q*E+u*G;a[5]=h*I+r*E+v*G;a[6]=m*I+B*E+y*G;a[7]=n*I+A*E+z*G;a[8]=b*H+q*f+u*i;a[9]=h*H+r*f+v*i;a[10]=m*H+B*f+y*i;a[11]=n*H+A*f+z*i;c!==a&&(a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);return a};
A.rotateX=function(a,c,b){var d=Math.sin(b);b=Math.cos(b);var e=c[4],f=c[5],h=c[6],j=c[7],l=c[8],k=c[9],m=c[10],n=c[11];c!==a&&(a[0]=c[0],a[1]=c[1],a[2]=c[2],a[3]=c[3],a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[4]=e*b+l*d;a[5]=f*b+k*d;a[6]=h*b+m*d;a[7]=j*b+n*d;a[8]=l*b-e*d;a[9]=k*b-f*d;a[10]=m*b-h*d;a[11]=n*b-j*d;return a};A.rotateY=function(a,c,b){var d=Math.sin(b);b=Math.cos(b);var e=c[0],f=c[1],h=c[2],j=c[3],l=c[8],k=c[9],m=c[10],n=c[11];c!==a&&(a[4]=c[4],a[5]=c[5],a[6]=c[6],a[7]=c[7],
a[12]=c[12],a[13]=c[13],a[14]=c[14],a[15]=c[15]);a[0]=e*b-l*d;a[1]=f*b-k*d;a[2]=h*b-m*d;a[3]=j*b-n*d;a[8]=e*d+l*b;a[9]=f*d+k*b;a[10]=h*d+m*b;a[11]=j*d+n*b;return a};A.rotateZ=function(a,b,d){var e=Math.sin(d);d=Math.cos(d);var f=b[0],i=b[1],h=b[2],j=b[3],l=b[4],k=b[5],m=b[6],n=b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=f*d+l*e;a[1]=i*d+k*e;a[2]=h*d+m*e;a[3]=j*d+n*e;a[4]=l*d-f*e;a[5]=k*d-i*e;a[6]=m*d-h*e;a[7]=n*d-j*e;return a};A.fromRotationTranslation=
function(a,b,d){var e=b[0],f=b[1],i=b[2],h=b[3],j=e+e,l=f+f,k=i+i;b=e*j;var m=e*l,e=e*k,n=f*l,f=f*k,i=i*k,j=h*j,l=h*l,h=h*k;a[0]=1-(n+i);a[1]=m+h;a[2]=e-l;a[3]=0;a[4]=m-h;a[5]=1-(b+i);a[6]=f+j;a[7]=0;a[8]=e+l;a[9]=f-j;a[10]=1-(b+n);a[11]=0;a[12]=d[0];a[13]=d[1];a[14]=d[2];a[15]=1;return a};A.fromQuat=function(a,b){var d=b[0],e=b[1],f=b[2],i=b[3],h=d+d,j=e+e,l=f+f,d=d*h,k=e*h,e=e*j,m=f*h,n=f*j,f=f*l,h=i*h,j=i*j,i=i*l;a[0]=1-e-f;a[1]=k+i;a[2]=m-j;a[3]=0;a[4]=k-i;a[5]=1-d-f;a[6]=n+h;a[7]=0;a[8]=m+j;
a[9]=n-h;a[10]=1-d-e;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};A.frustum=function(a,b,d,e,f,i,h){var j=1/(d-b),l=1/(f-e),k=1/(i-h);a[0]=2*i*j;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*i*l;a[6]=0;a[7]=0;a[8]=(d+b)*j;a[9]=(f+e)*l;a[10]=(h+i)*k;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*(h*i)*k;a[15]=0;return a};A.perspective=function(a,b,d,e,f){b=1/Math.tan(b/2);var i=1/(e-f);a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(f+e)*i;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*f*e*i;a[15]=0;
return a};A.ortho=function(a,b,d,e,f,i,h){var j=1/(b-d),l=1/(e-f),k=1/(i-h);a[0]=-2*j;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*l;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*k;a[11]=0;a[12]=(b+d)*j;a[13]=(f+e)*l;a[14]=(h+i)*k;a[15]=1;return a};A.lookAt=function(a,b,g,e){var f,i,h,j,l,k,m,n,q=b[0],r=b[1];b=b[2];h=e[0];j=e[1];i=e[2];m=g[0];e=g[1];f=g[2];if(Math.abs(q-m)<d&&Math.abs(r-e)<d&&Math.abs(b-f)<d)return A.identity(a);g=q-m;e=r-e;m=b-f;n=1/Math.sqrt(g*g+e*e+m*m);g*=n;e*=n;m*=n;f=j*m-i*e;i=i*g-h*m;h=h*e-j*
g;(n=Math.sqrt(f*f+i*i+h*h))?(n=1/n,f*=n,i*=n,h*=n):h=i=f=0;j=e*h-m*i;l=m*f-g*h;k=g*i-e*f;(n=Math.sqrt(j*j+l*l+k*k))?(n=1/n,j*=n,l*=n,k*=n):k=l=j=0;a[0]=f;a[1]=j;a[2]=g;a[3]=0;a[4]=i;a[5]=l;a[6]=e;a[7]=0;a[8]=h;a[9]=k;a[10]=m;a[11]=0;a[12]=-(f*q+i*r+h*b);a[13]=-(j*q+l*r+k*b);a[14]=-(g*q+e*r+m*b);a[15]=1;return a};A.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+
a[15]+")"};A.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!==typeof b&&(b.mat4=A);var q={create:function(){var a=new e(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},C=j.create(),I=j.fromValues(1,0,0),J=j.fromValues(0,1,0);q.rotationTo=
function(a,b,d){var e=j.dot(b,d);if(-0.999999>e)return j.cross(C,I,b),1E-6>j.length(C)&&j.cross(C,J,b),j.normalize(C,C),q.setAxisAngle(a,C,Math.PI),a;if(0.999999<e)return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a;j.cross(C,b,d);a[0]=C[0];a[1]=C[1];a[2]=C[2];a[3]=1+e;return q.normalize(a,a)};var E=f.create();q.setAxes=function(a,b,d,e){E[0]=d[0];E[3]=d[1];E[6]=d[2];E[1]=e[0];E[4]=e[1];E[7]=e[2];E[2]=-b[0];E[5]=-b[1];E[8]=-b[2];return q.normalize(a,q.fromMat3(a,E))};q.clone=m.clone;q.fromValues=m.fromValues;q.copy=
m.copy;q.set=m.set;q.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};q.setAxisAngle=function(a,b,d){d*=0.5;var e=Math.sin(d);a[0]=e*b[0];a[1]=e*b[1];a[2]=e*b[2];a[3]=Math.cos(d);return a};q.add=m.add;q.multiply=function(a,b,d){var e=b[0],f=b[1],h=b[2];b=b[3];var j=d[0],l=d[1],k=d[2];d=d[3];a[0]=e*d+b*j+f*k-h*l;a[1]=f*d+b*l+h*j-e*k;a[2]=h*d+b*k+e*l-f*j;a[3]=b*d-e*j-f*l-h*k;return a};q.mul=q.multiply;q.scale=m.scale;q.rotateX=function(a,b,d){d*=0.5;var e=b[0],f=b[1],h=b[2];b=b[3];var j=Math.sin(d);
d=Math.cos(d);a[0]=e*d+b*j;a[1]=f*d+h*j;a[2]=h*d-f*j;a[3]=b*d-e*j;return a};q.rotateY=function(a,b,d){d*=0.5;var e=b[0],f=b[1],h=b[2];b=b[3];var j=Math.sin(d);d=Math.cos(d);a[0]=e*d-h*j;a[1]=f*d+b*j;a[2]=h*d+e*j;a[3]=b*d-f*j;return a};q.rotateZ=function(a,b,d){d*=0.5;var e=b[0],f=b[1],h=b[2];b=b[3];var j=Math.sin(d);d=Math.cos(d);a[0]=e*d+f*j;a[1]=f*d-e*j;a[2]=h*d+b*j;a[3]=b*d-h*j;return a};q.calculateW=function(a,b){var d=b[0],e=b[1],f=b[2];a[0]=d;a[1]=e;a[2]=f;a[3]=Math.sqrt(Math.abs(1-d*d-e*e-
f*f));return a};q.dot=m.dot;q.lerp=m.lerp;q.slerp=function(a,b,d,e){var f=b[0],h=b[1],j=b[2];b=b[3];var l=d[0],k=d[1],m=d[2];d=d[3];var q,n,r;n=f*l+h*k+j*m+b*d;0>n&&(n=-n,l=-l,k=-k,m=-m,d=-d);1E-6<1-n?(q=Math.acos(n),r=Math.sin(q),n=Math.sin((1-e)*q)/r,e=Math.sin(e*q)/r):n=1-e;a[0]=n*f+e*l;a[1]=n*h+e*k;a[2]=n*j+e*m;a[3]=n*b+e*d;return a};q.invert=function(a,b){var d=b[0],e=b[1],f=b[2],h=b[3],j=d*d+e*e+f*f+h*h,j=j?1/j:0;a[0]=-d*j;a[1]=-e*j;a[2]=-f*j;a[3]=h*j;return a};q.conjugate=function(a,b){a[0]=
-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};q.length=m.length;q.len=q.length;q.squaredLength=m.squaredLength;q.sqrLen=q.squaredLength;q.normalize=m.normalize;q.fromMat3=function(a,b){var d=b[0]+b[4]+b[8];if(0<d)d=Math.sqrt(d+1),a[3]=0.5*d,d=0.5/d,a[0]=(b[5]-b[7])*d,a[1]=(b[6]-b[2])*d,a[2]=(b[1]-b[3])*d;else{var e=0;b[4]>b[0]&&(e=1);b[8]>b[3*e+e]&&(e=2);var f=(e+1)%3,h=(e+2)%3,d=Math.sqrt(b[3*e+e]-b[3*f+f]-b[3*h+h]+1);a[e]=0.5*d;d=0.5/d;a[3]=(b[3*f+h]-b[3*h+f])*d;a[f]=(b[3*f+e]+b[3*e+f])*d;a[h]=
(b[3*h+e]+b[3*e+h])*d}return a};q.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof b&&(b.quat=q)})(GLMAT);try{module.exports=GLMAT}catch(e$$10){}GLMJS_PREFIX="glm-js: ";var GLMJSError=function(b,d){function e(e){this.name=b;Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack;this.message=e;d&&d.apply(this,arguments)}e.prototype=Error();e.prototype.name=b;return e.prototype.constructor=e}("GLMJSError");
$GLM_extern=function(b,d){d=d||b;return function(){GLM[d]=GLM.$outer.functions[b]||GLM.$outer[b];if(!GLM[d])throw new GLMJSError("$GLM_extern: unresolved external symbol: "+b);GLM.$DEBUG&&GLM.$outer.console.debug("$GLM_extern: resolved external symbol "+b+" "+typeof GLM[d]);return GLM[d].apply(this,arguments)}};"undefined"===typeof $GLM_log&&($GLM_log=function(b,d){GLM.$outer.console.log.apply(GLM.$outer.console,[].slice.call(arguments).map(function(b){return GLM.to_string(b)}))});
"undefined"===typeof $GLM_console_log&&($GLM_console_log=function(b,d){(console[b]||function(){}).apply(console,[].slice.call(arguments,1))});"undefined"===typeof $GLM_console_logger&&($GLM_console_logger=function(b){return $GLM_console_log.bind($GLM_console_log,b)});
GLM={$DEBUG:!1,version:"0.0.2",GLM_VERSION:95,$outer:{functions:{},intern:function(b,d){if(void 0===d&&"object"===typeof b)for(var e in b)GLM.$outer.intern(e,b[e]);else return GLM.$DEBUG&&GLM.$outer.console.debug("intern "+b,d&&(d.name||typeof d)),GLM.$outer[b]=d},$import:function(b){GLM.$outer.intern(b.statics);GLM.$template.extend(GLM,GLM.$template.functions(b.functions),GLM.$template.operations(b.operations),GLM.$template.calculators(b.calculators));GLM.$init(b)},console:function(b){var d={};"debug,warn,info,error,log,write".replace(/\w+/g,
function(e){d[e]=b(e)});return d}($GLM_console_logger),quat_array_from_xyz:function(b){var d=glm.quat();d["*="](glm.angleAxis(b.x,glm.vec3(1,0,0)));d["*="](glm.angleAxis(b.y,glm.vec3(0,1,0)));d["*="](glm.angleAxis(b.z,glm.vec3(0,0,1)));return d.elements},quat_array_from_zyx:function(b){var d=glm.quat();d["*="](glm.angleAxis(b.z,glm.vec3(0,0,1)));d["*="](glm.angleAxis(b.y,glm.vec3(0,1,0)));d["*="](glm.angleAxis(b.x,glm.vec3(1,0,0)));return d.elements},_vec3_eulerAngles:function(b){var d=this.mat4_array_from_quat(b);
b=d[0];var e=d[4],h=d[1],f=d[5],k=d[2],l=d[6],d=d[10],j=new glm.vec3;j.y=Math.asin(-glm._clamp(k,-1,1));0.99999>Math.abs(k)?(j.x=Math.atan2(l,d),j.z=Math.atan2(h,b)):(j.x=0,j.z=Math.atan2(-e,f));return j}},$extern:$GLM_extern,$log:$GLM_log,GLMJSError:GLMJSError,_radians:function(b){return b*Math.PI/180},_degrees:function(b){return 180*b/Math.PI},normalize:$GLM_extern("normalize"),inverse:$GLM_extern("inverse"),length:$GLM_extern("length"),length2:$GLM_extern("length2"),transpose:$GLM_extern("transpose"),
mix:$GLM_extern("mix"),clamp:$GLM_extern("clamp"),rotate:function(b,d,e){return b.mul(GLM.$outer.mat4_angleAxis(d,e))},scale:function(b,d){return b.mul(GLM.$outer.mat4_scale(d))},translate:function(b,d){return b.mul(GLM.$outer.mat4_translation(d))},perspective:function(b,d,e,h){return GLM.$outer.mat4_perspective(b,d,e,h)},eulerAngles:function(b){return GLM.$outer.vec3_eulerAngles(b)},angleAxis:function(b,d){return GLM.$outer.quat_angleAxis(b,d)},make_mat4:function(b){return new GLM.mat4([].slice.call(b,
0,16))},toMat4:function(b){return new GLM.mat4(b)},FAITHFUL:!0,to_string:function(b,d){try{var e=b.$type||typeof b;if(!GLM[e])throw new GLMJSError("unsupported argtype to GLM.to_string: "+[b,e]);if(!GLM[e].$)throw new GLMJSError("missing .$... GLM.to_string: "+[b,e]);return GLM.FAITHFUL?GLM.$to_string(b,d).replace(/[\t\n]/g,""):GLM.$to_string(b,d)}catch(h){return GLM.$DEBUG&&GLM.$outer.console.error("to_string error: ",e,b+"",h),h+""}},$isGLMConstructor:function(b){return b&&b.prototype&&~GLM.$types.indexOf(b.prototype.$type)?
b.prototype.$type:!1},$getGLMType:function(b){return"$type"in b&&~GLM.$types.indexOf(b.$type)?GLM[b.$type]:!1},$isGLMObject:function(b){return~GLM.$types.indexOf(b&&b.$type)?b.$type:!1},$to_array:function(b){return[].slice.call(b.elements)},$to_json:function(b,d,e){"$type"in this&&(e=d,d=b,b=this);return JSON.stringify(GLM.$to_object(b),d,e)},$inspect:function(b){"$type"in this&&(b=this);return GLM.$to_json(b,null,2)},$sizeof:function(b){return b.BYTES_PER_ELEMENT},_clamp:function(b,d,e){return b<
d?d:b>e?e:b},max:function(b,d){return Math.max(b,d)},min:function(b,d){return Math.min(b,d)},_sign:function(b){return 0<b?1:0>b?-1:+b},epsilon:function(){return 1E-6},FIXEDPRECISION:6,$toString:function(b,d,e,h){h=void 0===h?GLM.FIXEDPRECISION:h;if(!e||!e.map)throw Error("unsupported argtype to $toString(..,..,props="+typeof e+")");try{var f="";e.map(function(b){b=d[f=b];if(!b.toFixed)throw Error("!toFixed in w");return b.toFixed(0)})}catch(k){throw GLM.$DEBUG&&GLM.$outer.console.error("$toString error",
b,typeof d,Object.prototype.toString.call(d),f),GLM.$DEBUG&&glm.$log("$toString error",b,typeof d,Object.prototype.toString.call(d),f),new GLMJSError(k);}return[b,"(",e.map(function(b){return d[b].toFixed(h)}).join(", "),")"].join("")}};GLM.sign=Math.sign||GLM._sign;
var GLM_template=GLM.$template={_genArgError:function(b,d,e,h){~h.indexOf(void 0)&&(h=h.slice(0,h.indexOf(void 0)));var f=RegExp.prototype.test.bind(/^[^$_]/);return new GLMJSError("unsupported argtype to "+d+""+b.$sig+": [typ="+e+"] :: got arg types: "+h.map(GLM_template.jstypes.get)+" // supported types: "+Object.keys(b).filter(f).join("||"))},jstypes:{get:function(b){return null===b?"null":void 0===b?"undefined":b.$type||GLM_template.jstypes[typeof b]||GLM_template.jstypes[b+""]||"<unknown "+[typeof b,
b]+">"},"0":"float",number:"float",string:"string","[object Float32Array]":"Float32Array"},"<T>":function(b,d){function e(e){"$type"in this&&(e=this);var k=[e&&e.$type||h[typeof e]||"null"];if(!b[k])throw GLM_template._genArgError(b,d,k,[e]);return b[k](e)}var h=GLM_template.jstypes;b.$sig="<T>";e.$template=b;return e},"<T,...>":function(b,d){function e(e){var k=[].slice.call(arguments);"$type"in this&&k.unshift(e=this);var l=[e&&e.$type||h[typeof e]||"null"];if(!b[l])throw GLM_template._genArgError(b,
d,l,k);return b[l].apply(b,k)}var h=GLM_template.jstypes;b.$sig="<T,...>";e.$template=b;return e},"<T,V,n>":function(b,d){function e(e,k,l){"$type"in this&&(l=k,k=e,e=this);var j=[e&&e.$type||h[typeof k],k&&k.$type||h[typeof k]||h[k+""]||"<unknown "+k+">"];if(!b[j])throw GLM_template._genArgError(b,d,j,[e,k,l]);if("number"!==typeof l)throw new GLMJSError(d+b.$sig+": unsupported n type: "+[typeof l,l]);return b[j](e,k,l)}var h=GLM_template.jstypes;b.$sig="<T,V,n>";e.$template=b;return e},"<T,V>":function(b,
d){function e(e,k,l,j,r){"$type"in this&&(r=j,j=l,l=k,k=e,e=this);var m=[e&&e.$type||h[typeof k],k&&k.$type||h[typeof k]||h[k+""]||k instanceof Array&&"array"+k.length+""||"<unknown "+k+">"];if(!b[m])throw GLM_template._genArgError(b,d,m,[e,k,l,j,r]);return b[m](e,k,l,j,r)}var h=GLM_template.jstypes;b.$sig="<T,V>";e.$template=b;return e},override:function(b,d,e,h){GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: ",b,d,e.$op?'$op: ["'+e.$op+'"]':"");if(!h)throw Error("unspecified target group "+
h+' (expected override(<TV>, "p", {TSP}, ret={GROUP}))');var f=h[d]&&h[d];h[d]=GLM_template[b](GLM_template.deNify(e,d),d);h[d].$op=e.$op;if(f){if(f.$op!==h[d].$op)throw Error('glm.$template.override: mismatch merging existing override: .$op "'+[f.$op,"!=",h[d].$op].join(" ")+'"  p='+[d,f.$op,h[d].$op,"||"+Object.keys(f.$template).join("||")]);var k=[],l;for(l in h[d].$template)l in f.$template||GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+d+" ... "+l+" overlayed");for(l in f.$template)l in
h[d].$template||(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+d+" ... "+l+" carried-forward"),k.push(l),h[d].$template[l]=f.$template[l]);GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+d+" ... "+Object.keys(h[d].$template).filter(function(b){return!~b.indexOf("$")}).map(function(b){return!~k.indexOf(b)?"*"+b+"*":b}).join(" | "))}else GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+d+" ... "+Object.keys(h[d].$template).filter(function(b){return!~b.indexOf("$")}).map(function(b){return"*"+
b+"*"}).join(" | "));return h},_override:function(b,d,e){for(var h in d)this.override(b,h,d[h],e);return e},extend:function(b,d){[].slice.call(arguments,1).forEach(function(d){for(var h in d)d.hasOwnProperty(h)&&(b[h]=d[h])});return b},operations:function(b){return this._override("<T,V>",b,GLM.$outer.functions)},calculators:function(b){return this._override("<T>",b,GLM.$outer.functions)},varargs_functions:function(b){return this._override("<T,...>",b,GLM.$outer.functions)},functions:function(b){return this._override("<T,V,n>",
b,GLM.$outer.functions)},deNify:function(b,d){d=(d||"").replace(/[^$a-zA-Z0-9_]/g,"_");var e={vec:[2,3,4],mat:[3,4]},h;for(h in b)h.replace(/(vec|mat)<N>/,function(f,k){var l=b[h];delete b[h];e[k].forEach(function(e){var f=h.replace(/<N[*]N>/g,e*e).replace(/<N>/g,e);if(!(f in b)){var k=(d+"_"+f).replace(/[^$a-z0-9_]/g,"_");b[f]=(new Function("","return "+(l+"").replace(/^function\s*\(/,"function "+k+"(").replace(/N[*]N/g,e*e).replace(/N/g,e)))()}})});return b},GLMType:function(b,d){var e=d.identity.length,
h=function(f){var k=typeof f+arguments.length,l=d[k];if(!l)throw new GLMJSError("no template found for "+b+".$."+k);if(this instanceof h){if(f instanceof Float32Array){if(f.length>e)throw glm.$outer.console.error(b+" elements size mismatch: "+["wanted:"+e,"handed:"+f.length]),k=f.subarray(0,e),Error(b+" elements size mismatch: "+["wanted:"+e,"handed:"+f.length,,"correctable?:"+k.length]);elements=f}else(elements=new Float32Array(e)).set(l.apply(d,arguments));Object.defineProperty(this,"elements",
{enumerable:!1,configurable:!0,value:elements})}else return new h(l.apply(d,arguments))};d.components=d.components?d.components.map(function(b){return"string"===typeof b?b.split(""):b}):[];h.$=d;h.componentLength=e;h.BYTES_PER_ELEMENT=e*Float32Array.BYTES_PER_ELEMENT;h.toString=function(){return"function GLM."+b+"(){ [ GLMType ] }"};h.prototype={$type:b,$type_name:d.name||"<"+b+">",$components:d.components[0],$len:e,constructor:h,clone:function(){return new h(this)},toString:function(){return GLM.$to_string(this)},
byteLength:h.BYTES_PER_ELEMENT,componentLength:h.componentLength};Object.defineProperty(h.prototype,"address",{get:function(){var b=this.elements.byteOffset.toString(16);return"0x00000000".substr(0,10-b.length)+b}});return h}};
GLM.$template.functions({mix:{"float,float":function(b,d,e){return d*e+b*(1-e)},"vec<N>,vec<N>":function(b,d,e){if(void 0===e)throw Error("glm.mix<vecN,vecN>(v,n,rt) requires 3 arguments");b=glm.$to_array(b);d=glm.$to_array(d);var h=1-e;return new glm.vecN(b.map(function(b,k){return d[k]*e+b*h}))}},clamp:{"float,float":function(b,d,e){return GLM._clamp(b,d,e)},"vec<N>,float":function(b,d,e){return new GLM.vecN(GLM.$to_array(b).map(function(b){return GLM._clamp(b,d,e)}))}}});
GLM.$template.extend(GLM,GLM.$template.calculators({degrees:{"float":function(b){return GLM._degrees(b)},"vec<N>":function(b){return new GLM.vecN(GLM.$to_array(b).map(GLM._degrees))}},radians:{"float":function(b){return GLM._radians(b)},"vec<N>":function(b){return new GLM.vecN(GLM.$to_array(b).map(GLM._radians))}},$to_object:{vec2:function(b){return{x:b.x,y:b.y}},vec3:function(b){return{x:b.x,y:b.y,z:b.z}},vec4:function(b){return{x:b.x,y:b.y,z:b.z,w:b.w}},uvec4:function(b){return{x:b.x,y:b.y,z:b.z,
w:b.w}},quat:function(b){return{w:b.w,x:b.x,y:b.y,z:b.z}},mat3:function(b){return{"0":this.vec3(b[0]),1:this.vec3(b[1]),2:this.vec3(b[2])}},mat4:function(b){return{"0":this.vec4(b[0]),1:this.vec4(b[1]),2:this.vec4(b[2]),3:this.vec4(b[3])}}},$to_glsl:{"vec<N>":function(b){for(var d=GLM.$to_array(b);d.length&&d[d.length-2]===d[d.length-1];)d.pop();return b.$type+"("+d+")"},uvec4:function(b){return this.vec4(b)},quat:function(b){return 0===b.x+b.y+b.z?"quat("+b.w+")":"quat("+GLM.$to_array(b)+")"},mat3:function(b){b=
GLM.$to_array(b);return b.reduce(function(b,e){return b+e},0)===3*b[0]?"mat3("+b[0]+")":"mat3("+b+")"},mat4:function(b){b=GLM.$to_array(b);return b.reduce(function(b,e){return b+e},0)===4*b[0]?"mat4("+b[0]+")":"mat4("+b+")"}},$from_glsl:{string:function(b){var d;b.replace(/^(\w+)\(([-.0-9ef, ]+)\)$/,function(b,h,f){d=glm[h].apply(glm,f.split(",").map(parseFloat))});return d}}}));
GLM.$to_string=GLM.$template.varargs_functions({$to_string:{"float":function(b,d){return GLM.$toString("float",{value:b},["value"],d)},string:function(b){return b},"vec<N>":function(b,d){return GLM.$toString(b.$type_name,b,b.$components,d)},uvec4:function(b){return b.$type_name+"("+glm.$to_array(b)+")"},"mat<N>":function(b,d){var e=[0,1,2,3].slice(0,N).map(function(d){return b[d]}).map(function(b){return GLM.$toString("\t",b,b.$components,d)});return b.$type_name+"(\n"+e.join(", \n")+"\n)"},quat:function(b,
d){b=GLM.degrees(GLM.eulerAngles(b));return GLM.$toString("<quat>"+b.$type_name,b,["x","y","z"],d)}}}).$to_string;
GLM.$template.operations({copy:{$op:"=","vec<N>,vec<N>":function(b,d){b.elements.set(d.elements);return b},"vec<N>,array<N>":function(b,d){b.elements.set(d);return b},"quat,quat":function(b,d){b.elements.set(d.elements);return b},"mat<N>,mat<N>":function(b,d){b.elements.set(d.elements);return b},"mat<N>,array<N>":function(b,d){d=d.reduce(function(b,d){if(!b.concat)throw new GLMJSError("matN,arrayN -- [[.length===4] x 4] expected");return b.concat(d)});if(d===N)throw new GLMJSError("matN,arrayN -- [[N],[N],[N],[N]] expected");
return b["="](d)},"mat<N>,array<N*N>":function(b,d){b.elements.set(d);return b},"mat4,array9":function(b,d){b.elements.set((new glm.mat4(d)).elements);return b}},sub:{$op:"-","vec<N>,vec<N>":function(b,d){return new glm.vecN(glm.$to_array(b).map(function(b,h){return b-d[h]}))}},add:{$op:"+","vec<N>,vec<N>":function(b,d){return new glm.vecN(glm.$to_array(b).map(function(b,h){return b+d[h]}))}}});GLM.string={$type_name:"string",$:{}};GLM.number={$type_name:"float",$:{}};
GLM.vec2=GLM_template.GLMType("vec2",{name:"fvec2",identity:[0,0],components:["xy","01"],undefined0:function(){return this.identity},number1:function(b){return[b,b]},number2:function(b,d){return[b,d]},object1:function(b){switch(b.length){case 4:case 3:case 2:return[b[0],b[1]];default:if("y"in b&&"x"in b){if(typeof b.x!==typeof b.y)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec2: "+b);return[b.x,b.y]}}throw new GLMJSError("unrecognized object passed to GLM.vec2: "+b);}});
GLM.vec3=GLM_template.GLMType("vec3",{name:"fvec3",identity:[0,0,0],components:["xyz","012","rgb"],undefined0:function(){return GLM.vec3.$.identity},number1:function(b){return[b,b,b]},number2:function(b,d){return[b,d,d]},number3:function(b,d,e){return[b,d,e]},object1:function(b){if(b)switch(b.length){case 4:case 3:return[b[0],b[1],b[2]];case 2:return[b[0],b[1],b[1]];default:if("z"in b&&"x"in b){if(typeof b.x!==typeof b.y)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec3: "+b);return[b.x,
b.y,b.z]}}throw new GLMJSError("unrecognized object passed to GLM.vec3: "+b);},object2:function(b,d){if(b instanceof GLM.vec2)return[b.x,b.y,d];throw new GLMJSError("unrecognized object passed to GLM.vec3(o,z): "+[b,d]);}});
GLM.vec4=GLM_template.GLMType("vec4",{name:"fvec4",identity:[0,0,0,0],components:["xyzw","0123","rgba"],undefined0:function(){return this.identity},number1:function(b){return[b,b,b,b]},number2:function(b,d){return[b,d,d,d]},number3:function(b,d,e){return[b,d,e,e]},number4:function(b,d,e,h){return[b,d,e,h]},object1:function(b){if(b)switch(b.length){case 4:return[b[0],b[1],b[2],b[3]];case 3:return[b[0],b[1],b[2],b[2]];case 2:return[b[0],b[1],b[1],b[1]];default:if("w"in b&&"x"in b){if(typeof b.x!==typeof b.w)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec4: "+
b);return[b.x,b.y,b.z,b.w]}}throw new GLMJSError("unrecognized object passed to GLM.vec4: "+[b,b&&b.$type]);},object2:function(b,d){if(b instanceof GLM.vec3)return[b.x,b.y,b.z,d];throw new GLMJSError("unrecognized object passed to GLM.vec4(o,w): "+[b,d]);},object3:function(b,d,e){if(b instanceof GLM.vec2)return[b.x,b.y,d,e];throw new GLMJSError("unrecognized object passed to GLM.vec4(o,z,w): "+[b,d,e]);}});
GLM.uvec4=GLM_template.GLMType("uvec4",{name:"uvec4",identity:[0,0,0,0],components:["xyzw","0123","rgba"],_clamp:function(b){return~~glm._clamp(b,0,Infinity)},undefined0:function(){return this.identity},number1:function(b){b=this._clamp(b);return[b,b,b,b]},number2:function(b,d){b=this._clamp(b);d=this._clamp(d);return[b,d,d,d]},number3:function(b,d,e){b=this._clamp(b);d=this._clamp(d);e=this._clamp(e);return[b,d,e,e]},number4:function(b,d,e,h){return[b,d,e,h].map(this._clamp)},object1:function(b){if(b)switch(b.length){case 4:return[b[0],
b[1],b[2],b[3]].map(this._clamp);case 3:return[b[0],b[1],b[2],b[2]].map(this._clamp);case 2:return[b[0],b[1],b[1],b[1]].map(this._clamp);default:if("w"in b&&"x"in b)return[b.x,b.y,b.z,b.w].map(this._clamp)}throw new GLMJSError("unrecognized object passed to GLM.uvec4: "+[b,b&&b.$type]);},object2:function(b,d){if(b instanceof GLM.vec3)return[b.x,b.y,b.z,d].map(this._clamp);throw new GLMJSError("unrecognized object passed to GLM.uvec4(o,w): "+[b,d]);}});
GLM.mat3=GLM_template.GLMType("mat3",{name:"mat3x3",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(b){return 1===b?this.identity:[b,0,0,0,b,0,0,0,b]},number9:function(){return arguments},object1:function(b){if(b){var d=b.elements||b;if(16===d.length)return[d[0],d[1],d[2],d[4],d[5],d[6],d[8],d[9],d[10]];if(9===d.length)return d}throw new GLMJSError("unrecognized object passed to GLM.mat3: "+b);},object3:function(b,d,e){return[b,d,e].map(glm.$to_array).reduce(function(b,
d){return b.concat(d)})}});
GLM.mat4=GLM_template.GLMType("mat4",{name:"mat4x4",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number16:function(){return arguments},number1:function(b){return 1===b?this.identity:[b,0,0,0,0,b,0,0,0,0,b,0,0,0,0,b]},object1:function(b){var d;if(b){if(b instanceof GLM.quat||"quat"===b.$type)return GLM.$outer.mat4_array_from_quat(b);d=b.elements||b;if(9===d.length)return[d[0],d[1],d[2],0,d[3],d[4],d[5],0,d[6],d[7],d[8],0,0,0,0,1];if(16===d.length)return d}throw new GLMJSError("unrecognized object passed to GLM.mat4: "+
[b,d&&d.length]);}});
GLM.quat=GLM_template.GLMType("quat",{identity:[0,0,0,1],components:["xyzw","0123"],undefined0:function(){return this.identity},number1:function(b){if(1!==b)throw Error("only quat(1) syntax supported for quat(number1 args)...");return this.identity},number4:function(b,d,e,h){return[d,e,h,b]},object1:function(b){if(b){if(b instanceof GLM.mat4)return GLM.$outer.quat_array_from_mat4(b);if(4===b.length)return[b[0],b[1],b[2],b[3]];if(b instanceof GLM.quat)return[b.x,b.y,b.z,b.w];if(b instanceof GLM.vec3)return GLM.$outer.quat_array_from_zyx(b);
if("w"in b&&"x"in b)return[b.x,b.y,b.z,b.w]}throw new GLMJSError("unrecognized object passed to GLM.quat.object1: "+[b,b&&b.$type,typeof b,b&&b.constructor]);}});
(function(){var b=function(b,d,f){var k=[0,1,2,3].map(function(b){return{enumerable:f,get:function(){return this.elements[b]},set:function(d){this.elements[b]=d}}});d.forEach(function(d,f){Object.defineProperty(b.prototype,d,k[f])});if(isNaN(d[0])&&!/^_/.test(d[0])){do(function(d,f,h){Object.defineProperty(b.prototype,d,{enumerable:!1,get:function(){return new GLM[f](this.elements.subarray(0*h,1*h))},set:function(b){return(new GLM[f](this.elements.subarray(0*h,1*h)))["="](b)}})})(d.join(""),b.prototype.$type.replace(/[1-9]$/,
d.length),d.length);while(d[1]!=d.pop())}};b(GLM.vec2,["x","y"],!0);b(GLM.vec3,["x","y","z"],!0);b(GLM.vec3,["r","g","b"]);b(GLM.vec4,["x","y","z","w"],!0);b(GLM.vec4,["r","g","b","a"]);b(GLM.quat,["x","y","z","w"],!0);b(GLM.uvec4,["x","y","z","w"],!0);b(GLM.uvec4,["0","1","2","3"]);Object.defineProperty(GLM.quat.prototype,"_x",{get:function(){throw Error("erroneous quat._x access");}});[2,3,4].forEach(function(d){d=GLM["vec"+d];b(d,d.$.identity.map(function(b,d){return d}))});var d=Float32Array.BYTES_PER_ELEMENT;
GLM.$partition=function(b,h,f,k){if(void 0===f)throw new GLMJSError("nrows is undefined");var l=h.$.identity.length;f=f||l;for(var j=function(b){GLM.$DEBUG&&GLM.$outer.console.debug("CACHEDBG: "+b)},r=d*l,m=0;m<f;m++)(function(d){var f=d*r,m=k&&k+d,C=d*l;Object.defineProperty(b,d,{configurable:!0,enumerable:!0,set:function(f){if(f instanceof h)this.elements.set(f.elements,C);else if(f&&f.length===l)this.elements.set(f,C);else throw new GLMJSError("unsupported argtype to "+(b&&b.$type)+"["+d+"] setter: "+
[typeof f,f]);},get:function(){if(k){if(this[m])return d||j("cache hit "+m),Object.defineProperty(this,d,{configurable:!0,enumerable:!1,value:this[m]}),this[m];d||j("cache miss "+m)}var b,e=new h(b=new Float32Array(this.elements.buffer,this.elements.byteOffset+f,l));if(e.elements!==b)throw 5;k&&Object.defineProperty(this,m,{configurable:!0,enumerable:!1,value:e});return e}})})(m)};GLM.$partition(GLM.mat4.prototype,GLM.vec4,4,"_cache_");GLM.$partition(GLM.mat3.prototype,GLM.vec3,3,"_cache_")})();
GLM.$dumpTypes=function(b){for(var d in GLM)GLM[d].componentLength&&b("GLM."+d,JSON.stringify({"#type":GLM[d].prototype.$type_name,"#floats":GLM[d].componentLength,"#bytes":GLM[d].BYTES_PER_ELEMENT}))};
GLM.$init=function(b){b.prefix&&(GLMJS_PREFIX=b.prefix);var d=b.log||function(){};try{d("GLM-js: ENV: "+_ENV._VERSION)}catch(e){}d("GLM-JS: initializing: "+JSON.stringify(b,0,2));d(JSON.stringify({functions:Object.keys(GLM.$outer.functions)}));GLM.$outer.vec3_eulerAngles=GLM.$outer.vec3_eulerAngles||GLM.$outer._vec3_eulerAngles;GLM.$symbols=[];GLM.$types=[];for(var h in GLM)"function"===typeof GLM[h]&&(/^[a-z]/.test(h)&&GLM.$symbols.push(h),"$type"in GLM[h].prototype&&GLM.$types.push(h));GLM.$types.forEach(function(b){var d=
GLM[b].prototype.$type,e;for(e in GLM.$outer.functions){var h=GLM.$outer.functions[e];h.$op&&(GLM.$DEBUG&&GLM.$outer.console.debug("mapping operator<"+d+"> "+e+" / "+h.$op),GLM[b].prototype[e]=h,GLM[b].prototype[h.$op]=h)}});d("GLM-JS: "+GLM.version+" emulating GLM_VERSION="+GLM.GLM_VERSION+" vendor_name="+b.vendor_name+" vendor_version="+b.vendor_version);glm.vendor=b};
GLM.using_namespace=function(b){GLM.$DEBUG&&GLM.$outer.console.debug("GLM.using_namespace munges globals; it should probably not be used!");var d=[],e=GLM.$symbols,h=e.filter(function(b){return eval("1, 'undefined' !== typeof "+b)});e.map(function(b){var e="GLM.using_namespace."+b+"=undefined;delete GLM.using_namespace."+b+";";try{GLM.using_namespace[b]=eval("1,"+b),d.push(new Function("",b+"=GLM.using_namespace."+b+";"+e))}catch(h){d.push(new Function("",b+"=undefined;delete "+b+";"+e))}eval(b+"=GLM."+
b)});b=b();d.map(function(b){b()});e=e.filter(function(b){return eval("1, 'undefined' !== typeof "+b)});if(h.length!==e.length)throw Error(JSON.stringify({before:h,after:e,usn:Object.keys(GLM.using_namespace)}));return b};try{module.exports=GLM}catch(e$$17){}GLMAT.mat4.exists;glm=GLM;
var DLL={_version:"0.0.1",_name:"glm.gl-matrix.js",_glm_version:glm.version,prefix:"glm-js[glMatrix]: ",vendor_version:GLMAT.VERSION,vendor_name:"glMatrix",statics:{mat4_perspective:function(b,d,e,h){return new glm.mat4(GLMAT.mat4.perspective(new Float32Array(16),b,d,e,h))},mat4_angleAxis:function(b,d){var e=GLMAT.quat.setAxisAngle(new Float32Array(4),d,b);return new glm.mat4(GLMAT.mat4.fromQuat(new Float32Array(16),e))},quat_angleAxis:function(b,d){return new glm.quat(GLMAT.quat.setAxisAngle(new Float32Array(4),
d,b))},mat4_translation:function(b){var d=new glm.mat4;GLMAT.mat4.translate(d.elements,d.elements,b.elements);return d},mat4_scale:function(b){var d=new glm.mat4;GLMAT.mat4.scale(d.elements,d.elements,b.elements);return d},vec3_eulerAngles:function(b){var d=new Float32Array(16);GLMAT.mat4.fromQuat(d,b.elements);b=d[0];var e=d[4],h=d[1],f=d[5],k=d[2],l=d[6],d=d[10],j=new glm.vec3;j.y=Math.asin(-glm.clamp(k,-1,1));0.99999>Math.abs(k)?(j.x=Math.atan2(l,d),j.z=Math.atan2(h,b)):(j.x=0,j.z=Math.atan2(-e,
f));return j},mat4_array_from_quat:function(b){return GLMAT.mat4.fromQuat(new Float32Array(16),b.elements)},quat_array_from_mat4:function(b){b=GLMAT.mat3.fromMat4(new Float32Array(9),b.elements);return GLMAT.quat.fromMat3(new Float32Array(4),b)}},operations:{mul:{$op:"*","quat,vec3":function(b,d){return new glm.vec3(GLMAT.vec3.transformQuat(new Float32Array(3),d.elements,b.elements))},"vec3,quat":function(b,d){return this["quat,vec3"](d,b)},"vec4,quat":function(b,d){return new glm.vec4(this["quat,vec3"](d,
b),1)},"vec<N>,float":function(b,d){return new glm.vecN(GLMAT.vecN.scale(new Float32Array(N),b.elements,d))},"mat4,vec4":function(b,d){return new glm.vec4(GLMAT.vec4.transformMat4(new Float32Array(4),d.elements,b.elements))},"mat4,mat4":function(b,d){return new glm.mat4(GLMAT.mat4.mul(new Float32Array(16),b.elements,d.elements))},"quat,quat":function(b,d){return new glm.quat(GLMAT.quat.multiply(new Float32Array(4),b.elements,d.elements))}},mul_eq:{$op:"*=","mat4,mat4":function(b,d){GLMAT.mat4.multiply(b.elements,
b.elements,d.elements);return b},"vec<N>,float":function(b,d){return GLMAT.vecN.scale(b,b,d)},"quat,quat":function(b,d){GLMAT.quat.multiply(b.elements,b.elements,d.elements);return b}}},functions:{mix:{"quat,quat":function(b,d,e){return new glm.quat(GLMAT.quat.slerp(new Float32Array(4),b.elements,d.elements,e))}}},calculators:{normalize:{"vec<N>":function(b){return new glm.vecN(GLMAT.vecN.normalize(new Float32Array(N),b))},quat:function(b){return new glm.quat(GLMAT.quat.normalize(new Float32Array(4),
b.elements))}},length:{quat:function(b){return GLMAT.quat.length(b.elements)},"vec<N>":function(b){return GLMAT.vecN.length(b.elements)}},length2:{quat:function(b){return GLMAT.quat.squaredLength(b.elements)},"vec<N>":function(b){return GLMAT.vecN.squaredLength(b.elements)}},inverse:{quat:function(b){return new glm.quat(GLMAT.quat.invert(new Float32Array(4),b.elements))},mat4:function(b){return new glm.mat4(GLMAT.mat4.invert(new Float32Array(16),b.elements))}},transpose:{mat4:function(b){return new glm.mat4(GLMAT.mat4.transpose(new Float32Array(16),
b.elements))}}}};glm.$outer.$import(DLL);try{module.exports=glm}catch(e$$18){};
