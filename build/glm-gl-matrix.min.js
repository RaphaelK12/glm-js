GLMAT_VERSION="2.2.2";
(function(c){var e;"undefined"===typeof exports?"function"==typeof define&&"object"==typeof define.amd&&define.amd?(e={},define(function(){return e})):e="undefined"!==typeof window?window:c:e=exports;c=e;c.VERSION=GLMAT_VERSION;if(!i)var i=1E-6;if(!h)var h="undefined"!==typeof Float32Array?Float32Array:Array;if(!n)var n=Math.random;var g={setMatrixArrayType:function(a){h=a}};"undefined"!==typeof c&&(c.glMatrix=g);var v=Math.PI/180;g.toRadian=function(a){return a*v};g={create:function(){var a=new h(2);
a[0]=0;a[1]=0;return a},clone:function(a){var b=new h(2);b[0]=a[0];b[1]=a[1];return b},fromValues:function(a,b){var d=new h(2);d[0]=a;d[1]=b;return d},copy:function(a,b){a[0]=b[0];a[1]=b[1];return a},set:function(a,b,d){a[0]=b;a[1]=d;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];return a}};g.sub=g.subtract;g.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];return a};g.mul=g.multiply;g.divide=function(a,b,d){a[0]=
b[0]/d[0];a[1]=b[1]/d[1];return a};g.div=g.divide;g.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);return a};g.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);return a};g.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;return a};g.scaleAndAdd=function(a,b,d,k){a[0]=b[0]+d[0]*k;a[1]=b[1]+d[1]*k;return a};g.distance=function(a,b){var d=b[0]-a[0],k=b[1]-a[1];return Math.sqrt(d*d+k*k)};g.dist=g.distance;g.squaredDistance=function(a,b){var d=b[0]-a[0],k=b[1]-
a[1];return d*d+k*k};g.sqrDist=g.squaredDistance;g.length=function(a){var b=a[0];a=a[1];return Math.sqrt(b*b+a*a)};g.len=g.length;g.squaredLength=function(a){var b=a[0];a=a[1];return b*b+a*a};g.sqrLen=g.squaredLength;g.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];return a};g.inverse=function(a,b){a[0]=1/b[0];a[1]=1/b[1];return a};g.normalize=function(a,b){var d=b[0],k=b[1],d=d*d+k*k;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d);return a};g.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]};g.cross=function(a,
b,d){b=b[0]*d[1]-b[1]*d[0];a[0]=a[1]=0;a[2]=b;return a};g.lerp=function(a,b,d,k){var c=b[0];b=b[1];a[0]=c+k*(d[0]-c);a[1]=b+k*(d[1]-b);return a};g.random=function(a,b){b=b||1;var d=2*n()*Math.PI;a[0]=Math.cos(d)*b;a[1]=Math.sin(d)*b;return a};g.transformMat2=function(a,b,d){var k=b[0];b=b[1];a[0]=d[0]*k+d[2]*b;a[1]=d[1]*k+d[3]*b;return a};g.transformMat2d=function(a,b,d){var k=b[0];b=b[1];a[0]=d[0]*k+d[2]*b+d[4];a[1]=d[1]*k+d[3]*b+d[5];return a};g.transformMat3=function(a,b,d){var k=b[0];b=b[1];a[0]=
d[0]*k+d[3]*b+d[6];a[1]=d[1]*k+d[4]*b+d[7];return a};g.transformMat4=function(a,b,d){var k=b[0];b=b[1];a[0]=d[0]*k+d[4]*b+d[12];a[1]=d[1]*k+d[5]*b+d[13];return a};var s=g.create();g.forEach=function(a,b,d,k,c,f){b||(b=2);d||(d=0);for(k=k?Math.min(k*b+d,a.length):a.length;d<k;d+=b)s[0]=a[d],s[1]=a[d+1],c(s,s,f),a[d]=s[0],a[d+1]=s[1];return a};g.str=function(a){return"vec2("+a[0]+", "+a[1]+")"};"undefined"!==typeof c&&(c.vec2=g);var q={create:function(){var a=new h(3);a[0]=0;a[1]=0;a[2]=0;return a},
clone:function(a){var b=new h(3);b[0]=a[0];b[1]=a[1];b[2]=a[2];return b},fromValues:function(a,b,d){var k=new h(3);k[0]=a;k[1]=b;k[2]=d;return k},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];return a},set:function(a,b,d,k){a[0]=b;a[1]=d;a[2]=k;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];return a}};q.sub=q.subtract;q.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];
return a};q.mul=q.multiply;q.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];return a};q.div=q.divide;q.min=function(a,b,d){a[0]=Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);return a};q.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);return a};q.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;return a};q.scaleAndAdd=function(a,b,d,k){a[0]=b[0]+d[0]*k;a[1]=b[1]+d[1]*k;a[2]=b[2]+d[2]*k;return a};q.distance=
function(a,b){var d=b[0]-a[0],k=b[1]-a[1],c=b[2]-a[2];return Math.sqrt(d*d+k*k+c*c)};q.dist=q.distance;q.squaredDistance=function(a,b){var d=b[0]-a[0],k=b[1]-a[1],c=b[2]-a[2];return d*d+k*k+c*c};q.sqrDist=q.squaredDistance;q.length=function(a){var b=a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};q.len=q.length;q.squaredLength=function(a){var b=a[0],d=a[1];a=a[2];return b*b+d*d+a*a};q.sqrLen=q.squaredLength;q.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];return a};q.inverse=function(a,b){a[0]=
1/b[0];a[1]=1/b[1];a[2]=1/b[2];return a};q.normalize=function(a,b){var d=b[0],k=b[1],c=b[2],d=d*d+k*k+c*c;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d);return a};q.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};q.cross=function(a,b,d){var k=b[0],c=b[1];b=b[2];var f=d[0],p=d[1];d=d[2];a[0]=c*d-b*p;a[1]=b*f-k*d;a[2]=k*p-c*f;return a};q.lerp=function(a,b,d,k){var c=b[0],f=b[1];b=b[2];a[0]=c+k*(d[0]-c);a[1]=f+k*(d[1]-f);a[2]=b+k*(d[2]-b);return a};q.random=function(a,b){b=b||1;
var d=2*n()*Math.PI,k=2*n()-1,c=Math.sqrt(1-k*k)*b;a[0]=Math.cos(d)*c;a[1]=Math.sin(d)*c;a[2]=k*b;return a};q.transformMat4=function(a,b,d){var k=b[0],c=b[1];b=b[2];var f=d[3]*k+d[7]*c+d[11]*b+d[15],f=f||1;a[0]=(d[0]*k+d[4]*c+d[8]*b+d[12])/f;a[1]=(d[1]*k+d[5]*c+d[9]*b+d[13])/f;a[2]=(d[2]*k+d[6]*c+d[10]*b+d[14])/f;return a};q.transformMat3=function(a,b,d){var k=b[0],c=b[1];b=b[2];a[0]=k*d[0]+c*d[3]+b*d[6];a[1]=k*d[1]+c*d[4]+b*d[7];a[2]=k*d[2]+c*d[5]+b*d[8];return a};q.transformQuat=function(a,b,d){var k=
b[0],c=b[1],f=b[2];b=d[0];var p=d[1],e=d[2];d=d[3];var j=d*k+p*f-e*c,B=d*c+e*k-b*f,C=d*f+b*c-p*k,k=-b*k-p*c-e*f;a[0]=j*d+k*-b+B*-e-C*-p;a[1]=B*d+k*-p+C*-b-j*-e;a[2]=C*d+k*-e+j*-p-B*-b;return a};q.rotateX=function(a,b,d,k){var c=[],f=[];c[0]=b[0]-d[0];c[1]=b[1]-d[1];c[2]=b[2]-d[2];f[0]=c[0];f[1]=c[1]*Math.cos(k)-c[2]*Math.sin(k);f[2]=c[1]*Math.sin(k)+c[2]*Math.cos(k);a[0]=f[0]+d[0];a[1]=f[1]+d[1];a[2]=f[2]+d[2];return a};q.rotateY=function(a,b,d,k){var c=[],f=[];c[0]=b[0]-d[0];c[1]=b[1]-d[1];c[2]=
b[2]-d[2];f[0]=c[2]*Math.sin(k)+c[0]*Math.cos(k);f[1]=c[1];f[2]=c[2]*Math.cos(k)-c[0]*Math.sin(k);a[0]=f[0]+d[0];a[1]=f[1]+d[1];a[2]=f[2]+d[2];return a};q.rotateZ=function(a,b,d,k){var c=[],f=[];c[0]=b[0]-d[0];c[1]=b[1]-d[1];c[2]=b[2]-d[2];f[0]=c[0]*Math.cos(k)-c[1]*Math.sin(k);f[1]=c[0]*Math.sin(k)+c[1]*Math.cos(k);f[2]=c[2];a[0]=f[0]+d[0];a[1]=f[1]+d[1];a[2]=f[2]+d[2];return a};var D=q.create();q.forEach=function(a,b,d,k,c,f){b||(b=3);d||(d=0);for(k=k?Math.min(k*b+d,a.length):a.length;d<k;d+=b)D[0]=
a[d],D[1]=a[d+1],D[2]=a[d+2],c(D,D,f),a[d]=D[0],a[d+1]=D[1],a[d+2]=D[2];return a};q.str=function(a){return"vec3("+a[0]+", "+a[1]+", "+a[2]+")"};"undefined"!==typeof c&&(c.vec3=q);var l={create:function(){var a=new h(4);a[0]=0;a[1]=0;a[2]=0;a[3]=0;return a},clone:function(a){var b=new h(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},fromValues:function(a,b,d,k){var c=new h(4);c[0]=a;c[1]=b;c[2]=d;c[3]=k;return c},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];return a},set:function(a,
b,d,k,c){a[0]=b;a[1]=d;a[2]=k;a[3]=c;return a},add:function(a,b,d){a[0]=b[0]+d[0];a[1]=b[1]+d[1];a[2]=b[2]+d[2];a[3]=b[3]+d[3];return a},subtract:function(a,b,d){a[0]=b[0]-d[0];a[1]=b[1]-d[1];a[2]=b[2]-d[2];a[3]=b[3]-d[3];return a}};l.sub=l.subtract;l.multiply=function(a,b,d){a[0]=b[0]*d[0];a[1]=b[1]*d[1];a[2]=b[2]*d[2];a[3]=b[3]*d[3];return a};l.mul=l.multiply;l.divide=function(a,b,d){a[0]=b[0]/d[0];a[1]=b[1]/d[1];a[2]=b[2]/d[2];a[3]=b[3]/d[3];return a};l.div=l.divide;l.min=function(a,b,d){a[0]=
Math.min(b[0],d[0]);a[1]=Math.min(b[1],d[1]);a[2]=Math.min(b[2],d[2]);a[3]=Math.min(b[3],d[3]);return a};l.max=function(a,b,d){a[0]=Math.max(b[0],d[0]);a[1]=Math.max(b[1],d[1]);a[2]=Math.max(b[2],d[2]);a[3]=Math.max(b[3],d[3]);return a};l.scale=function(a,b,d){a[0]=b[0]*d;a[1]=b[1]*d;a[2]=b[2]*d;a[3]=b[3]*d;return a};l.scaleAndAdd=function(a,b,d,k){a[0]=b[0]+d[0]*k;a[1]=b[1]+d[1]*k;a[2]=b[2]+d[2]*k;a[3]=b[3]+d[3]*k;return a};l.distance=function(a,b){var d=b[0]-a[0],k=b[1]-a[1],c=b[2]-a[2],f=b[3]-
a[3];return Math.sqrt(d*d+k*k+c*c+f*f)};l.dist=l.distance;l.squaredDistance=function(a,b){var d=b[0]-a[0],k=b[1]-a[1],c=b[2]-a[2],f=b[3]-a[3];return d*d+k*k+c*c+f*f};l.sqrDist=l.squaredDistance;l.length=function(a){var b=a[0],d=a[1],k=a[2];a=a[3];return Math.sqrt(b*b+d*d+k*k+a*a)};l.len=l.length;l.squaredLength=function(a){var b=a[0],d=a[1],k=a[2];a=a[3];return b*b+d*d+k*k+a*a};l.sqrLen=l.squaredLength;l.negate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=-b[3];return a};l.inverse=function(a,
b){a[0]=1/b[0];a[1]=1/b[1];a[2]=1/b[2];a[3]=1/b[3];return a};l.normalize=function(a,b){var d=b[0],k=b[1],c=b[2],f=b[3],d=d*d+k*k+c*c+f*f;0<d&&(d=1/Math.sqrt(d),a[0]=b[0]*d,a[1]=b[1]*d,a[2]=b[2]*d,a[3]=b[3]*d);return a};l.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]+a[3]*b[3]};l.lerp=function(a,b,d,c){var t=b[0],f=b[1],p=b[2];b=b[3];a[0]=t+c*(d[0]-t);a[1]=f+c*(d[1]-f);a[2]=p+c*(d[2]-p);a[3]=b+c*(d[3]-b);return a};l.random=function(a,b){b=b||1;a[0]=n();a[1]=n();a[2]=n();a[3]=n();l.normalize(a,
a);l.scale(a,a,b);return a};l.transformMat4=function(a,b,d){var c=b[0],t=b[1],f=b[2];b=b[3];a[0]=d[0]*c+d[4]*t+d[8]*f+d[12]*b;a[1]=d[1]*c+d[5]*t+d[9]*f+d[13]*b;a[2]=d[2]*c+d[6]*t+d[10]*f+d[14]*b;a[3]=d[3]*c+d[7]*t+d[11]*f+d[15]*b;return a};l.transformQuat=function(a,b,d){var c=b[0],t=b[1],f=b[2];b=d[0];var p=d[1],e=d[2];d=d[3];var j=d*c+p*f-e*t,B=d*t+e*c-b*f,C=d*f+b*t-p*c,c=-b*c-p*t-e*f;a[0]=j*d+c*-b+B*-e-C*-p;a[1]=B*d+c*-p+C*-b-j*-e;a[2]=C*d+c*-e+j*-p-B*-b;return a};var E=l.create();l.forEach=function(a,
b,d,c,t,f){b||(b=4);d||(d=0);for(c=c?Math.min(c*b+d,a.length):a.length;d<c;d+=b)E[0]=a[d],E[1]=a[d+1],E[2]=a[d+2],E[3]=a[d+3],t(E,E,f),a[d]=E[0],a[d+1]=E[1],a[d+2]=E[2],a[d+3]=E[3];return a};l.str=function(a){return"vec4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof c&&(c.vec4=l);g={create:function(){var a=new h(4);a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},clone:function(a){var b=new h(4);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];
a[3]=b[3];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=1;return a},transpose:function(a,b){if(a===b){var d=b[1];a[1]=b[2];a[2]=d}else a[0]=b[0],a[1]=b[2],a[2]=b[1],a[3]=b[3];return a},invert:function(a,b){var d=b[0],c=b[1],t=b[2],f=b[3],p=d*f-t*c;if(!p)return null;p=1/p;a[0]=f*p;a[1]=-c*p;a[2]=-t*p;a[3]=d*p;return a},adjoint:function(a,b){var d=b[0];a[0]=b[3];a[1]=-b[1];a[2]=-b[2];a[3]=d;return a},determinant:function(a){return a[0]*a[3]-a[2]*a[1]},multiply:function(a,b,d){var c=b[0],
t=b[1],f=b[2];b=b[3];var p=d[0],e=d[1],j=d[2];d=d[3];a[0]=c*p+f*e;a[1]=t*p+b*e;a[2]=c*j+f*d;a[3]=t*j+b*d;return a}};g.mul=g.multiply;g.rotate=function(a,b,d){var c=b[0],t=b[1],f=b[2];b=b[3];var p=Math.sin(d);d=Math.cos(d);a[0]=c*d+f*p;a[1]=t*d+b*p;a[2]=c*-p+f*d;a[3]=t*-p+b*d;return a};g.scale=function(a,b,d){var c=b[1],t=b[2],f=b[3],p=d[0];d=d[1];a[0]=b[0]*p;a[1]=c*p;a[2]=t*d;a[3]=f*d;return a};g.str=function(a){return"mat2("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};g.frob=function(a){return Math.sqrt(Math.pow(a[0],
2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2))};g.LDU=function(a,b,d,c){a[2]=c[2]/c[0];d[0]=c[0];d[1]=c[1];d[3]=c[3]-a[2]*d[1];return[a,b,d]};"undefined"!==typeof c&&(c.mat2=g);g={create:function(){var a=new h(6);a[0]=1;a[1]=0;a[2]=0;a[3]=1;a[4]=0;a[5]=0;return a},clone:function(a){var b=new h(6);b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=
0;a[3]=1;a[4]=0;a[5]=0;return a},invert:function(a,b){var d=b[0],c=b[1],t=b[2],f=b[3],p=b[4],e=b[5],j=d*f-c*t;if(!j)return null;j=1/j;a[0]=f*j;a[1]=-c*j;a[2]=-t*j;a[3]=d*j;a[4]=(t*e-f*p)*j;a[5]=(c*p-d*e)*j;return a},determinant:function(a){return a[0]*a[3]-a[1]*a[2]},multiply:function(a,b,d){var c=b[0],t=b[1],f=b[2],p=b[3],e=b[4];b=b[5];var j=d[0],B=d[1],C=d[2],m=d[3],g=d[4];d=d[5];a[0]=c*j+f*B;a[1]=t*j+p*B;a[2]=c*C+f*m;a[3]=t*C+p*m;a[4]=c*g+f*d+e;a[5]=t*g+p*d+b;return a}};g.mul=g.multiply;g.rotate=
function(a,b,d){var c=b[0],t=b[1],f=b[2],e=b[3],w=b[4];b=b[5];var j=Math.sin(d);d=Math.cos(d);a[0]=c*d+f*j;a[1]=t*d+e*j;a[2]=c*-j+f*d;a[3]=t*-j+e*d;a[4]=w;a[5]=b;return a};g.scale=function(a,b,d){var c=b[1],t=b[2],f=b[3],e=b[4],w=b[5],j=d[0];d=d[1];a[0]=b[0]*j;a[1]=c*j;a[2]=t*d;a[3]=f*d;a[4]=e;a[5]=w;return a};g.translate=function(a,b,d){var c=b[0],t=b[1],f=b[2],e=b[3],w=b[4];b=b[5];var j=d[0];d=d[1];a[0]=c;a[1]=t;a[2]=f;a[3]=e;a[4]=c*j+f*d+w;a[5]=t*j+e*d+b;return a};g.str=function(a){return"mat2d("+
a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+")"};g.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+1)};"undefined"!==typeof c&&(c.mat2d=g);g={create:function(){var a=new h(9);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},fromMat4:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[4];a[4]=b[5];a[5]=b[6];a[6]=b[8];a[7]=b[9];a[8]=b[10];return a},clone:function(a){var b=new h(9);
b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=1;a[5]=0;a[6]=0;a[7]=0;a[8]=1;return a},transpose:function(a,b){if(a===b){var d=b[1],c=b[2],t=b[5];a[1]=b[3];a[2]=b[6];a[3]=d;a[5]=b[7];a[6]=c;a[7]=t}else a[0]=b[0],a[1]=b[3],a[2]=b[6],a[3]=b[1],a[4]=b[4],a[5]=b[7],a[6]=b[2],a[7]=
b[5],a[8]=b[8];return a},invert:function(a,b){var d=b[0],c=b[1],t=b[2],f=b[3],e=b[4],w=b[5],j=b[6],B=b[7],g=b[8],m=g*e-w*B,i=-g*f+w*j,K=B*f-e*j,h=d*m+c*i+t*K;if(!h)return null;h=1/h;a[0]=m*h;a[1]=(-g*c+t*B)*h;a[2]=(w*c-t*e)*h;a[3]=i*h;a[4]=(g*d-t*j)*h;a[5]=(-w*d+t*f)*h;a[6]=K*h;a[7]=(-B*d+c*j)*h;a[8]=(e*d-c*f)*h;return a},adjoint:function(a,b){var d=b[0],c=b[1],t=b[2],f=b[3],e=b[4],w=b[5],j=b[6],B=b[7],g=b[8];a[0]=e*g-w*B;a[1]=t*B-c*g;a[2]=c*w-t*e;a[3]=w*j-f*g;a[4]=d*g-t*j;a[5]=t*f-d*w;a[6]=f*B-e*
j;a[7]=c*j-d*B;a[8]=d*e-c*f;return a},determinant:function(a){var b=a[3],d=a[4],c=a[5],t=a[6],f=a[7],e=a[8];return a[0]*(e*d-c*f)+a[1]*(-e*b+c*t)+a[2]*(f*b-d*t)},multiply:function(a,b,d){var c=b[0],t=b[1],f=b[2],e=b[3],w=b[4],j=b[5],B=b[6],g=b[7];b=b[8];var m=d[0],i=d[1],h=d[2],n=d[3],l=d[4],q=d[5],u=d[6],x=d[7];d=d[8];a[0]=m*c+i*e+h*B;a[1]=m*t+i*w+h*g;a[2]=m*f+i*j+h*b;a[3]=n*c+l*e+q*B;a[4]=n*t+l*w+q*g;a[5]=n*f+l*j+q*b;a[6]=u*c+x*e+d*B;a[7]=u*t+x*w+d*g;a[8]=u*f+x*j+d*b;return a}};g.mul=g.multiply;
g.translate=function(a,b,d){var c=b[0],e=b[1],f=b[2],p=b[3],w=b[4],j=b[5],g=b[6],C=b[7];b=b[8];var m=d[0];d=d[1];a[0]=c;a[1]=e;a[2]=f;a[3]=p;a[4]=w;a[5]=j;a[6]=m*c+d*p+g;a[7]=m*e+d*w+C;a[8]=m*f+d*j+b;return a};g.rotate=function(a,b,d){var c=b[0],e=b[1],f=b[2],p=b[3],w=b[4],j=b[5],g=b[6],C=b[7];b=b[8];var m=Math.sin(d);d=Math.cos(d);a[0]=d*c+m*p;a[1]=d*e+m*w;a[2]=d*f+m*j;a[3]=d*p-m*c;a[4]=d*w-m*e;a[5]=d*j-m*f;a[6]=g;a[7]=C;a[8]=b;return a};g.scale=function(a,b,d){var c=d[0];d=d[1];a[0]=c*b[0];a[1]=
c*b[1];a[2]=c*b[2];a[3]=d*b[3];a[4]=d*b[4];a[5]=d*b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];return a};g.fromMat2d=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=0;a[3]=b[2];a[4]=b[3];a[5]=0;a[6]=b[4];a[7]=b[5];a[8]=1;return a};g.fromQuat=function(a,b){var d=b[0],c=b[1],e=b[2],f=b[3],p=d+d,w=c+c,j=e+e,d=d*p,g=c*p,c=c*w,C=e*p,m=e*w,e=e*j,p=f*p,w=f*w,f=f*j;a[0]=1-c-e;a[3]=g-f;a[6]=C+w;a[1]=g+f;a[4]=1-d-e;a[7]=m-p;a[2]=C-w;a[5]=m+p;a[8]=1-d-c;return a};g.normalFromMat4=function(a,b){var d=b[0],c=b[1],e=b[2],f=b[3],
p=b[4],w=b[5],j=b[6],g=b[7],C=b[8],m=b[9],i=b[10],h=b[11],n=b[12],l=b[13],q=b[14],u=b[15],x=d*w-c*p,r=d*j-e*p,y=d*g-f*p,z=c*j-e*w,s=c*g-f*w,v=e*g-f*j,A=C*l-m*n,J=C*q-i*n,C=C*u-h*n,I=m*q-i*l,m=m*u-h*l,i=i*u-h*q,h=x*i-r*m+y*I+z*C-s*J+v*A;if(!h)return null;h=1/h;a[0]=(w*i-j*m+g*I)*h;a[1]=(j*C-p*i-g*J)*h;a[2]=(p*m-w*C+g*A)*h;a[3]=(e*m-c*i-f*I)*h;a[4]=(d*i-e*C+f*J)*h;a[5]=(c*C-d*m-f*A)*h;a[6]=(l*v-q*s+u*z)*h;a[7]=(q*y-n*v-u*r)*h;a[8]=(n*s-l*y+u*x)*h;return a};g.str=function(a){return"mat3("+a[0]+", "+
a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+")"};g.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2))};"undefined"!==typeof c&&(c.mat3=g);var A={create:function(){var a=new h(16);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a},clone:function(a){var b=new h(16);
b[0]=a[0];b[1]=a[1];b[2]=a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},copy:function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},identity:function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=
0;a[14]=0;a[15]=1;return a},transpose:function(a,b){if(a===b){var d=b[1],c=b[2],e=b[3],f=b[6],p=b[7],g=b[11];a[1]=b[4];a[2]=b[8];a[3]=b[12];a[4]=d;a[6]=b[9];a[7]=b[13];a[8]=c;a[9]=f;a[11]=b[14];a[12]=e;a[13]=p;a[14]=g}else a[0]=b[0],a[1]=b[4],a[2]=b[8],a[3]=b[12],a[4]=b[1],a[5]=b[5],a[6]=b[9],a[7]=b[13],a[8]=b[2],a[9]=b[6],a[10]=b[10],a[11]=b[14],a[12]=b[3],a[13]=b[7],a[14]=b[11],a[15]=b[15];return a},invert:function(a,b){var d=b[0],c=b[1],e=b[2],f=b[3],p=b[4],g=b[5],j=b[6],B=b[7],h=b[8],m=b[9],i=
b[10],n=b[11],l=b[12],q=b[13],r=b[14],u=b[15],x=d*g-c*p,s=d*j-e*p,y=d*B-f*p,z=c*j-e*g,v=c*B-f*g,A=e*B-f*j,D=h*q-m*l,J=h*r-i*l,I=h*u-n*l,E=m*r-i*q,F=m*u-n*q,G=i*u-n*r,H=x*G-s*F+y*E+z*I-v*J+A*D;if(!H)return null;H=1/H;a[0]=(g*G-j*F+B*E)*H;a[1]=(e*F-c*G-f*E)*H;a[2]=(q*A-r*v+u*z)*H;a[3]=(i*v-m*A-n*z)*H;a[4]=(j*I-p*G-B*J)*H;a[5]=(d*G-e*I+f*J)*H;a[6]=(r*y-l*A-u*s)*H;a[7]=(h*A-i*y+n*s)*H;a[8]=(p*F-g*I+B*D)*H;a[9]=(c*I-d*F-f*D)*H;a[10]=(l*v-q*y+u*x)*H;a[11]=(m*y-h*v-n*x)*H;a[12]=(g*J-p*E-j*D)*H;a[13]=(d*
E-c*J+e*D)*H;a[14]=(q*s-l*z-r*x)*H;a[15]=(h*z-m*s+i*x)*H;return a},adjoint:function(a,b){var d=b[0],c=b[1],e=b[2],f=b[3],p=b[4],g=b[5],j=b[6],h=b[7],i=b[8],m=b[9],n=b[10],l=b[11],q=b[12],r=b[13],s=b[14],u=b[15];a[0]=g*(n*u-l*s)-m*(j*u-h*s)+r*(j*l-h*n);a[1]=-(c*(n*u-l*s)-m*(e*u-f*s)+r*(e*l-f*n));a[2]=c*(j*u-h*s)-g*(e*u-f*s)+r*(e*h-f*j);a[3]=-(c*(j*l-h*n)-g*(e*l-f*n)+m*(e*h-f*j));a[4]=-(p*(n*u-l*s)-i*(j*u-h*s)+q*(j*l-h*n));a[5]=d*(n*u-l*s)-i*(e*u-f*s)+q*(e*l-f*n);a[6]=-(d*(j*u-h*s)-p*(e*u-f*s)+q*(e*
h-f*j));a[7]=d*(j*l-h*n)-p*(e*l-f*n)+i*(e*h-f*j);a[8]=p*(m*u-l*r)-i*(g*u-h*r)+q*(g*l-h*m);a[9]=-(d*(m*u-l*r)-i*(c*u-f*r)+q*(c*l-f*m));a[10]=d*(g*u-h*r)-p*(c*u-f*r)+q*(c*h-f*g);a[11]=-(d*(g*l-h*m)-p*(c*l-f*m)+i*(c*h-f*g));a[12]=-(p*(m*s-n*r)-i*(g*s-j*r)+q*(g*n-j*m));a[13]=d*(m*s-n*r)-i*(c*s-e*r)+q*(c*n-e*m);a[14]=-(d*(g*s-j*r)-p*(c*s-e*r)+q*(c*j-e*g));a[15]=d*(g*n-j*m)-p*(c*n-e*m)+i*(c*j-e*g);return a},determinant:function(a){var b=a[0],d=a[1],c=a[2],e=a[3],f=a[4],p=a[5],g=a[6],j=a[7],h=a[8],i=a[9],
m=a[10],n=a[11],l=a[12],q=a[13],r=a[14];a=a[15];return(b*p-d*f)*(m*a-n*r)-(b*g-c*f)*(i*a-n*q)+(b*j-e*f)*(i*r-m*q)+(d*g-c*p)*(h*a-n*l)-(d*j-e*p)*(h*r-m*l)+(c*j-e*g)*(h*q-i*l)},multiply:function(a,b,d){var c=b[0],e=b[1],f=b[2],p=b[3],g=b[4],j=b[5],h=b[6],i=b[7],m=b[8],n=b[9],l=b[10],q=b[11],r=b[12],s=b[13],u=b[14];b=b[15];var x=d[0],v=d[1],y=d[2],z=d[3];a[0]=x*c+v*g+y*m+z*r;a[1]=x*e+v*j+y*n+z*s;a[2]=x*f+v*h+y*l+z*u;a[3]=x*p+v*i+y*q+z*b;x=d[4];v=d[5];y=d[6];z=d[7];a[4]=x*c+v*g+y*m+z*r;a[5]=x*e+v*j+y*
n+z*s;a[6]=x*f+v*h+y*l+z*u;a[7]=x*p+v*i+y*q+z*b;x=d[8];v=d[9];y=d[10];z=d[11];a[8]=x*c+v*g+y*m+z*r;a[9]=x*e+v*j+y*n+z*s;a[10]=x*f+v*h+y*l+z*u;a[11]=x*p+v*i+y*q+z*b;x=d[12];v=d[13];y=d[14];z=d[15];a[12]=x*c+v*g+y*m+z*r;a[13]=x*e+v*j+y*n+z*s;a[14]=x*f+v*h+y*l+z*u;a[15]=x*p+v*i+y*q+z*b;return a}};A.mul=A.multiply;A.translate=function(a,b,d){var c=d[0],e=d[1];d=d[2];var f,p,g,j,h,i,m,n,l,q,r,s;b===a?(a[12]=b[0]*c+b[4]*e+b[8]*d+b[12],a[13]=b[1]*c+b[5]*e+b[9]*d+b[13],a[14]=b[2]*c+b[6]*e+b[10]*d+b[14],a[15]=
b[3]*c+b[7]*e+b[11]*d+b[15]):(f=b[0],p=b[1],g=b[2],j=b[3],h=b[4],i=b[5],m=b[6],n=b[7],l=b[8],q=b[9],r=b[10],s=b[11],a[0]=f,a[1]=p,a[2]=g,a[3]=j,a[4]=h,a[5]=i,a[6]=m,a[7]=n,a[8]=l,a[9]=q,a[10]=r,a[11]=s,a[12]=f*c+h*e+l*d+b[12],a[13]=p*c+i*e+q*d+b[13],a[14]=g*c+m*e+r*d+b[14],a[15]=j*c+n*e+s*d+b[15]);return a};A.scale=function(a,b,d){var c=d[0],e=d[1];d=d[2];a[0]=b[0]*c;a[1]=b[1]*c;a[2]=b[2]*c;a[3]=b[3]*c;a[4]=b[4]*e;a[5]=b[5]*e;a[6]=b[6]*e;a[7]=b[7]*e;a[8]=b[8]*d;a[9]=b[9]*d;a[10]=b[10]*d;a[11]=b[11]*
d;a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a};A.rotate=function(a,b,d,c){var e=c[0],f=c[1];c=c[2];var p=Math.sqrt(e*e+f*f+c*c),g,j,h,n,m,l,q,r,s,v,u,x,A,y,z,D,E,F,G,I;if(Math.abs(p)<i)return null;p=1/p;e*=p;f*=p;c*=p;g=Math.sin(d);j=Math.cos(d);h=1-j;d=b[0];p=b[1];n=b[2];m=b[3];l=b[4];q=b[5];r=b[6];s=b[7];v=b[8];u=b[9];x=b[10];A=b[11];y=e*e*h+j;z=f*e*h+c*g;D=c*e*h-f*g;E=e*f*h-c*g;F=f*f*h+j;G=c*f*h+e*g;I=e*c*h+f*g;e=f*c*h-e*g;f=c*c*h+j;a[0]=d*y+l*z+v*D;a[1]=p*y+q*z+u*D;a[2]=n*y+r*z+x*
D;a[3]=m*y+s*z+A*D;a[4]=d*E+l*F+v*G;a[5]=p*E+q*F+u*G;a[6]=n*E+r*F+x*G;a[7]=m*E+s*F+A*G;a[8]=d*I+l*e+v*f;a[9]=p*I+q*e+u*f;a[10]=n*I+r*e+x*f;a[11]=m*I+s*e+A*f;b!==a&&(a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);return a};A.rotateX=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var e=b[4],f=b[5],g=b[6],h=b[7],j=b[8],i=b[9],n=b[10],m=b[11];b!==a&&(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[4]=e*d+j*c;a[5]=f*d+i*c;a[6]=g*d+n*c;a[7]=h*d+m*c;a[8]=j*d-
e*c;a[9]=i*d-f*c;a[10]=n*d-g*c;a[11]=m*d-h*c;return a};A.rotateY=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var e=b[0],f=b[1],g=b[2],h=b[3],j=b[8],i=b[9],n=b[10],m=b[11];b!==a&&(a[4]=b[4],a[5]=b[5],a[6]=b[6],a[7]=b[7],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*d-j*c;a[1]=f*d-i*c;a[2]=g*d-n*c;a[3]=h*d-m*c;a[8]=e*c+j*d;a[9]=f*c+i*d;a[10]=g*c+n*d;a[11]=h*c+m*d;return a};A.rotateZ=function(a,b,d){var c=Math.sin(d);d=Math.cos(d);var e=b[0],f=b[1],g=b[2],h=b[3],j=b[4],i=b[5],n=b[6],m=
b[7];b!==a&&(a[8]=b[8],a[9]=b[9],a[10]=b[10],a[11]=b[11],a[12]=b[12],a[13]=b[13],a[14]=b[14],a[15]=b[15]);a[0]=e*d+j*c;a[1]=f*d+i*c;a[2]=g*d+n*c;a[3]=h*d+m*c;a[4]=j*d-e*c;a[5]=i*d-f*c;a[6]=n*d-g*c;a[7]=m*d-h*c;return a};A.fromRotationTranslation=function(a,b,d){var c=b[0],e=b[1],f=b[2],g=b[3],h=c+c,j=e+e,i=f+f;b=c*h;var n=c*j,c=c*i,m=e*j,e=e*i,f=f*i,h=g*h,j=g*j,g=g*i;a[0]=1-(m+f);a[1]=n+g;a[2]=c-j;a[3]=0;a[4]=n-g;a[5]=1-(b+f);a[6]=e+h;a[7]=0;a[8]=c+j;a[9]=e-h;a[10]=1-(b+m);a[11]=0;a[12]=d[0];a[13]=
d[1];a[14]=d[2];a[15]=1;return a};A.fromQuat=function(a,b){var d=b[0],c=b[1],e=b[2],f=b[3],g=d+d,h=c+c,j=e+e,d=d*g,i=c*g,c=c*h,n=e*g,m=e*h,e=e*j,g=f*g,h=f*h,f=f*j;a[0]=1-c-e;a[1]=i+f;a[2]=n-h;a[3]=0;a[4]=i-f;a[5]=1-d-e;a[6]=m+g;a[7]=0;a[8]=n+h;a[9]=m-g;a[10]=1-d-c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};A.frustum=function(a,b,d,c,e,f,g){var h=1/(d-b),j=1/(e-c),i=1/(f-g);a[0]=2*f*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f*j;a[6]=0;a[7]=0;a[8]=(d+b)*h;a[9]=(e+c)*j;a[10]=(g+f)*i;a[11]=-1;a[12]=
0;a[13]=0;a[14]=2*(g*f)*i;a[15]=0;return a};A.perspective=function(a,b,d,c,e){b=1/Math.tan(b/2);var f=1/(c-e);a[0]=b/d;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(e+c)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*e*c*f;a[15]=0;return a};A.ortho=function(a,b,d,c,e,f,g){var h=1/(b-d),i=1/(c-e),n=1/(f-g);a[0]=-2*h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=-2*i;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=2*n;a[11]=0;a[12]=(b+d)*h;a[13]=(e+c)*i;a[14]=(g+f)*n;a[15]=1;return a};A.lookAt=function(a,b,d,c){var e,
f,g,h,j,n,l,m,q=b[0],r=b[1];b=b[2];g=c[0];h=c[1];f=c[2];l=d[0];c=d[1];e=d[2];if(Math.abs(q-l)<i&&Math.abs(r-c)<i&&Math.abs(b-e)<i)return A.identity(a);d=q-l;c=r-c;l=b-e;m=1/Math.sqrt(d*d+c*c+l*l);d*=m;c*=m;l*=m;e=h*l-f*c;f=f*d-g*l;g=g*c-h*d;(m=Math.sqrt(e*e+f*f+g*g))?(m=1/m,e*=m,f*=m,g*=m):g=f=e=0;h=c*g-l*f;j=l*e-d*g;n=d*f-c*e;(m=Math.sqrt(h*h+j*j+n*n))?(m=1/m,h*=m,j*=m,n*=m):n=j=h=0;a[0]=e;a[1]=h;a[2]=d;a[3]=0;a[4]=f;a[5]=j;a[6]=c;a[7]=0;a[8]=g;a[9]=n;a[10]=l;a[11]=0;a[12]=-(e*q+f*r+g*b);a[13]=-(h*
q+j*r+n*b);a[14]=-(d*q+c*r+l*b);a[15]=1;return a};A.str=function(a){return"mat4("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+", "+a[4]+", "+a[5]+", "+a[6]+", "+a[7]+", "+a[8]+", "+a[9]+", "+a[10]+", "+a[11]+", "+a[12]+", "+a[13]+", "+a[14]+", "+a[15]+")"};A.frob=function(a){return Math.sqrt(Math.pow(a[0],2)+Math.pow(a[1],2)+Math.pow(a[2],2)+Math.pow(a[3],2)+Math.pow(a[4],2)+Math.pow(a[5],2)+Math.pow(a[6],2)+Math.pow(a[7],2)+Math.pow(a[8],2)+Math.pow(a[9],2)+Math.pow(a[10],2)+Math.pow(a[11],2)+Math.pow(a[12],
2)+Math.pow(a[13],2)+Math.pow(a[14],2)+Math.pow(a[15],2))};"undefined"!==typeof c&&(c.mat4=A);var r={create:function(){var a=new h(4);a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a}},F=q.create(),L=q.fromValues(1,0,0),M=q.fromValues(0,1,0);r.rotationTo=function(a,b,d){var c=q.dot(b,d);if(-0.999999>c)return q.cross(F,L,b),1E-6>q.length(F)&&q.cross(F,M,b),q.normalize(F,F),r.setAxisAngle(a,F,Math.PI),a;if(0.999999<c)return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a;q.cross(F,b,d);a[0]=F[0];a[1]=F[1];a[2]=F[2];a[3]=1+c;return r.normalize(a,
a)};var G=g.create();r.setAxes=function(a,b,d,c){G[0]=d[0];G[3]=d[1];G[6]=d[2];G[1]=c[0];G[4]=c[1];G[7]=c[2];G[2]=-b[0];G[5]=-b[1];G[8]=-b[2];return r.normalize(a,r.fromMat3(a,G))};r.clone=l.clone;r.fromValues=l.fromValues;r.copy=l.copy;r.set=l.set;r.identity=function(a){a[0]=0;a[1]=0;a[2]=0;a[3]=1;return a};r.setAxisAngle=function(a,b,d){d*=0.5;var c=Math.sin(d);a[0]=c*b[0];a[1]=c*b[1];a[2]=c*b[2];a[3]=Math.cos(d);return a};r.add=l.add;r.multiply=function(a,b,d){var c=b[0],e=b[1],f=b[2];b=b[3];var g=
d[0],h=d[1],i=d[2];d=d[3];a[0]=c*d+b*g+e*i-f*h;a[1]=e*d+b*h+f*g-c*i;a[2]=f*d+b*i+c*h-e*g;a[3]=b*d-c*g-e*h-f*i;return a};r.mul=r.multiply;r.scale=l.scale;r.rotateX=function(a,b,d){d*=0.5;var c=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(d);d=Math.cos(d);a[0]=c*d+b*g;a[1]=e*d+f*g;a[2]=f*d-e*g;a[3]=b*d-c*g;return a};r.rotateY=function(a,b,d){d*=0.5;var c=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(d);d=Math.cos(d);a[0]=c*d-f*g;a[1]=e*d+b*g;a[2]=f*d+c*g;a[3]=b*d-e*g;return a};r.rotateZ=function(a,b,d){d*=0.5;
var c=b[0],e=b[1],f=b[2];b=b[3];var g=Math.sin(d);d=Math.cos(d);a[0]=c*d+e*g;a[1]=e*d-c*g;a[2]=f*d+b*g;a[3]=b*d-f*g;return a};r.calculateW=function(a,b){var d=b[0],c=b[1],e=b[2];a[0]=d;a[1]=c;a[2]=e;a[3]=Math.sqrt(Math.abs(1-d*d-c*c-e*e));return a};r.dot=l.dot;r.lerp=l.lerp;r.slerp=function(a,b,d,c){var e=b[0],f=b[1],g=b[2];b=b[3];var h=d[0],i=d[1],n=d[2];d=d[3];var l,m,q;m=e*h+f*i+g*n+b*d;0>m&&(m=-m,h=-h,i=-i,n=-n,d=-d);1E-6<1-m?(l=Math.acos(m),q=Math.sin(l),m=Math.sin((1-c)*l)/q,c=Math.sin(c*l)/
q):m=1-c;a[0]=m*e+c*h;a[1]=m*f+c*i;a[2]=m*g+c*n;a[3]=m*b+c*d;return a};r.invert=function(a,b){var d=b[0],c=b[1],e=b[2],f=b[3],g=d*d+c*c+e*e+f*f,g=g?1/g:0;a[0]=-d*g;a[1]=-c*g;a[2]=-e*g;a[3]=f*g;return a};r.conjugate=function(a,b){a[0]=-b[0];a[1]=-b[1];a[2]=-b[2];a[3]=b[3];return a};r.length=l.length;r.len=r.length;r.squaredLength=l.squaredLength;r.sqrLen=r.squaredLength;r.normalize=l.normalize;r.fromMat3=function(a,b){var d=b[0]+b[4]+b[8];if(0<d)d=Math.sqrt(d+1),a[3]=0.5*d,d=0.5/d,a[0]=(b[5]-b[7])*
d,a[1]=(b[6]-b[2])*d,a[2]=(b[1]-b[3])*d;else{var c=0;b[4]>b[0]&&(c=1);b[8]>b[3*c+c]&&(c=2);var e=(c+1)%3,f=(c+2)%3,d=Math.sqrt(b[3*c+c]-b[3*e+e]-b[3*f+f]+1);a[c]=0.5*d;d=0.5/d;a[3]=(b[3*e+f]-b[3*f+e])*d;a[e]=(b[3*e+c]+b[3*c+e])*d;a[f]=(b[3*f+c]+b[3*c+f])*d}return a};r.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof c&&(c.quat=r)})(this);GLMJS_PREFIX="glm-js: ";
function GLMJSError(c){var e;a:{try{generror_()}catch(i){e=i.stack.split(/\n/)[4];break a}e=void 0}this.e=e;this.toString=function(){return"[GLMJSError "+GLMJS_PREFIX+c+"]"+this.e};generatedError.prototype.message=c}function generatedError(){}generatedError.prototype=Error();GLMJSError.prototype=new generatedError;
$GLM_extern=function(c,e){try{console.debug("extern "+c,e)}catch(i){}e=e||c;return function(){GLM[e]=GLM.$functions[c]||GLM.$DLL[c];if(!GLM[e])throw new GLMJSError("$GLM_extern: unresolved external symbol: "+c);return GLM[e].apply(this,arguments)}};$GLM_intern=function(c,e){if(void 0===e&&"object"===typeof c)for(var i in c)$GLM_intern(i,c[i]);else return GLM.$DLL.console.debug("intern "+c,e&&(e.name||typeof e)),GLM.$DLL[c]=e};
GLM={version:"0.0.1",GLM_VERSION:95,$operations:{},$functions:{},$DLL:{console:{debug:function(){}||(console.debug?function(){console.debug([].slice.call(arguments))}:function(){console.warn([].slice.call(arguments))}),warn:function(){console.warn([].slice.call(arguments))},error:function(){console.error([].slice.call(arguments))},write:function(c){try{console.write(c)}catch(e){this.debug(c)}}},vec3_eulerAngles:function(c){var e=this.mat4_array_from_quat(c);c=e[0];var i=e[4],h=e[1],n=e[5],g=e[2],
v=e[6],e=e[10],s=new glm.vec3;s.y=Math.asin(-glm.clamp(g,-1,1));0.99999>Math.abs(g)?(s.x=Math.atan2(v,e),s.z=Math.atan2(h,c)):(s.x=0,s.z=Math.atan2(-i,n));return s}},$intern:$GLM_intern,$extern:$GLM_extern,GLMJSError:GLMJSError,_radians:function(c){return c*Math.PI/180},_degrees:function(c){return 180*c/Math.PI},normalize:$GLM_extern("normalize"),inverse:$GLM_extern("inverse"),length:$GLM_extern("length"),transpose:$GLM_extern("transpose"),rotate:function(c,e,i){return c.mul(GLM.$DLL.mat4_angleAxis(e,
i))},scale:function(c,e){return c.mul(GLM.$DLL.mat4_scale(e))},translate:function(c,e){return c.mul(GLM.$DLL.mat4_translation(e))},perspective:function(c,e,i,h){return GLM.$DLL.mat4_perspective(c,e,i,h)},eulerAngles:function(c){return GLM.$DLL.vec3_eulerAngles(c)},angleAxis:function(c,e){return GLM.$DLL.quat_angleAxis(c,e)},make_vec2:function(c){return new GLM.vec2([].slice.call(c,0,2))},make_vec3:function(c){return new GLM.vec3([].slice.call(c,0,3))},make_vec4:function(c){return new GLM.vec4([].slice.call(c,
0,4))},make_quat:function(c){return new GLM.quat([].slice.call(c,0,4))},make_mat3:function(c){return new GLM.mat3([].slice.call(c,0,9))},make_mat4:function(c){return new GLM.mat4([].slice.call(c,0,16))},toMat4:function(c){return new GLM.mat4(c)},FAITHFUL:!0,to_string:function(c){try{var e=c.$type||typeof c;if(!GLM[e])throw new GLMJSError("unsupported argtype to GLM.to_string: "+[c,e]);if(!GLM[e].$)throw new GLMJSError("missing .$... GLM.to_string: "+[c,e]);return GLM.FAITHFUL?GLM[e].$.to_string(c).replace(/[\t\n]/g,
""):GLM[e].$.to_string(c)}catch(i){GLM.$DLL.console.error("to_string error: ",e,c+"",i)}},$to_array:function(c){return[].slice.call(c.elements)},clamp:function(c,e,i){return c<e?e:c>i?i:c},max:function(c,e){return Math.max(c,e)},min:function(c,e){return Math.min(c,e)},sign:Math.sign||function(c){return 0<c?1:0>c?-1:0},epsilon:function(){return 1E-6},FIXEDPRECISION:6,$toString:function(c,e,i){try{var h="";i.map(function(c){return e[h=c].toFixed(0)})}catch(n){throw GLM.$DLL.console.error("$toString error",
c,e,h),new GLMJSError(n);}return[c,"(",i.map(function(c){return e[c].toFixed(GLM.FIXEDPRECISION)}).join(", "),")"].join("")}};
var GLM_template=GLM.$template={jstypes:{number:"float","[object Float32Array]":"Float32Array"},"<T>":function(c,e){var i=function(h){var i=[h.$type||GLM_template.jstypes[typeof h]||"null"];if(!c[i])throw new GLMJSError("unsupported argtype to GLM."+e+"<T>: "+[i||typeof h]);return c[i](h)};i["<T>"]=i.$template=c;return i},"<T,V>":function(c,e){var i=function(h,i){this.$type&&(i=h,h=this);var g=[h.$type,i.$type||GLM_template.jstypes[typeof i]||GLM_template.jstypes[i+""]||"<unknown "+i+">"];if(!c[g])throw new GLMJSError("unsupported argtype to "+
e+"<T,V>: "+g);return c[g](h,i)};i["<T,V>"]=i.$template=c;return i},operations:function(c){return this._override("<T,V>",c,GLM.$operations)},functions:function(c){return this._override("<T>",c,GLM.$functions)},_override:function(c,e,i){for(var h in e)this.override(c,h,e[h],i);return i},denify:function(c){for(var e in c)if(/vec<N>/.test(e)){var i=c[e];delete c[e];[2,3,4].forEach(function(h){var n=e.replace(/<N>/,h);n in c||(c[n]=eval(("1,"+i).replace(/N/g,h)))})}return c},override:function(c,e,i,h){GLM.$DLL.console.debug("override",
c,e,i.op);h[e]=GLM_template[c](GLM_template.denify(i),e);i.op&&(h[i.op]=h[e]);return h},GLMType:function(c,e){var i=e.identity.length,h=function(n){var g=typeof n+arguments.length,v=e[g];if(!v)throw new GLMJSError("no template found for "+c+".$."+g);if(this instanceof h)n instanceof Float32Array?(n.length>i&&(n=n.subarray(0,i)),this.elements=n):(this.elements=new Float32Array(i)).set(v.apply(e,arguments));else return new h(v.apply(e,arguments))};h.$=e;h.componentLength=i;h.BYTES_PER_ELEMENT=i*Float32Array.BYTES_PER_ELEMENT;
h.toString=function(){return"function GLM."+c+"(){ [ GLMType ] }"};h.prototype={$type:c,$typeName:e.name||"<"+c+">",$len:i,constructor:h,__proto__:5,clone:function(){return new h(this)},toString:function(){return e.to_string(this)},byteLength:h.BYTES_PER_ELEMENT,componentLength:h.componentLength,get address(){var c=this.elements.byteOffset.toString(16);return"0x00000000".substr(0,10-c.length)+c}};return h}};
GLM.degrees=GLM.$template.override("<T>","degrees",{"vec<N>":function(c){return new GLM.vecN(GLM.$to_array(c).map(GLM._degrees))},"float":function(c){return GLM._degrees(c)}},GLM.$functions).degrees;GLM.radians=GLM.$template.override("<T>","radians",{"vec<N>":function(c){return new GLM.vecN(GLM.$to_array(c).map(GLM._radians))},"float":function(c){return GLM._radians(c)}},GLM.$functions).radians;
GLM.$template.override("<T,V>","copy",{op:"=","mat4,mat4":function(c,e){c.elements.set(e.elements);return c}},GLM.$operations);GLM.string={$typeName:"string",$:{to_string:function(c){return c}}};GLM.number={$typeName:"float",$:{to_string:function(c){return GLM.$toString("float",{value:c},["value"])}}};
GLM.vec2=GLM_template.GLMType("vec2",{name:"fvec2",identity:[0,0],undefined0:function(){return this.identity},number1:function(c){return[c,c]},number2:function(c,e){return[c,e]},object1:function(c){switch(c.length){case 4:case 3:case 2:return[c[0],c[1]];default:if("y"in c&&"x"in c)return[c.x,c.y]}throw new GLMJSError("unrecognized object passed to GLM.vec2: "+c);},to_string:function(c){return GLM.$toString(c.$typeName,c,["x","y"])}});
GLM.vec3=GLM_template.GLMType("vec3",{name:"fvec3",identity:[0,0,0],undefined0:function(){return GLM.vec3.$.identity},number1:function(c){return[c,c,c]},number2:function(c,e){return[c,e,e]},number3:function(c,e,i){return[c,e,i]},object1:function(c){switch(c.length){case 4:case 3:return[c[0],c[1],c[2]];case 2:return[c[0],c[1],c[1]];default:if("z"in c&&"x"in c)return[c.x,c.y,c.z]}throw new GLMJSError("unrecognized object passed to GLM.vec3: "+c);},to_string:function(c){return GLM.$toString(c.$typeName,
c,["x","y","z"])}});
GLM.vec4=GLM_template.GLMType("vec4",{name:"fvec4",identity:[0,0,0,0],undefined0:function(){return this.identity},number1:function(c){return[c,c,c,c]},number2:function(c,e){return[c,e,e,e]},number3:function(c,e,i){return[c,e,i,i]},number4:function(c,e,i,h){return[c,e,i,h]},object1:function(c){switch(c.length){case 4:return[c[0],c[1],c[2],c[3]];case 3:return[c[0],c[1],c[2],c[2]];case 2:return[c[0],c[1],c[1],c[1]];default:if("w"in c&&"x"in c)return[c.x,c.y,c.z,c.w]}throw new GLMJSError("unrecognized object passed to GLM.vec4: "+[c,
c.$type]);},object2:function(c,e){if(c instanceof GLM.vec3)return[c.x,c.y,c.z,e];throw new GLMJSError("unrecognized object passed to GLM.vec4(o,w): "+[c,e]);},to_string:function(c){return GLM.$toString(c.$typeName,c,["x","y","z","w"])}});
GLM.mat3=GLM_template.GLMType("mat3",{name:"mat3x3",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(c){return 1===c?this.identity:[c,0,0,0,c,0,0,0,c]},object1:function(c){var e=c.elements||c;if(16===e.length)return[e[0],e[1],e[2],e[4],e[5],e[6],e[8],e[9],e[10]];if(9===e.length)return e;throw new GLMJSError("unrecognized object passed to GLM.mat3: "+c);},to_string:function(c){var e=[0,1,2].map(function(e){return c[e]}).map(function(c){return GLM.$toString("\t",
c,["x","y","z"])});return c.$typeName+"(\n"+e.join(", \n")+"\n)"}});
GLM.mat4=GLM_template.GLMType("mat4",{name:"mat4x4",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number1:function(c){return 1===c?this.identity:[c,0,0,0,0,c,0,0,0,0,c,0,0,0,0,c]},object1:function(c){if(c instanceof GLM.quat)return GLM.$DLL.mat4_array_from_quat(c);var e=c.elements||c;if(9===e.length)return[e[0],e[1],e[2],0,e[3],e[4],e[5],0,e[6],e[7],e[8],0,0,0,0,1];if(16!==e.length)throw new GLMJSError("unrecognized object passed to GLM.mat4: "+[c,e.length]);
return e},to_string:function(c){var e=[0,1,2,3].map(function(e){return c[e]}).map(function(c){return GLM.$toString("\t",c,["x","y","z","w"])});return c.$typeName+"(\n"+e.join(", \n")+"\n)"}});
GLM.quat=GLM_template.GLMType("quat",{identity:[0,0,0,1],undefined0:function(){return this.identity},number4:function(c,e,i,h){return[e,i,h,c]},object1:function(c){if(c instanceof GLM.mat4)return GLM.$DLL.quat_array_from_mat4(c);if(4===c.length)return c;if(c instanceof GLM.quat||"w"in c&&"x"in c)return[c.x,c.y,c.z,c.w];throw new GLMJSError("unrecognized object passed to GLM.quat.object1: "+[c,c.$type,typeof c,c.constructor]);},to_string:function(c){c=GLM.degrees(GLM.eulerAngles(c));return GLM.$toString("<quat>"+
c.$typeName,c,["x","y","z"])}});
(function(){function c(c,e){var i=e.$.identity.length;[0,1,2,3].slice(0,i).forEach(function(s){var q=s*h*i,D="_cached_"+s;Object.defineProperty(c.prototype,s,{configurable:!0,enumerable:!0,set:function(h){if(h instanceof e)return this[s].elements.set(h.elements);if(h.length===i)return this[s].elements.set(h);throw new GLMJSError("unsupported argtype to "+c.prototype.$type+"["+s+"] setter: "+[typeof h,h]);},get:function(){if(this[D])return this[D];Object.defineProperty(this,D,{configurable:!0,enumerable:!1,
value:new e(new Float32Array(this.elements.buffer,this.elements.byteOffset+q))});return this[D]}})})}var e=[0,1,2,3].map(function(c){return{get:function(){return this.elements[c]},set:function(e){this.elements[c]=e}}}),i=function(c,g){g.forEach(function(g,h){Object.defineProperty(c.prototype,g,e[h])});if(isNaN(g[0])&&!/^_/.test(g[0])){do(function(e,g,h){Object.defineProperty(c.prototype,e,{get:function(){return new GLM[g](this.elements.subarray(0*h,1*h))}})})(g.join(""),"vec"+g.length,g.length);while(g[1]!=
g.pop())}};i(GLM.vec2,["x","y"]);i(GLM.vec3,["x","y","z"]);i(GLM.vec3,["r","g","b"]);i(GLM.vec4,["x","y","z","w"]);i(GLM.vec4,["r","g","b","a"]);i(GLM.quat,["x","y","z","w"]);[2,3,4].forEach(function(c){c=GLM["vec"+c];i(c,c.$.identity.map(function(c,e){return e}))});var h=Float32Array.BYTES_PER_ELEMENT;c(GLM.mat4,GLM.vec4);c(GLM.mat3,GLM.vec3)})();
GLM.$dumpTypes=function(c){for(var e in GLM)GLM[e].componentLength&&c("GLM."+e,JSON.stringify({"#type":GLM[e].prototype.$typeName,"#floats":GLM[e].componentLength,"#bytes":GLM[e].BYTES_PER_ELEMENT}))};
GLM.init=function(c,e){e&&(GLMJS_PREFIX=e);var i=function(c){GLM.$DLL.console.write("\u00e2\u009c\u0094 "+c);try{"node"===process.title&&GLM.$DLL.console.write("\n")}catch(e){}};try{i("GLM-js: ENV: "+_ENV._VERSION)}catch(h){}i("GLM-JS: initializing: "+JSON.stringify(c,0,2));i(JSON.stringify({functions:Object.keys(GLM.$functions),operations:Object.keys(GLM.$operations)}));for(var n in GLM)if("function"===typeof GLM[n]&&"$"in GLM[n])for(var g in GLM.$operations)GLM[n].prototype[g]=GLM.$operations[g];
i("GLM-JS: "+GLM.version+" emulating GLM_VERSION="+GLM.GLM_VERSION+" vendor_name="+c.vendor_name+" vendor_version="+c.vendor_version)};try{module.exports=GLM}catch(e$$17){}try{GLMAT.exists}catch(e$$18){try{GLMAT=exports}catch(e$$19){GLMAT=this,GLMAT.mat4.exists}}var glm=GLM,DLL={_version:"0.0.0",_name:"glm.gl-matrix.js",_glm_version:glm.version,vendor_version:GLMAT.VERSION,vendor_name:"glMatrix"};console.warn("... glm-js: DLL: ",JSON.stringify(DLL));
if(!glm.$template)throw Error("glm-js: bring glm.$template in first (from glm.common.js)");
glm.$intern({mat4_perspective:function(c,e,i,h){return new glm.mat4(GLMAT.mat4.perspective(new Float32Array(16),c,e,i,h))},mat4_angleAxis:function(c,e){var i=GLMAT.quat.setAxisAngle(new Float32Array(4),e,c);return new glm.mat4(GLMAT.mat4.fromQuat(new Float32Array(16),i))},quat_angleAxis:function(c,e){return new glm.quat(GLMAT.quat.setAxisAngle(new Float32Array(4),e,c))},mat4_translation:function(c){var e=new glm.mat4;GLMAT.mat4.translate(e.elements,e.elements,c.elements);return e},vec3_eulerAngles:function(c){var e=
new Float32Array(16);GLMAT.mat4.fromQuat(e,c.elements);c=e[0];var i=e[4],h=e[1],n=e[5],g=e[2],v=e[6],e=e[10],s=new glm.vec3;s.y=Math.asin(-glm.clamp(g,-1,1));0.99999>Math.abs(g)?(s.x=Math.atan2(v,e),s.z=Math.atan2(h,c)):(s.x=0,s.z=Math.atan2(-i,n));return s},mat4_array_from_quat:function(c){return GLMAT.mat4.fromQuat(new Float32Array(16),c.elements)},quat_array_from_mat4:function(c){c=GLMAT.mat3.fromMat4(new Float32Array(9),c.elements);return GLMAT.quat.fromMat3(new Float32Array(4),c)}});
glm.$template.operations({mul:{op:"*","quat,vec3":function(c,e){return new glm.vec3(GLMAT.vec3.transformQuat(new Float32Array(3),e.elements,c.elements))},"vec3,quat":function(c,e){return this["quat,vec3"](e,c)},"vec4,quat":function(c,e){return new glm.vec4(this["quat,vec3"](e,c),1)},"vec<N>,float":function(c,e){return new glm.vecN(GLMAT.vecN.scale(new Float32Array(N),c.elements,e))},"mat4,vec4":function(c,e){return new glm.vec4(GLMAT.vec4.transformMat4(new Float32Array(4),e.elements,c.elements))},
"mat4,mat4":function(c,e){return new glm.mat4(GLMAT.mat4.mul(new Float32Array(16),c.elements,e.elements))}},mul_eq:{op:"*=","mat4,mat4":function(c,e){GLMAT.mat4.multiply(c.elements,c.elements,e.elements);return c},"vec<N>,float":function(c,e){return GLMAT.vecN.scale(c,c,e)}}});
glm.$template.functions({normalize:{"vec<N>":function(c){return new glm.vecN(GLMAT.vecN.normalize(new Float32Array(N),c))},quat:function(c){return new glm.quat(GLMAT.quat.normalize(new Float32Array(4),c.elements))}},length:{quat:function(c){return GLMAT.quat.length(c.elements)},vec3:function(c){return GLMAT.vec3.length(c.elements)},"vec<N>":function(c){return GLMAT.vecN.length(c.elements)}},inverse:{quat:function(c){return new glm.quat(GLMAT.quat.invert(new Float32Array(4),c.elements))},mat4:function(c){return new glm.mat4(GLMAT.mat4.invert(new Float32Array(16),
c.elements))}},transpose:{mat4:function(c){return new glm.mat4(GLMAT.mat4.transpose(new Float32Array(16),c.elements))}}});glm.init(DLL,"glm-js[glMatrix]: ");try{module.exports=glm}catch(e$$20){};
