var GLMAT={};GLMAT_VERSION="2.2.2";
(function(a){a.VERSION=GLMAT_VERSION;if(!c)var c=1E-6;if(!f)var f="undefined"!==typeof Float32Array?Float32Array:Array;if(!g)var g=Math.random;var e={setMatrixArrayType:function(b){f=b}};"undefined"!==typeof a&&(a.glMatrix=e);var m=Math.PI/180;e.toRadian=function(b){return b*m};e={create:function(){var b=new f(2);b[0]=0;b[1]=0;return b},clone:function(b){var d=new f(2);d[0]=b[0];d[1]=b[1];return d},fromValues:function(b,d){var l=new f(2);l[0]=b;l[1]=d;return l},copy:function(b,d){b[0]=d[0];b[1]=d[1];
return b},set:function(b,d,l){b[0]=d;b[1]=l;return b},add:function(b,d,l){b[0]=d[0]+l[0];b[1]=d[1]+l[1];return b},subtract:function(b,d,l){b[0]=d[0]-l[0];b[1]=d[1]-l[1];return b}};e.sub=e.subtract;e.multiply=function(b,d,l){b[0]=d[0]*l[0];b[1]=d[1]*l[1];return b};e.mul=e.multiply;e.divide=function(b,d,l){b[0]=d[0]/l[0];b[1]=d[1]/l[1];return b};e.div=e.divide;e.min=function(b,d,l){b[0]=Math.min(d[0],l[0]);b[1]=Math.min(d[1],l[1]);return b};e.max=function(b,d,l){b[0]=Math.max(d[0],l[0]);b[1]=Math.max(d[1],
l[1]);return b};e.scale=function(b,d,l){b[0]=d[0]*l;b[1]=d[1]*l;return b};e.scaleAndAdd=function(b,d,l,a){b[0]=d[0]+l[0]*a;b[1]=d[1]+l[1]*a;return b};e.distance=function(b,d){var l=d[0]-b[0],a=d[1]-b[1];return Math.sqrt(l*l+a*a)};e.dist=e.distance;e.squaredDistance=function(b,d){var l=d[0]-b[0],a=d[1]-b[1];return l*l+a*a};e.sqrDist=e.squaredDistance;e.length=function(b){var d=b[0];b=b[1];return Math.sqrt(d*d+b*b)};e.len=e.length;e.squaredLength=function(b){var d=b[0];b=b[1];return d*d+b*b};e.sqrLen=
e.squaredLength;e.negate=function(b,d){b[0]=-d[0];b[1]=-d[1];return b};e.inverse=function(b,d){b[0]=1/d[0];b[1]=1/d[1];return b};e.normalize=function(b,d){var l=d[0],a=d[1],l=l*l+a*a;0<l&&(l=1/Math.sqrt(l),b[0]=d[0]*l,b[1]=d[1]*l);return b};e.dot=function(b,d){return b[0]*d[0]+b[1]*d[1]};e.cross=function(b,d,l){d=d[0]*l[1]-d[1]*l[0];b[0]=b[1]=0;b[2]=d;return b};e.lerp=function(b,d,l,a){var c=d[0];d=d[1];b[0]=c+a*(l[0]-c);b[1]=d+a*(l[1]-d);return b};e.random=function(b,d){d=d||1;var l=2*g()*Math.PI;
b[0]=Math.cos(l)*d;b[1]=Math.sin(l)*d;return b};e.transformMat2=function(b,d,l){var a=d[0];d=d[1];b[0]=l[0]*a+l[2]*d;b[1]=l[1]*a+l[3]*d;return b};e.transformMat2d=function(b,d,l){var a=d[0];d=d[1];b[0]=l[0]*a+l[2]*d+l[4];b[1]=l[1]*a+l[3]*d+l[5];return b};e.transformMat3=function(b,d,l){var a=d[0];d=d[1];b[0]=l[0]*a+l[3]*d+l[6];b[1]=l[1]*a+l[4]*d+l[7];return b};e.transformMat4=function(b,d,l){var a=d[0];d=d[1];b[0]=l[0]*a+l[4]*d+l[12];b[1]=l[1]*a+l[5]*d+l[13];return b};var r=e.create();e.forEach=function(b,
d,l,a,c,k){d||(d=2);l||(l=0);for(a=a?Math.min(a*d+l,b.length):b.length;l<a;l+=d)r[0]=b[l],r[1]=b[l+1],c(r,r,k),b[l]=r[0],b[l+1]=r[1];return b};e.str=function(b){return"vec2("+b[0]+", "+b[1]+")"};"undefined"!==typeof a&&(a.vec2=e);var h={create:function(){var b=new f(3);b[0]=0;b[1]=0;b[2]=0;return b},clone:function(b){var d=new f(3);d[0]=b[0];d[1]=b[1];d[2]=b[2];return d},fromValues:function(b,d,l){var a=new f(3);a[0]=b;a[1]=d;a[2]=l;return a},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];return b},
set:function(b,d,l,a){b[0]=d;b[1]=l;b[2]=a;return b},add:function(b,d,l){b[0]=d[0]+l[0];b[1]=d[1]+l[1];b[2]=d[2]+l[2];return b},subtract:function(b,d,l){b[0]=d[0]-l[0];b[1]=d[1]-l[1];b[2]=d[2]-l[2];return b}};h.sub=h.subtract;h.multiply=function(b,d,l){b[0]=d[0]*l[0];b[1]=d[1]*l[1];b[2]=d[2]*l[2];return b};h.mul=h.multiply;h.divide=function(b,d,l){b[0]=d[0]/l[0];b[1]=d[1]/l[1];b[2]=d[2]/l[2];return b};h.div=h.divide;h.min=function(b,d,l){b[0]=Math.min(d[0],l[0]);b[1]=Math.min(d[1],l[1]);b[2]=Math.min(d[2],
l[2]);return b};h.max=function(b,d,l){b[0]=Math.max(d[0],l[0]);b[1]=Math.max(d[1],l[1]);b[2]=Math.max(d[2],l[2]);return b};h.scale=function(b,d,l){b[0]=d[0]*l;b[1]=d[1]*l;b[2]=d[2]*l;return b};h.scaleAndAdd=function(b,d,l,a){b[0]=d[0]+l[0]*a;b[1]=d[1]+l[1]*a;b[2]=d[2]+l[2]*a;return b};h.distance=function(b,d){var l=d[0]-b[0],a=d[1]-b[1],c=d[2]-b[2];return Math.sqrt(l*l+a*a+c*c)};h.dist=h.distance;h.squaredDistance=function(b,d){var l=d[0]-b[0],a=d[1]-b[1],c=d[2]-b[2];return l*l+a*a+c*c};h.sqrDist=
h.squaredDistance;h.length=function(b){var d=b[0],l=b[1];b=b[2];return Math.sqrt(d*d+l*l+b*b)};h.len=h.length;h.squaredLength=function(b){var d=b[0],l=b[1];b=b[2];return d*d+l*l+b*b};h.sqrLen=h.squaredLength;h.negate=function(b,d){b[0]=-d[0];b[1]=-d[1];b[2]=-d[2];return b};h.inverse=function(b,d){b[0]=1/d[0];b[1]=1/d[1];b[2]=1/d[2];return b};h.normalize=function(b,d){var l=d[0],a=d[1],c=d[2],l=l*l+a*a+c*c;0<l&&(l=1/Math.sqrt(l),b[0]=d[0]*l,b[1]=d[1]*l,b[2]=d[2]*l);return b};h.dot=function(b,d){return b[0]*
d[0]+b[1]*d[1]+b[2]*d[2]};h.cross=function(b,d,l){var a=d[0],c=d[1];d=d[2];var k=l[0],y=l[1];l=l[2];b[0]=c*l-d*y;b[1]=d*k-a*l;b[2]=a*y-c*k;return b};h.lerp=function(b,d,l,a){var c=d[0],k=d[1];d=d[2];b[0]=c+a*(l[0]-c);b[1]=k+a*(l[1]-k);b[2]=d+a*(l[2]-d);return b};h.random=function(b,d){d=d||1;var l=2*g()*Math.PI,a=2*g()-1,c=Math.sqrt(1-a*a)*d;b[0]=Math.cos(l)*c;b[1]=Math.sin(l)*c;b[2]=a*d;return b};h.transformMat4=function(b,d,a){var c=d[0],i=d[1];d=d[2];var k=a[3]*c+a[7]*i+a[11]*d+a[15],k=k||1;b[0]=
(a[0]*c+a[4]*i+a[8]*d+a[12])/k;b[1]=(a[1]*c+a[5]*i+a[9]*d+a[13])/k;b[2]=(a[2]*c+a[6]*i+a[10]*d+a[14])/k;return b};h.transformMat3=function(b,d,a){var c=d[0],i=d[1];d=d[2];b[0]=c*a[0]+i*a[3]+d*a[6];b[1]=c*a[1]+i*a[4]+d*a[7];b[2]=c*a[2]+i*a[5]+d*a[8];return b};h.transformQuat=function(b,d,a){var c=d[0],i=d[1],k=d[2];d=a[0];var y=a[1],e=a[2];a=a[3];var f=a*c+y*k-e*i,g=a*i+e*c-d*k,q=a*k+d*i-y*c,c=-d*c-y*i-e*k;b[0]=f*a+c*-d+g*-e-q*-y;b[1]=g*a+c*-y+q*-d-f*-e;b[2]=q*a+c*-e+f*-y-g*-d;return b};h.rotateX=
function(b,d,a,c){var i=[],k=[];i[0]=d[0]-a[0];i[1]=d[1]-a[1];i[2]=d[2]-a[2];k[0]=i[0];k[1]=i[1]*Math.cos(c)-i[2]*Math.sin(c);k[2]=i[1]*Math.sin(c)+i[2]*Math.cos(c);b[0]=k[0]+a[0];b[1]=k[1]+a[1];b[2]=k[2]+a[2];return b};h.rotateY=function(b,d,a,c){var i=[],k=[];i[0]=d[0]-a[0];i[1]=d[1]-a[1];i[2]=d[2]-a[2];k[0]=i[2]*Math.sin(c)+i[0]*Math.cos(c);k[1]=i[1];k[2]=i[2]*Math.cos(c)-i[0]*Math.sin(c);b[0]=k[0]+a[0];b[1]=k[1]+a[1];b[2]=k[2]+a[2];return b};h.rotateZ=function(b,d,a,c){var i=[],k=[];i[0]=d[0]-
a[0];i[1]=d[1]-a[1];i[2]=d[2]-a[2];k[0]=i[0]*Math.cos(c)-i[1]*Math.sin(c);k[1]=i[0]*Math.sin(c)+i[1]*Math.cos(c);k[2]=i[2];b[0]=k[0]+a[0];b[1]=k[1]+a[1];b[2]=k[2]+a[2];return b};var s=h.create();h.forEach=function(b,d,a,c,i,k){d||(d=3);a||(a=0);for(c=c?Math.min(c*d+a,b.length):b.length;a<c;a+=d)s[0]=b[a],s[1]=b[a+1],s[2]=b[a+2],i(s,s,k),b[a]=s[0],b[a+1]=s[1],b[a+2]=s[2];return b};h.str=function(b){return"vec3("+b[0]+", "+b[1]+", "+b[2]+")"};"undefined"!==typeof a&&(a.vec3=h);var j={create:function(){var b=
new f(4);b[0]=0;b[1]=0;b[2]=0;b[3]=0;return b},clone:function(b){var d=new f(4);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];return d},fromValues:function(b,d,a,c){var i=new f(4);i[0]=b;i[1]=d;i[2]=a;i[3]=c;return i},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];return b},set:function(b,d,a,c,i){b[0]=d;b[1]=a;b[2]=c;b[3]=i;return b},add:function(b,d,a){b[0]=d[0]+a[0];b[1]=d[1]+a[1];b[2]=d[2]+a[2];b[3]=d[3]+a[3];return b},subtract:function(b,d,a){b[0]=d[0]-a[0];b[1]=d[1]-a[1];b[2]=d[2]-a[2];
b[3]=d[3]-a[3];return b}};j.sub=j.subtract;j.multiply=function(b,d,a){b[0]=d[0]*a[0];b[1]=d[1]*a[1];b[2]=d[2]*a[2];b[3]=d[3]*a[3];return b};j.mul=j.multiply;j.divide=function(b,d,a){b[0]=d[0]/a[0];b[1]=d[1]/a[1];b[2]=d[2]/a[2];b[3]=d[3]/a[3];return b};j.div=j.divide;j.min=function(b,d,a){b[0]=Math.min(d[0],a[0]);b[1]=Math.min(d[1],a[1]);b[2]=Math.min(d[2],a[2]);b[3]=Math.min(d[3],a[3]);return b};j.max=function(b,d,a){b[0]=Math.max(d[0],a[0]);b[1]=Math.max(d[1],a[1]);b[2]=Math.max(d[2],a[2]);b[3]=
Math.max(d[3],a[3]);return b};j.scale=function(b,d,a){b[0]=d[0]*a;b[1]=d[1]*a;b[2]=d[2]*a;b[3]=d[3]*a;return b};j.scaleAndAdd=function(b,d,a,c){b[0]=d[0]+a[0]*c;b[1]=d[1]+a[1]*c;b[2]=d[2]+a[2]*c;b[3]=d[3]+a[3]*c;return b};j.distance=function(b,d){var a=d[0]-b[0],c=d[1]-b[1],i=d[2]-b[2],k=d[3]-b[3];return Math.sqrt(a*a+c*c+i*i+k*k)};j.dist=j.distance;j.squaredDistance=function(b,d){var a=d[0]-b[0],c=d[1]-b[1],i=d[2]-b[2],k=d[3]-b[3];return a*a+c*c+i*i+k*k};j.sqrDist=j.squaredDistance;j.length=function(b){var d=
b[0],a=b[1],c=b[2];b=b[3];return Math.sqrt(d*d+a*a+c*c+b*b)};j.len=j.length;j.squaredLength=function(b){var d=b[0],a=b[1],c=b[2];b=b[3];return d*d+a*a+c*c+b*b};j.sqrLen=j.squaredLength;j.negate=function(b,d){b[0]=-d[0];b[1]=-d[1];b[2]=-d[2];b[3]=-d[3];return b};j.inverse=function(b,d){b[0]=1/d[0];b[1]=1/d[1];b[2]=1/d[2];b[3]=1/d[3];return b};j.normalize=function(b,d){var a=d[0],c=d[1],i=d[2],k=d[3],a=a*a+c*c+i*i+k*k;0<a&&(a=1/Math.sqrt(a),b[0]=d[0]*a,b[1]=d[1]*a,b[2]=d[2]*a,b[3]=d[3]*a);return b};
j.dot=function(b,d){return b[0]*d[0]+b[1]*d[1]+b[2]*d[2]+b[3]*d[3]};j.lerp=function(b,d,a,c){var i=d[0],k=d[1],y=d[2];d=d[3];b[0]=i+c*(a[0]-i);b[1]=k+c*(a[1]-k);b[2]=y+c*(a[2]-y);b[3]=d+c*(a[3]-d);return b};j.random=function(b,d){d=d||1;b[0]=g();b[1]=g();b[2]=g();b[3]=g();j.normalize(b,b);j.scale(b,b,d);return b};j.transformMat4=function(b,d,a){var c=d[0],i=d[1],k=d[2];d=d[3];b[0]=a[0]*c+a[4]*i+a[8]*k+a[12]*d;b[1]=a[1]*c+a[5]*i+a[9]*k+a[13]*d;b[2]=a[2]*c+a[6]*i+a[10]*k+a[14]*d;b[3]=a[3]*c+a[7]*i+
a[11]*k+a[15]*d;return b};j.transformQuat=function(b,d,a){var c=d[0],i=d[1],k=d[2];d=a[0];var y=a[1],e=a[2];a=a[3];var f=a*c+y*k-e*i,g=a*i+e*c-d*k,q=a*k+d*i-y*c,c=-d*c-y*i-e*k;b[0]=f*a+c*-d+g*-e-q*-y;b[1]=g*a+c*-y+q*-d-f*-e;b[2]=q*a+c*-e+f*-y-g*-d;return b};var u=j.create();j.forEach=function(b,d,a,c,i,k){d||(d=4);a||(a=0);for(c=c?Math.min(c*d+a,b.length):b.length;a<c;a+=d)u[0]=b[a],u[1]=b[a+1],u[2]=b[a+2],u[3]=b[a+3],i(u,u,k),b[a]=u[0],b[a+1]=u[1],b[a+2]=u[2],b[a+3]=u[3];return b};j.str=function(b){return"vec4("+
b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};"undefined"!==typeof a&&(a.vec4=j);e={create:function(){var b=new f(4);b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},clone:function(b){var d=new f(4);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];return d},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;return b},transpose:function(b,d){if(b===d){var a=d[1];b[1]=d[2];b[2]=a}else b[0]=d[0],b[1]=d[2],b[2]=d[1],b[3]=d[3];return b},invert:function(b,d){var a=
d[0],c=d[1],i=d[2],k=d[3],y=a*k-i*c;if(!y)return null;y=1/y;b[0]=k*y;b[1]=-c*y;b[2]=-i*y;b[3]=a*y;return b},adjoint:function(b,d){var a=d[0];b[0]=d[3];b[1]=-d[1];b[2]=-d[2];b[3]=a;return b},determinant:function(b){return b[0]*b[3]-b[2]*b[1]},multiply:function(b,d,a){var c=d[0],i=d[1],k=d[2];d=d[3];var y=a[0],e=a[1],f=a[2];a=a[3];b[0]=c*y+k*e;b[1]=i*y+d*e;b[2]=c*f+k*a;b[3]=i*f+d*a;return b}};e.mul=e.multiply;e.rotate=function(b,d,a){var c=d[0],i=d[1],k=d[2];d=d[3];var e=Math.sin(a);a=Math.cos(a);b[0]=
c*a+k*e;b[1]=i*a+d*e;b[2]=c*-e+k*a;b[3]=i*-e+d*a;return b};e.scale=function(b,d,a){var c=d[1],i=d[2],k=d[3],e=a[0];a=a[1];b[0]=d[0]*e;b[1]=c*e;b[2]=i*a;b[3]=k*a;return b};e.str=function(b){return"mat2("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+")"};e.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2))};e.LDU=function(b,d,a,c){b[2]=c[2]/c[0];a[0]=c[0];a[1]=c[1];a[3]=c[3]-b[2]*a[1];return[b,d,a]};"undefined"!==typeof a&&(a.mat2=e);e={create:function(){var b=
new f(6);b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},clone:function(b){var d=new f(6);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=b[5];return d},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=1;b[4]=0;b[5]=0;return b},invert:function(b,d){var a=d[0],c=d[1],i=d[2],k=d[3],e=d[4],f=d[5],g=a*k-c*i;if(!g)return null;g=1/g;b[0]=k*g;b[1]=-c*g;b[2]=-i*g;b[3]=a*g;b[4]=(i*f-k*e)*g;b[5]=(c*e-a*f)*g;return b},
determinant:function(b){return b[0]*b[3]-b[1]*b[2]},multiply:function(b,d,a){var c=d[0],i=d[1],k=d[2],e=d[3],f=d[4];d=d[5];var g=a[0],t=a[1],q=a[2],n=a[3],h=a[4];a=a[5];b[0]=c*g+k*t;b[1]=i*g+e*t;b[2]=c*q+k*n;b[3]=i*q+e*n;b[4]=c*h+k*a+f;b[5]=i*h+e*a+d;return b}};e.mul=e.multiply;e.rotate=function(b,d,a){var c=d[0],i=d[1],k=d[2],e=d[3],f=d[4];d=d[5];var g=Math.sin(a);a=Math.cos(a);b[0]=c*a+k*g;b[1]=i*a+e*g;b[2]=c*-g+k*a;b[3]=i*-g+e*a;b[4]=f;b[5]=d;return b};e.scale=function(b,d,a){var c=d[1],i=d[2],
k=d[3],e=d[4],f=d[5],g=a[0];a=a[1];b[0]=d[0]*g;b[1]=c*g;b[2]=i*a;b[3]=k*a;b[4]=e;b[5]=f;return b};e.translate=function(b,d,a){var c=d[0],i=d[1],k=d[2],e=d[3],f=d[4];d=d[5];var g=a[0];a=a[1];b[0]=c;b[1]=i;b[2]=k;b[3]=e;b[4]=c*g+k*a+f;b[5]=i*g+e*a+d;return b};e.str=function(b){return"mat2d("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+")"};e.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+1)};"undefined"!==
typeof a&&(a.mat2d=e);e={create:function(){var b=new f(9);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},fromMat4:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[4];b[4]=d[5];b[5]=d[6];b[6]=d[8];b[7]=d[9];b[8]=d[10];return b},clone:function(b){var d=new f(9);d[0]=b[0];d[1]=b[1];d[2]=b[2];d[3]=b[3];d[4]=b[4];d[5]=b[5];d[6]=b[6];d[7]=b[7];d[8]=b[8];return d},copy:function(b,d){b[0]=d[0];b[1]=d[1];b[2]=d[2];b[3]=d[3];b[4]=d[4];b[5]=d[5];b[6]=d[6];b[7]=d[7];b[8]=d[8];return b},
identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=1;b[5]=0;b[6]=0;b[7]=0;b[8]=1;return b},transpose:function(b,d){if(b===d){var a=d[1],c=d[2],i=d[5];b[1]=d[3];b[2]=d[6];b[3]=a;b[5]=d[7];b[6]=c;b[7]=i}else b[0]=d[0],b[1]=d[3],b[2]=d[6],b[3]=d[1],b[4]=d[4],b[5]=d[7],b[6]=d[2],b[7]=d[5],b[8]=d[8];return b},invert:function(b,d){var a=d[0],c=d[1],i=d[2],k=d[3],e=d[4],f=d[5],g=d[6],t=d[7],q=d[8],n=q*e-f*t,h=-q*k+f*g,D=t*k-e*g,j=a*n+c*h+i*D;if(!j)return null;j=1/j;b[0]=n*j;b[1]=(-q*c+i*t)*j;b[2]=(f*
c-i*e)*j;b[3]=h*j;b[4]=(q*a-i*g)*j;b[5]=(-f*a+i*k)*j;b[6]=D*j;b[7]=(-t*a+c*g)*j;b[8]=(e*a-c*k)*j;return b},adjoint:function(b,d){var a=d[0],c=d[1],i=d[2],k=d[3],e=d[4],f=d[5],g=d[6],t=d[7],q=d[8];b[0]=e*q-f*t;b[1]=i*t-c*q;b[2]=c*f-i*e;b[3]=f*g-k*q;b[4]=a*q-i*g;b[5]=i*k-a*f;b[6]=k*t-e*g;b[7]=c*g-a*t;b[8]=a*e-c*k;return b},determinant:function(b){var d=b[3],a=b[4],c=b[5],i=b[6],k=b[7],e=b[8];return b[0]*(e*a-c*k)+b[1]*(-e*d+c*i)+b[2]*(k*d-a*i)},multiply:function(b,d,a){var c=d[0],i=d[1],k=d[2],e=d[3],
f=d[4],g=d[5],t=d[6],q=d[7];d=d[8];var n=a[0],h=a[1],j=a[2],m=a[3],r=a[4],F=a[5],M=a[6],p=a[7];a=a[8];b[0]=n*c+h*e+j*t;b[1]=n*i+h*f+j*q;b[2]=n*k+h*g+j*d;b[3]=m*c+r*e+F*t;b[4]=m*i+r*f+F*q;b[5]=m*k+r*g+F*d;b[6]=M*c+p*e+a*t;b[7]=M*i+p*f+a*q;b[8]=M*k+p*g+a*d;return b}};e.mul=e.multiply;e.translate=function(b,d,a){var c=d[0],i=d[1],k=d[2],e=d[3],f=d[4],g=d[5],t=d[6],q=d[7];d=d[8];var n=a[0];a=a[1];b[0]=c;b[1]=i;b[2]=k;b[3]=e;b[4]=f;b[5]=g;b[6]=n*c+a*e+t;b[7]=n*i+a*f+q;b[8]=n*k+a*g+d;return b};e.rotate=
function(b,d,a){var c=d[0],i=d[1],k=d[2],e=d[3],f=d[4],g=d[5],t=d[6],q=d[7];d=d[8];var n=Math.sin(a);a=Math.cos(a);b[0]=a*c+n*e;b[1]=a*i+n*f;b[2]=a*k+n*g;b[3]=a*e-n*c;b[4]=a*f-n*i;b[5]=a*g-n*k;b[6]=t;b[7]=q;b[8]=d;return b};e.scale=function(b,a,c){var e=c[0];c=c[1];b[0]=e*a[0];b[1]=e*a[1];b[2]=e*a[2];b[3]=c*a[3];b[4]=c*a[4];b[5]=c*a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];return b};e.fromMat2d=function(b,a){b[0]=a[0];b[1]=a[1];b[2]=0;b[3]=a[2];b[4]=a[3];b[5]=0;b[6]=a[4];b[7]=a[5];b[8]=1;return b};e.fromQuat=
function(b,a){var c=a[0],e=a[1],i=a[2],k=a[3],f=c+c,g=e+e,h=i+i,c=c*f,t=e*f,e=e*g,q=i*f,n=i*g,i=i*h,f=k*f,g=k*g,k=k*h;b[0]=1-e-i;b[3]=t-k;b[6]=q+g;b[1]=t+k;b[4]=1-c-i;b[7]=n-f;b[2]=q-g;b[5]=n+f;b[8]=1-c-e;return b};e.normalFromMat4=function(b,a){var c=a[0],e=a[1],i=a[2],k=a[3],f=a[4],g=a[5],h=a[6],t=a[7],q=a[8],n=a[9],j=a[10],D=a[11],m=a[12],r=a[13],F=a[14],p=a[15],s=c*g-e*f,u=c*h-i*f,w=c*t-k*f,x=e*h-i*g,v=e*t-k*g,K=i*t-k*h,G=q*r-n*m,H=q*F-j*m,q=q*p-D*m,I=n*F-j*r,n=n*p-D*r,j=j*p-D*F,D=s*j-u*n+w*I+
x*q-v*H+K*G;if(!D)return null;D=1/D;b[0]=(g*j-h*n+t*I)*D;b[1]=(h*q-f*j-t*H)*D;b[2]=(f*n-g*q+t*G)*D;b[3]=(i*n-e*j-k*I)*D;b[4]=(c*j-i*q+k*H)*D;b[5]=(e*q-c*n-k*G)*D;b[6]=(r*K-F*v+p*x)*D;b[7]=(F*w-m*K-p*u)*D;b[8]=(m*v-r*w+p*s)*D;return b};e.str=function(b){return"mat3("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+")"};e.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],
2)+Math.pow(b[7],2)+Math.pow(b[8],2))};"undefined"!==typeof a&&(a.mat3=e);var v={create:function(){var b=new f(16);b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},clone:function(b){var a=new f(16);a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];a[6]=b[6];a[7]=b[7];a[8]=b[8];a[9]=b[9];a[10]=b[10];a[11]=b[11];a[12]=b[12];a[13]=b[13];a[14]=b[14];a[15]=b[15];return a},copy:function(b,a){b[0]=a[0];b[1]=a[1];b[2]=
a[2];b[3]=a[3];b[4]=a[4];b[5]=a[5];b[6]=a[6];b[7]=a[7];b[8]=a[8];b[9]=a[9];b[10]=a[10];b[11]=a[11];b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b},identity:function(b){b[0]=1;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=1;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=1;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b},transpose:function(b,a){if(b===a){var c=a[1],e=a[2],i=a[3],k=a[6],f=a[7],g=a[11];b[1]=a[4];b[2]=a[8];b[3]=a[12];b[4]=c;b[6]=a[9];b[7]=a[13];b[8]=e;b[9]=k;b[11]=a[14];b[12]=i;b[13]=f;b[14]=g}else b[0]=
a[0],b[1]=a[4],b[2]=a[8],b[3]=a[12],b[4]=a[1],b[5]=a[5],b[6]=a[9],b[7]=a[13],b[8]=a[2],b[9]=a[6],b[10]=a[10],b[11]=a[14],b[12]=a[3],b[13]=a[7],b[14]=a[11],b[15]=a[15];return b},invert:function(b,a){var c=a[0],e=a[1],i=a[2],k=a[3],f=a[4],g=a[5],h=a[6],t=a[7],q=a[8],n=a[9],j=a[10],m=a[11],r=a[12],p=a[13],F=a[14],s=a[15],u=c*g-e*f,v=c*h-i*f,w=c*t-k*f,x=e*h-i*g,B=e*t-k*g,K=i*t-k*h,G=q*p-n*r,H=q*F-j*r,I=q*s-m*r,J=n*F-j*p,C=n*s-m*p,L=j*s-m*F,E=u*L-v*C+w*J+x*I-B*H+K*G;if(!E)return null;E=1/E;b[0]=(g*L-h*
C+t*J)*E;b[1]=(i*C-e*L-k*J)*E;b[2]=(p*K-F*B+s*x)*E;b[3]=(j*B-n*K-m*x)*E;b[4]=(h*I-f*L-t*H)*E;b[5]=(c*L-i*I+k*H)*E;b[6]=(F*w-r*K-s*v)*E;b[7]=(q*K-j*w+m*v)*E;b[8]=(f*C-g*I+t*G)*E;b[9]=(e*I-c*C-k*G)*E;b[10]=(r*B-p*w+s*u)*E;b[11]=(n*w-q*B-m*u)*E;b[12]=(g*H-f*J-h*G)*E;b[13]=(c*J-e*H+i*G)*E;b[14]=(p*v-r*x-F*u)*E;b[15]=(q*x-n*v+j*u)*E;return b},adjoint:function(b,a){var c=a[0],e=a[1],i=a[2],k=a[3],f=a[4],g=a[5],h=a[6],t=a[7],q=a[8],n=a[9],j=a[10],m=a[11],r=a[12],p=a[13],s=a[14],u=a[15];b[0]=g*(j*u-m*s)-
n*(h*u-t*s)+p*(h*m-t*j);b[1]=-(e*(j*u-m*s)-n*(i*u-k*s)+p*(i*m-k*j));b[2]=e*(h*u-t*s)-g*(i*u-k*s)+p*(i*t-k*h);b[3]=-(e*(h*m-t*j)-g*(i*m-k*j)+n*(i*t-k*h));b[4]=-(f*(j*u-m*s)-q*(h*u-t*s)+r*(h*m-t*j));b[5]=c*(j*u-m*s)-q*(i*u-k*s)+r*(i*m-k*j);b[6]=-(c*(h*u-t*s)-f*(i*u-k*s)+r*(i*t-k*h));b[7]=c*(h*m-t*j)-f*(i*m-k*j)+q*(i*t-k*h);b[8]=f*(n*u-m*p)-q*(g*u-t*p)+r*(g*m-t*n);b[9]=-(c*(n*u-m*p)-q*(e*u-k*p)+r*(e*m-k*n));b[10]=c*(g*u-t*p)-f*(e*u-k*p)+r*(e*t-k*g);b[11]=-(c*(g*m-t*n)-f*(e*m-k*n)+q*(e*t-k*g));b[12]=
-(f*(n*s-j*p)-q*(g*s-h*p)+r*(g*j-h*n));b[13]=c*(n*s-j*p)-q*(e*s-i*p)+r*(e*j-i*n);b[14]=-(c*(g*s-h*p)-f*(e*s-i*p)+r*(e*h-i*g));b[15]=c*(g*j-h*n)-f*(e*j-i*n)+q*(e*h-i*g);return b},determinant:function(b){var a=b[0],c=b[1],e=b[2],i=b[3],k=b[4],f=b[5],g=b[6],h=b[7],j=b[8],q=b[9],n=b[10],m=b[11],p=b[12],r=b[13],s=b[14];b=b[15];return(a*f-c*k)*(n*b-m*s)-(a*g-e*k)*(q*b-m*r)+(a*h-i*k)*(q*s-n*r)+(c*g-e*f)*(j*b-m*p)-(c*h-i*f)*(j*s-n*p)+(e*h-i*g)*(j*r-q*p)},multiply:function(b,a,c){var e=a[0],i=a[1],k=a[2],
f=a[3],g=a[4],h=a[5],j=a[6],q=a[7],n=a[8],m=a[9],p=a[10],r=a[11],s=a[12],u=a[13],v=a[14];a=a[15];var z=c[0],A=c[1],w=c[2],x=c[3];b[0]=z*e+A*g+w*n+x*s;b[1]=z*i+A*h+w*m+x*u;b[2]=z*k+A*j+w*p+x*v;b[3]=z*f+A*q+w*r+x*a;z=c[4];A=c[5];w=c[6];x=c[7];b[4]=z*e+A*g+w*n+x*s;b[5]=z*i+A*h+w*m+x*u;b[6]=z*k+A*j+w*p+x*v;b[7]=z*f+A*q+w*r+x*a;z=c[8];A=c[9];w=c[10];x=c[11];b[8]=z*e+A*g+w*n+x*s;b[9]=z*i+A*h+w*m+x*u;b[10]=z*k+A*j+w*p+x*v;b[11]=z*f+A*q+w*r+x*a;z=c[12];A=c[13];w=c[14];x=c[15];b[12]=z*e+A*g+w*n+x*s;b[13]=
z*i+A*h+w*m+x*u;b[14]=z*k+A*j+w*p+x*v;b[15]=z*f+A*q+w*r+x*a;return b}};v.mul=v.multiply;v.translate=function(b,a,c){var e=c[0],i=c[1];c=c[2];var k,f,g,h,j,q,n,m,p,r,s,u;a===b?(b[12]=a[0]*e+a[4]*i+a[8]*c+a[12],b[13]=a[1]*e+a[5]*i+a[9]*c+a[13],b[14]=a[2]*e+a[6]*i+a[10]*c+a[14],b[15]=a[3]*e+a[7]*i+a[11]*c+a[15]):(k=a[0],f=a[1],g=a[2],h=a[3],j=a[4],q=a[5],n=a[6],m=a[7],p=a[8],r=a[9],s=a[10],u=a[11],b[0]=k,b[1]=f,b[2]=g,b[3]=h,b[4]=j,b[5]=q,b[6]=n,b[7]=m,b[8]=p,b[9]=r,b[10]=s,b[11]=u,b[12]=k*e+j*i+p*c+
a[12],b[13]=f*e+q*i+r*c+a[13],b[14]=g*e+n*i+s*c+a[14],b[15]=h*e+m*i+u*c+a[15]);return b};v.scale=function(b,a,c){var e=c[0],i=c[1];c=c[2];b[0]=a[0]*e;b[1]=a[1]*e;b[2]=a[2]*e;b[3]=a[3]*e;b[4]=a[4]*i;b[5]=a[5]*i;b[6]=a[6]*i;b[7]=a[7]*i;b[8]=a[8]*c;b[9]=a[9]*c;b[10]=a[10]*c;b[11]=a[11]*c;b[12]=a[12];b[13]=a[13];b[14]=a[14];b[15]=a[15];return b};v.rotate=function(b,a,l,e){var i=e[0],f=e[1];e=e[2];var g=Math.sqrt(i*i+f*f+e*e),h,j,m,q,n,p,r,s,u,v,B,z,A,w,x,J,C,G,H,I;if(Math.abs(g)<c)return null;g=1/g;i*=
g;f*=g;e*=g;h=Math.sin(l);j=Math.cos(l);m=1-j;l=a[0];g=a[1];q=a[2];n=a[3];p=a[4];r=a[5];s=a[6];u=a[7];v=a[8];B=a[9];z=a[10];A=a[11];w=i*i*m+j;x=f*i*m+e*h;J=e*i*m-f*h;C=i*f*m-e*h;G=f*f*m+j;H=e*f*m+i*h;I=i*e*m+f*h;i=f*e*m-i*h;f=e*e*m+j;b[0]=l*w+p*x+v*J;b[1]=g*w+r*x+B*J;b[2]=q*w+s*x+z*J;b[3]=n*w+u*x+A*J;b[4]=l*C+p*G+v*H;b[5]=g*C+r*G+B*H;b[6]=q*C+s*G+z*H;b[7]=n*C+u*G+A*H;b[8]=l*I+p*i+v*f;b[9]=g*I+r*i+B*f;b[10]=q*I+s*i+z*f;b[11]=n*I+u*i+A*f;a!==b&&(b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);return b};
v.rotateX=function(b,a,c){var e=Math.sin(c);c=Math.cos(c);var i=a[4],f=a[5],g=a[6],h=a[7],j=a[8],m=a[9],q=a[10],n=a[11];a!==b&&(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[4]=i*c+j*e;b[5]=f*c+m*e;b[6]=g*c+q*e;b[7]=h*c+n*e;b[8]=j*c-i*e;b[9]=m*c-f*e;b[10]=q*c-g*e;b[11]=n*c-h*e;return b};v.rotateY=function(b,a,c){var e=Math.sin(c);c=Math.cos(c);var i=a[0],f=a[1],g=a[2],h=a[3],j=a[8],m=a[9],q=a[10],n=a[11];a!==b&&(b[4]=a[4],b[5]=a[5],b[6]=a[6],b[7]=a[7],
b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=i*c-j*e;b[1]=f*c-m*e;b[2]=g*c-q*e;b[3]=h*c-n*e;b[8]=i*e+j*c;b[9]=f*e+m*c;b[10]=g*e+q*c;b[11]=h*e+n*c;return b};v.rotateZ=function(b,a,c){var e=Math.sin(c);c=Math.cos(c);var i=a[0],f=a[1],g=a[2],h=a[3],j=a[4],m=a[5],q=a[6],n=a[7];a!==b&&(b[8]=a[8],b[9]=a[9],b[10]=a[10],b[11]=a[11],b[12]=a[12],b[13]=a[13],b[14]=a[14],b[15]=a[15]);b[0]=i*c+j*e;b[1]=f*c+m*e;b[2]=g*c+q*e;b[3]=h*c+n*e;b[4]=j*c-i*e;b[5]=m*c-f*e;b[6]=q*c-g*e;b[7]=n*c-h*e;return b};v.fromRotationTranslation=
function(b,a,c){var e=a[0],f=a[1],g=a[2],h=a[3],j=e+e,m=f+f,p=g+g;a=e*j;var q=e*m,e=e*p,n=f*m,f=f*p,g=g*p,j=h*j,m=h*m,h=h*p;b[0]=1-(n+g);b[1]=q+h;b[2]=e-m;b[3]=0;b[4]=q-h;b[5]=1-(a+g);b[6]=f+j;b[7]=0;b[8]=e+m;b[9]=f-j;b[10]=1-(a+n);b[11]=0;b[12]=c[0];b[13]=c[1];b[14]=c[2];b[15]=1;return b};v.fromQuat=function(b,a){var c=a[0],e=a[1],f=a[2],g=a[3],h=c+c,j=e+e,m=f+f,c=c*h,p=e*h,e=e*j,q=f*h,n=f*j,f=f*m,h=g*h,j=g*j,g=g*m;b[0]=1-e-f;b[1]=p+g;b[2]=q-j;b[3]=0;b[4]=p-g;b[5]=1-c-f;b[6]=n+h;b[7]=0;b[8]=q+j;
b[9]=n-h;b[10]=1-c-e;b[11]=0;b[12]=0;b[13]=0;b[14]=0;b[15]=1;return b};v.frustum=function(b,a,c,e,f,g,h){var j=1/(c-a),m=1/(f-e),p=1/(g-h);b[0]=2*g*j;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=2*g*m;b[6]=0;b[7]=0;b[8]=(c+a)*j;b[9]=(f+e)*m;b[10]=(h+g)*p;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*(h*g)*p;b[15]=0;return b};v.perspective=function(b,a,c,e,f){a=1/Math.tan(a/2);var g=1/(e-f);b[0]=a/c;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=a;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=(f+e)*g;b[11]=-1;b[12]=0;b[13]=0;b[14]=2*f*e*g;b[15]=0;
return b};v.ortho=function(b,a,c,e,f,g,h){var j=1/(a-c),m=1/(e-f),p=1/(g-h);b[0]=-2*j;b[1]=0;b[2]=0;b[3]=0;b[4]=0;b[5]=-2*m;b[6]=0;b[7]=0;b[8]=0;b[9]=0;b[10]=2*p;b[11]=0;b[12]=(a+c)*j;b[13]=(f+e)*m;b[14]=(h+g)*p;b[15]=1;return b};v.lookAt=function(b,a,e,f){var g,k,h,j,m,p,q,n,r=a[0],s=a[1];a=a[2];h=f[0];j=f[1];k=f[2];q=e[0];f=e[1];g=e[2];if(Math.abs(r-q)<c&&Math.abs(s-f)<c&&Math.abs(a-g)<c)return v.identity(b);e=r-q;f=s-f;q=a-g;n=1/Math.sqrt(e*e+f*f+q*q);e*=n;f*=n;q*=n;g=j*q-k*f;k=k*e-h*q;h=h*f-j*
e;(n=Math.sqrt(g*g+k*k+h*h))?(n=1/n,g*=n,k*=n,h*=n):h=k=g=0;j=f*h-q*k;m=q*g-e*h;p=e*k-f*g;(n=Math.sqrt(j*j+m*m+p*p))?(n=1/n,j*=n,m*=n,p*=n):p=m=j=0;b[0]=g;b[1]=j;b[2]=e;b[3]=0;b[4]=k;b[5]=m;b[6]=f;b[7]=0;b[8]=h;b[9]=p;b[10]=q;b[11]=0;b[12]=-(g*r+k*s+h*a);b[13]=-(j*r+m*s+p*a);b[14]=-(e*r+f*s+q*a);b[15]=1;return b};v.str=function(b){return"mat4("+b[0]+", "+b[1]+", "+b[2]+", "+b[3]+", "+b[4]+", "+b[5]+", "+b[6]+", "+b[7]+", "+b[8]+", "+b[9]+", "+b[10]+", "+b[11]+", "+b[12]+", "+b[13]+", "+b[14]+", "+
b[15]+")"};v.frob=function(b){return Math.sqrt(Math.pow(b[0],2)+Math.pow(b[1],2)+Math.pow(b[2],2)+Math.pow(b[3],2)+Math.pow(b[4],2)+Math.pow(b[5],2)+Math.pow(b[6],2)+Math.pow(b[7],2)+Math.pow(b[8],2)+Math.pow(b[9],2)+Math.pow(b[10],2)+Math.pow(b[11],2)+Math.pow(b[12],2)+Math.pow(b[13],2)+Math.pow(b[14],2)+Math.pow(b[15],2))};"undefined"!==typeof a&&(a.mat4=v);var p={create:function(){var b=new f(4);b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b}},B=h.create(),J=h.fromValues(1,0,0),L=h.fromValues(0,1,0);p.rotationTo=
function(b,a,c){var e=h.dot(a,c);if(-0.999999>e)return h.cross(B,J,a),1E-6>h.length(B)&&h.cross(B,L,a),h.normalize(B,B),p.setAxisAngle(b,B,Math.PI),b;if(0.999999<e)return b[0]=0,b[1]=0,b[2]=0,b[3]=1,b;h.cross(B,a,c);b[0]=B[0];b[1]=B[1];b[2]=B[2];b[3]=1+e;return p.normalize(b,b)};var C=e.create();p.setAxes=function(b,a,c,e){C[0]=c[0];C[3]=c[1];C[6]=c[2];C[1]=e[0];C[4]=e[1];C[7]=e[2];C[2]=-a[0];C[5]=-a[1];C[8]=-a[2];return p.normalize(b,p.fromMat3(b,C))};p.clone=j.clone;p.fromValues=j.fromValues;p.copy=
j.copy;p.set=j.set;p.identity=function(b){b[0]=0;b[1]=0;b[2]=0;b[3]=1;return b};p.setAxisAngle=function(b,a,c){c*=0.5;var e=Math.sin(c);b[0]=e*a[0];b[1]=e*a[1];b[2]=e*a[2];b[3]=Math.cos(c);return b};p.add=j.add;p.multiply=function(b,a,c){var e=a[0],f=a[1],g=a[2];a=a[3];var h=c[0],j=c[1],m=c[2];c=c[3];b[0]=e*c+a*h+f*m-g*j;b[1]=f*c+a*j+g*h-e*m;b[2]=g*c+a*m+e*j-f*h;b[3]=a*c-e*h-f*j-g*m;return b};p.mul=p.multiply;p.scale=j.scale;p.rotateX=function(a,c,e){e*=0.5;var f=c[0],g=c[1],k=c[2];c=c[3];var h=Math.sin(e);
e=Math.cos(e);a[0]=f*e+c*h;a[1]=g*e+k*h;a[2]=k*e-g*h;a[3]=c*e-f*h;return a};p.rotateY=function(a,c,e){e*=0.5;var f=c[0],g=c[1],h=c[2];c=c[3];var j=Math.sin(e);e=Math.cos(e);a[0]=f*e-h*j;a[1]=g*e+c*j;a[2]=h*e+f*j;a[3]=c*e-g*j;return a};p.rotateZ=function(a,c,e){e*=0.5;var f=c[0],g=c[1],h=c[2];c=c[3];var j=Math.sin(e);e=Math.cos(e);a[0]=f*e+g*j;a[1]=g*e-f*j;a[2]=h*e+c*j;a[3]=c*e-h*j;return a};p.calculateW=function(a,c){var e=c[0],f=c[1],g=c[2];a[0]=e;a[1]=f;a[2]=g;a[3]=Math.sqrt(Math.abs(1-e*e-f*f-
g*g));return a};p.dot=j.dot;p.lerp=j.lerp;p.slerp=function(a,c,e,f){var g=c[0],h=c[1],j=c[2];c=c[3];var m=e[0],p=e[1],r=e[2];e=e[3];var q,n,s;n=g*m+h*p+j*r+c*e;0>n&&(n=-n,m=-m,p=-p,r=-r,e=-e);1E-6<1-n?(q=Math.acos(n),s=Math.sin(q),n=Math.sin((1-f)*q)/s,f=Math.sin(f*q)/s):n=1-f;a[0]=n*g+f*m;a[1]=n*h+f*p;a[2]=n*j+f*r;a[3]=n*c+f*e;return a};p.invert=function(a,c){var e=c[0],f=c[1],g=c[2],h=c[3],j=e*e+f*f+g*g+h*h,j=j?1/j:0;a[0]=-e*j;a[1]=-f*j;a[2]=-g*j;a[3]=h*j;return a};p.conjugate=function(a,c){a[0]=
-c[0];a[1]=-c[1];a[2]=-c[2];a[3]=c[3];return a};p.length=j.length;p.len=p.length;p.squaredLength=j.squaredLength;p.sqrLen=p.squaredLength;p.normalize=j.normalize;p.fromMat3=function(a,c){var e=c[0]+c[4]+c[8];if(0<e)e=Math.sqrt(e+1),a[3]=0.5*e,e=0.5/e,a[0]=(c[5]-c[7])*e,a[1]=(c[6]-c[2])*e,a[2]=(c[1]-c[3])*e;else{var f=0;c[4]>c[0]&&(f=1);c[8]>c[3*f+f]&&(f=2);var g=(f+1)%3,h=(f+2)%3,e=Math.sqrt(c[3*f+f]-c[3*g+g]-c[3*h+h]+1);a[f]=0.5*e;e=0.5/e;a[3]=(c[3*g+h]-c[3*h+g])*e;a[g]=(c[3*g+f]+c[3*f+g])*e;a[h]=
(c[3*h+f]+c[3*f+h])*e}return a};p.str=function(a){return"quat("+a[0]+", "+a[1]+", "+a[2]+", "+a[3]+")"};"undefined"!==typeof a&&(a.quat=p)})(GLMAT);try{module.exports=GLMAT}catch(e$$10){}try{glm.exists&&alert("glm.common.js loaded over exist glm instance: "+glm)}catch(e$$11){}glm=null;GLMJS_PREFIX="glm-js: ";
var GLMJSError=function(a,c){function f(f){this.name=a;Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack;this.message=f;c&&c.apply(this,arguments)}f.prototype=Error();f.prototype.name=a;return f.prototype.constructor=f}("GLMJSError");
$GLM_extern=function(a,c){c=c||a;return function(){GLM[c]=GLM.$outer.functions[a]||GLM.$outer[a];if(!GLM[c])throw new GLMJSError("$GLM_extern: unresolved external symbol: "+a);GLM.$DEBUG&&GLM.$outer.console.debug("$GLM_extern: resolved external symbol "+a+" "+typeof GLM[c]);return GLM[c].apply(this,arguments)}};
$GLM_reset_logging=function(a){if(a||"undefined"===typeof $GLM_log)$GLM_log=function(a,c){GLM.$outer.console.log.apply(GLM.$outer.console,[].slice.call(arguments).map(function(a){return GLM.$isGLMObject(a)||!isNaN(a)?GLM.to_string(a):a+""}))};if(a||"undefined"===typeof $GLM_console_log)$GLM_console_log=function(a,c){(console[a]||function(){}).apply(console,[].slice.call(arguments,1))};if(a||"undefined"===typeof $GLM_console_logger)$GLM_console_logger=function(a){return $GLM_console_log.bind($GLM_console_log,
a)};var c=$GLM_console_logger,f={};"debug,warn,info,error,log,write".replace(/\w+/g,function(a){f[a]=c(a)});"object"===typeof GLM&&GLM.$outer&&(GLM.$outer.console=f);return f};
GLM={$DEBUG:"undefined"!==typeof $GLM_DEBUG&&$GLM_DEBUG,version:"0.0.2",GLM_VERSION:95,$outer:{functions:{},intern:function(a,c){if(void 0===c&&"object"===typeof a)for(var f in a)GLM.$outer.intern(f,a[f]);else return GLM.$DEBUG&&GLM.$outer.console.debug("intern "+a,c&&(c.name||typeof c)),GLM.$outer[a]=c},$import:function(a){GLM.$outer.intern(a.statics);GLM.$template.extend(GLM,GLM.$template.functions(a.functions),GLM.$template.operations(a.operations),GLM.$template.calculators(a.calculators));GLM.$init(a)},
console:$GLM_reset_logging(),quat_array_from_xyz:function(a){var c=glm.quat();c["*="](glm.angleAxis(a.x,glm.vec3(1,0,0)));c["*="](glm.angleAxis(a.y,glm.vec3(0,1,0)));c["*="](glm.angleAxis(a.z,glm.vec3(0,0,1)));return c.elements},quat_array_from_zyx:function(a){var c=glm.quat();c["*="](glm.angleAxis(a.z,glm.vec3(0,0,1)));c["*="](glm.angleAxis(a.y,glm.vec3(0,1,0)));c["*="](glm.angleAxis(a.x,glm.vec3(1,0,0)));return c.elements},_vec3_eulerAngles:function(a){var c=this.mat4_array_from_quat(a);a=c[0];
var f=c[4],g=c[1],e=c[5],m=c[2],r=c[6],c=c[10],h=new glm.vec3;h.y=Math.asin(-glm._clamp(m,-1,1));0.99999>Math.abs(m)?(h.x=Math.atan2(r,c),h.z=Math.atan2(g,a)):(h.x=0,h.z=Math.atan2(-f,e));return h}},$extern:$GLM_extern,$log:$GLM_log,GLMJSError:GLMJSError,_radians:function(a){return a*Math.PI/180},_degrees:function(a){return 180*a/Math.PI},normalize:$GLM_extern("normalize"),inverse:$GLM_extern("inverse"),length:$GLM_extern("length"),length2:$GLM_extern("length2"),transpose:$GLM_extern("transpose"),
mix:$GLM_extern("mix"),clamp:$GLM_extern("clamp"),angleAxis:$GLM_extern("angleAxis"),rotate:$GLM_extern("rotate"),scale:$GLM_extern("scale"),translate:$GLM_extern("translate"),perspective:function(a,c,f,g){return GLM.$outer.mat4_perspective(a,c,f,g)},eulerAngles:function(a){return GLM.$outer.vec3_eulerAngles(a)},angle:function(a){return 2*Math.acos(a.w)},axis:function(a){var c=1-a.w*a.w;if(0>=c)return glm.vec3(0,0,1);c=1/Math.sqrt(c);return glm.vec3(a.x*c,a.y*c,a.z*c)},make_vec2:function(a){return new GLM.vec2([].slice.call(a,
0,2))},make_vec3:function(a){return new GLM.vec3([].slice.call(a,0,3))},make_vec4:function(a){return new GLM.vec4([].slice.call(a,0,4))},make_quat:function(a){return new GLM.quat([].slice.call(a,0,4))},make_mat3:function(a){return new GLM.mat3([].slice.call(a,0,9))},make_mat4:function(a){return new GLM.mat4([].slice.call(a,0,16))},diagonal4x4:function(a){if("vec4"!==a.$type)throw new GLMJSError("unsupported argtype to GLM.diagonal4x4: "+["type:"+type.o]);return new GLM.mat4(a)},toMat4:function(a){return new GLM.mat4(a)},
FAITHFUL:!0,to_string:function(a,c){try{var f=a.$type||typeof a;if(!GLM[f])throw new GLMJSError("unsupported argtype to GLM.to_string: "+["type:"+f,a]);return GLM.FAITHFUL?GLM.$to_string(a,c).replace(/[\t\n]/g,""):GLM.$to_string(a,c)}catch(g){return GLM.$DEBUG&&GLM.$outer.console.error("to_string error: ",f,a+"",g),g+""}},$sizeof:function(a){return a.BYTES_PER_ELEMENT},$types:[],$isGLMConstructor:function(a){return!!(a&&a.prototype instanceof GLM.$GLMBaseType)},$getGLMType:function(a){return a instanceof
GLM.$GLMBaseType&&a.constructor||"string"===typeof a&&GLM[a]},$isGLMObject:function(a){return a instanceof GLM.$GLMBaseType&&a.$type},$to_array:function(a){return[].slice.call(a.elements)},$to_json:function(a,c,f){this instanceof GLM.$GLMBaseType&&(f=c,c=a,a=this);return JSON.stringify(GLM.$to_object(a),c,f)},$inspect:function(a){this instanceof GLM.$GLMBaseType&&(a=this);return GLM.$to_json(a,null,2)},_clamp:function(a,c,f){return a<c?c:a>f?f:a},max:function(a,c){return Math.max(a,c)},min:function(a,
c){return Math.min(a,c)},_sign:function(a){return 0<a?1:0>a?-1:+a},epsilon:function(){return 1E-6},FIXEDPRECISION:6,$toFixedString:function(a,c,f,g){g=void 0===g?GLM.FIXEDPRECISION:g;if(!f||!f.map)throw Error("unsupported argtype to $toFixedString(..,..,props="+typeof f+")");try{var e="";f.map(function(a){a=c[e=a];if(!a.toFixed)throw Error("!toFixed in w");return a.toFixed(0)})}catch(m){throw GLM.$DEBUG&&GLM.$outer.console.error("$toFixedString error",a,typeof c,Object.prototype.toString.call(c),
e),GLM.$DEBUG&&glm.$log("$toFixedString error",a,typeof c,Object.prototype.toString.call(c),e),new GLMJSError(m);}f=f.map(function(a){return c[a].toFixed(g)});return a+"("+f.join(", ")+")"}};GLM.sign=Math.sign||GLM._sign;
GLM.$GLMBaseType=function(){function a(a,f){var g=a.$||{};this.$type=f;this.$type_name=g.name||"<"+f+">";g.components&&(this.$components=g.components[0]);this.$len=this.components=a.componentLength;this.constructor=a;this.byteLength=a.BYTES_PER_ELEMENT;this.repr=function(){return"function $GLMBaseType<"+f+">(){ [ GLMType@"+GLM.$template.$_module_stamp+" ] }"};GLM.$outer.console.info("CREATED $class: "+this.repr());GLM.$types.push(f)}a.prototype={clone:function(){return new this.constructor(this)},
toString:function(){return GLM.$to_string(this)},inspect:function(){return GLM.$inspect(this)}};Object.defineProperty(a.prototype,"address",{get:function(){var a=this.elements.byteOffset.toString(16);return"0x00000000".substr(0,10-a.length)+a}});return a}();
var GLM_template=GLM.$template={_genArgError:function(a,c,f,g){~g.indexOf(void 0)&&(g=g.slice(0,g.indexOf(void 0)));var e=RegExp.prototype.test.bind(/^[^$_]/);return new GLMJSError("unsupported argtype to "+c+""+a.$sig+": [typ="+f+"] :: got arg types: "+g.map(GLM_template.jstypes.get)+" // supported types: "+Object.keys(a).filter(e).join("||"))},jstypes:{get:function(a){return null===a?"null":void 0===a?"undefined":a.$type||GLM_template.jstypes[typeof a]||GLM_template.jstypes[a+""]||"<unknown "+[typeof a,
a]+">"},"0":"float",number:"float",string:"string","[object Float32Array]":"Float32Array"},"<T>":function(a,c){var f=GLM_template.jstypes;a.$sig="<T>";return this.slingshot({$template:a},eval(this._traceable("glm_"+c,function(g){this instanceof GLM.$GLMBaseType&&(g=this);var e=[g&&g.$type||f[typeof g]||"null"];if(!a[e])throw GLM_template._genArgError(a,c,e,[g]);return a[e](g)}))())},"<T,...>":function(a,c){var f=GLM_template.jstypes;a.$sig="<T,...>";return this.slingshot({$template:a},eval(this._traceable("glm_"+
c,function(g){var e=[].slice.call(arguments);this instanceof GLM.$GLMBaseType&&e.unshift(g=this);var m=[g&&g.$type||f[typeof g]||"null"];if(!a[m])throw GLM_template._genArgError(a,c,m,e);return a[m].apply(a,e)}))())},"<T,V,n>":function(a,c){var f=GLM_template.jstypes;a.$sig="<T,V,n>";return this.slingshot({$template:a},eval(this._traceable("glm_"+c,function(g,e,m){this instanceof GLM.$GLMBaseType&&(m=e,e=g,g=this);var r=[g&&g.$type||f[typeof g]||f[g+""]||"<unknown "+g+">",e&&e.$type||f[typeof e]||
f[e+""]||"<unknown "+e+">"];if(!a[r])throw GLM_template._genArgError(a,c,r,[g,e,m]);if("number"!==typeof m)throw new GLMJSError(c+a.$sig+": unsupported n type: "+[typeof m,m]);return a[r](g,e,m)}))())},"<T,V>":function(a,c){var f=GLM_template.jstypes;a.$sig="<T,V>";return this.slingshot({$template:a},eval(this._traceable("glm_"+c,function(g,e,m,r,h){this instanceof GLM.$GLMBaseType&&(h=r,r=m,m=e,e=g,g=this);var s=[g&&g.$type||f[typeof g],e&&e.$type||f[typeof e]||f[e+""]||Array.isArray(e)&&"array"+
e.length+""||""+e+""];if(!a[s])throw GLM_template._genArgError(a,c,s,[g,e,m,r,h]);return a[s](g,e,m,r,h)}))())},override:function(a,c,f,g){GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: ",a,c,f.$op?'$op: ["'+f.$op+'"]':"");if(!g)throw Error("unspecified target group "+g+' (expected override(<TV>, "p", {TSP}, ret={GROUP}))');var e=g[c];if(e&&e.$op!==f.$op)throw Error('glm.$template.override: mismatch merging existing override: .$op "'+[e.$op,"!=",f.$op].join(" ")+'"  p='+[c,e.$op,f.$op,
"||"+Object.keys(e.$template).join("||")]);var m=GLM_template[a](GLM_template.deNify(f,c),c);m.$op=f.$op;if(e){var r=[],h;for(h in m.$template)h in e.$template||(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+c+" ... "+h+" overlayed"),e.$template[h]=m.$template[h]);Object.keys(e.$template).forEach(function(a){a in m.$template||(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+c+" ... "+a+" carried-forward"),r.push(a))});GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+
c+" ... "+Object.keys(g[c].$template).filter(function(a){return!~a.indexOf("$")}).map(function(a){return!~r.indexOf(a)?"*"+a+"*":a}).join(" | "))}else g[c]=m,GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+c+" ... "+Object.keys(g[c].$template).filter(function(a){return!~a.indexOf("$")}).map(function(a){return"*"+a+"*"}).join(" | "));return g},_override:function(a,c,f){for(var g in c)this.override(a,g,c[g],f);return f},slingshot:function(){return this.extend.apply(this,[].reverse.call(arguments))},
extend:function(a,c){[].slice.call(arguments,1).forEach(function(c){for(var g in c)c.hasOwnProperty(g)&&(a[g]=c[g])});return a},operations:function(a){return this._override("<T,V>",a,GLM.$outer.functions)},calculators:function(a){return this._override("<T>",a,GLM.$outer.functions)},varargs_functions:function(a){return this._override("<T,...>",a,GLM.$outer.functions)},functions:function(a){return this._override("<T,V,n>",a,GLM.$outer.functions)},_tojsname:function(a){return(a||"_").replace(/[^$a-zA-Z0-9_]/g,
"_")},_traceable:function(a,c){if("function"!==typeof c)throw new GLMJSError("_traceable expects tidy function as first arg "+c);if(!a)throw new GLMJSError("_traceable expects hint or what's the point"+[c,a]);a=this._tojsname(a||"_traceable");c+="";if(2===c.split(/^\s*function\b/).length)c=(function(){SRC;return HINT}+"").replace("HINT",a).replace("SRC",c.replace(/^function\s*\(/,"function "+a+"("));else throw new GLMJSError("expected singular anonymous function: "+[c,a]);return"1,"+c},deNify:function(a,
c){var f={vec:[2,3,4],mat:[3,4]},g=this._tojsname.bind(this),e;for(e in a){var m=!1;e.replace(/([vV]ec|[mM]at)(?:\w*)<N>/,function(r,h){m=!0;var s=a[e];delete a[e];f[h.toLowerCase()].forEach(function(f){var h=e.replace(/<N[*]N>/g,f*f).replace(/<N>/g,f);if(!(h in a)){var m=g("glm_"+c+"_"+h);a[h]=(new Function("","return "+(s+"").replace(/^function\s*\(/,"function "+m+"(").replace(/N[*]N/g,f*f).replace(/N/g,f)))()}})}.bind(this));!m&&("function"===typeof a[e]&&!a[e].name)&&(GLM.$DEBUG&&GLM.$outer.console.debug("naming "+
g(c+"_"+e)),a[e]=eval(this._traceable("glm_"+c+"_"+e,a[e]))())}return a},$_module_stamp:+new Date,GLMType:function(a,c){var f=c.identity.length;Object.keys(c).filter(function(a){return"function"===typeof c[a]&&!c[a].name}).map(function(e){var f=a+"_"+e;GLM.$DEBUG&&GLM.$outer.console.debug("naming $."+e+" == "+f,this._traceable(f,c[e]));c[e]=eval(this._traceable("glm_"+f,c[e]))()}.bind(this));var g=eval(this._traceable("glm_"+a+"$class",function(e){var m=typeof e+arguments.length,r=c[m];if(!r)throw new GLMJSError("no template found for "+
a+".$."+m);if(this instanceof g){if(e instanceof Float32Array){if(e.length>f)throw glm.$outer.console.error(a+" elements size mismatch: "+["wanted:"+f,"handed:"+e.length]),m=e.subarray(0,f),Error(a+" elements size mismatch: "+["wanted:"+f,"handed:"+e.length,,"correctable?:"+m.length]);elements=e}else(elements=new Float32Array(f)).set(r.apply(c,arguments));Object.defineProperty(this,"elements",{enumerable:!1,configurable:!0,value:elements})}else return new g(r.apply(c,arguments))}))();c.components=
c.components?c.components.map(function(a){return"string"===typeof a?a.split(""):a}):[];g.$=c;g.componentLength=f;g.BYTES_PER_ELEMENT=f*Float32Array.BYTES_PER_ELEMENT;g.prototype=new GLM.$GLMBaseType(g,a);return g}};
GLM.$template.functions({mix:{"float,float":function(a,c,f){return c*f+a*(1-f)},"vec<N>,vec<N>":function(a,c,f){if(void 0===f)throw Error("glm.mix<vecN,vecN>(v,n,rt) requires 3 arguments");a=glm.$to_array(a);c=glm.$to_array(c);var g=1-f;return new glm.vecN(a.map(function(a,m){return c[m]*f+a*g}))}},clamp:{"float,float":function(a,c,f){return GLM._clamp(a,c,f)},"vec<N>,float":function(a,c,f){return new GLM.vecN(GLM.$to_array(a).map(function(a){return GLM._clamp(a,c,f)}))}}});
GLM.$template.extend(GLM,GLM.$template.calculators({degrees:{"float":function(a){return GLM._degrees(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._degrees))}},radians:{"float":function(a){return GLM._radians(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._radians))}},$to_object:{vec2:function(a){return{x:a.x,y:a.y}},vec3:function(a){return{x:a.x,y:a.y,z:a.z}},vec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},uvec4:function(a){return{x:a.x,y:a.y,z:a.z,
w:a.w}},quat:function(a){return{w:a.w,x:a.x,y:a.y,z:a.z}},mat3:function(a){return{"0":this.vec3(a[0]),1:this.vec3(a[1]),2:this.vec3(a[2])}},mat4:function(a){return{"0":this.vec4(a[0]),1:this.vec4(a[1]),2:this.vec4(a[2]),3:this.vec4(a[3])}}},$to_glsl:{"vec<N>":function(a){for(var c=GLM.$to_array(a);c.length&&c[c.length-2]===c[c.length-1];)c.pop();return a.$type+"("+c+")"},uvec4:function(a){return this.vec4(a)},quat:function(a){return 0===a.x+a.y+a.z?"quat("+a.w+")":"quat("+GLM.$to_array(a)+")"},"mat<N>":function(a){a=
GLM.$to_array(a);return a.reduce(function(a,f){return a+f},0)===a[0]*N?"matN("+a[0]+")":"matN("+a+")"}},$from_glsl:{string:function(a){var c;a.replace(/^(\w+)\(([-.0-9ef, ]+)\)$/,function(a,g,e){c=glm[g].apply(glm,e.split(",").map(parseFloat))});return c}}}));
GLM.$template.operations({rotate:{"float,vec3":function(a,c){return GLM.$outer.mat4_angleAxis(a,c)},"mat4,float":function(a,c,f){return a.mul(GLM.$outer.mat4_angleAxis(c,f))}},scale:{"mat4,vec3":function(a,c){return a.mul(GLM.$outer.mat4_scale(c))},"vec3,undefined":function(a){return GLM.$outer.mat4_scale(a)}},translate:{"mat4,vec3":function(a,c){return a.mul(GLM.$outer.mat4_translation(c))},"vec3,undefined":function(a){return GLM.$outer.mat4_translation(a)}},angleAxis:{"float,vec3":function(a,c){return GLM.$outer.quat_angleAxis(a,
c)},"float,float":function(a,c,f,g){return GLM.$outer.quat_angleAxis(a,glm.vec3(c,f,g))}}});
GLM.$to_string=GLM.$template.varargs_functions({$to_string:{"float":function(a,c){return GLM.$toFixedString("float",{value:a},["value"],c)},string:function(a){return a},"vec<N>":function(a,c){return GLM.$toFixedString(a.$type_name,a,a.$components,c)},uvec4:function(a){return a.$type_name+"("+glm.$to_array(a)+")"},"mat<N>":function(a,c){var f=[0,1,2,3].slice(0,N).map(function(c){return a[c]}).map(function(a){return GLM.$toFixedString("\t",a,a.$components,c)});return a.$type_name+"(\n"+f.join(", \n")+
"\n)"},quat:function(a,c){a=GLM.degrees(GLM.eulerAngles(a));return GLM.$toFixedString("<quat>"+a.$type_name,a,["x","y","z"],c)}}}).$to_string;
GLM.$template.operations({copy:{$op:"=","vec<N>,vec<N>":function(a,c){a.elements.set(c.elements);return a},"vec<N>,array<N>":function(a,c){a.elements.set(c);return a},"quat,quat":function(a,c){a.elements.set(c.elements);return a},"mat<N>,mat<N>":function(a,c){a.elements.set(c.elements);return a},"mat<N>,array<N>":function(a,c){c=c.reduce(function(a,c){if(!a.concat)throw new GLMJSError("matN,arrayN -- [[.length===4] x 4] expected");return a.concat(c)});if(c===N)throw new GLMJSError("matN,arrayN -- [[N],[N],[N],[N]] expected");
return a["="](c)},"mat<N>,array<N*N>":function(a,c){a.elements.set(c);return a},"mat4,array9":function(a,c){a.elements.set((new glm.mat4(c)).elements);return a}},sub:{$op:"-","vec<N>,vec<N>":function(a,c){return new glm.vecN(glm.$to_array(a).map(function(a,g){return a-c[g]}))}},add:{$op:"+","vec<N>,vec<N>":function(a,c){return new glm.vecN(glm.$to_array(a).map(function(a,g){return a+c[g]}))}},eql:{$op:"==",$eq:function(a,c){return c.elements.length===glm.$to_array(a).filter(function(a,g){return a===
c.elements[g]}).length},"vec<N>,vec<N>":function(a,c){return this.$eq(a,c)},"mat<N>,mat<N>":function(a,c){return this.$eq(a,c)},"quat,quat":function(a,c){return this.$eq(a,c)},"uvec4,uvec4":function(a,c){return this.$eq(a,c)}}});GLM.string={$type_name:"string",$:{}};GLM.number={$type_name:"float",$:{}};
GLM.vec2=GLM_template.GLMType("vec2",{name:"fvec2",identity:[0,0],components:["xy","01"],undefined0:function(){return this.identity},number1:function(a){return[a,a]},number2:function(a,c){return[a,c]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]];default:if("y"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec2: "+a);return[a.x,a.y]}}throw new GLMJSError("unrecognized object passed to GLM.vec2: "+a);}});
GLM.vec3=GLM_template.GLMType("vec3",{name:"fvec3",identity:[0,0,0],components:["xyz","012","rgb"],undefined0:function(){return GLM.vec3.$.identity},number1:function(a){return[a,a,a]},number2:function(a,c){return[a,c,c]},number3:function(a,c,f){return[a,c,f]},object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]];case 2:return[a[0],a[1],a[1]];default:if("z"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec3: "+a);return[a.x,
a.y,a.z]}}throw new GLMJSError("unrecognized object passed to GLM.vec3: "+a);},object2:function(a,c){if(a instanceof GLM.vec2)return[a.x,a.y,c];throw new GLMJSError("unrecognized object passed to GLM.vec3(o,z): "+[a,c]);}});
GLM.vec4=GLM_template.GLMType("vec4",{name:"fvec4",identity:[0,0,0,0],components:["xyzw","0123","rgba"],undefined0:function(){return this.identity},number1:function(a){return[a,a,a,a]},number2:function(a,c){return[a,c,c,c]},number3:function(a,c,f){return[a,c,f,f]},number4:function(a,c,f,g){return[a,c,f,g]},object1:function(a){if(a)switch(a.length){case 4:return[a[0],a[1],a[2],a[3]];case 3:return[a[0],a[1],a[2],a[2]];case 2:return[a[0],a[1],a[1],a[1]];default:if("w"in a&&"x"in a){if(typeof a.x!==typeof a.w)throw new GLMJSError("unrecognized .x-ish object passed to GLM.vec4: "+
a);return[a.x,a.y,a.z,a.w]}}throw new GLMJSError("unrecognized object passed to GLM.vec4: "+[a,a&&a.$type]);},object2:function(a,c){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,c];throw new GLMJSError("unrecognized object passed to GLM.vec4(o,w): "+[a,c]);},object3:function(a,c,f){if(a instanceof GLM.vec2)return[a.x,a.y,c,f];throw new GLMJSError("unrecognized object passed to GLM.vec4(o,z,w): "+[a,c,f]);}});
GLM.uvec4=GLM_template.GLMType("uvec4",{name:"uvec4",identity:[0,0,0,0],components:["xyzw","0123","rgba"],_clamp:function(a){return~~glm._clamp(a,0,Infinity)},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a,a]},number2:function(a,c){a=this._clamp(a);c=this._clamp(c);return[a,c,c,c]},number3:function(a,c,f){a=this._clamp(a);c=this._clamp(c);f=this._clamp(f);return[a,c,f,f]},number4:function(a,c,f,g){return[a,c,f,g].map(this._clamp)},object1:function(a){if(a)switch(a.length){case 4:return[a[0],
a[1],a[2],a[3]].map(this._clamp);case 3:return[a[0],a[1],a[2],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1],a[1]].map(this._clamp);default:if("w"in a&&"x"in a)return[a.x,a.y,a.z,a.w].map(this._clamp)}throw new GLMJSError("unrecognized object passed to GLM.uvec4: "+[a,a&&a.$type]);},object2:function(a,c){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,c].map(this._clamp);throw new GLMJSError("unrecognized object passed to GLM.uvec4(o,w): "+[a,c]);}});
GLM.mat3=GLM_template.GLMType("mat3",{name:"mat3x3",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,a,0,0,0,a]},number9:function(){return arguments},object1:function(a){if(a){var c=a.elements||a;if(16===c.length)return[c[0],c[1],c[2],c[4],c[5],c[6],c[8],c[9],c[10]];if(9===c.length)return c}throw new GLMJSError("unrecognized object passed to GLM.mat3: "+a);},object3:function(a,c,f){return[a,c,f].map(glm.$to_array).reduce(function(a,
c){return a.concat(c)})}});
GLM.mat4=GLM_template.GLMType("mat4",{name:"mat4x4",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number16:function(){return arguments},number1:function(a){return 1===a?this.identity:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]},object1:function(a){var c;if(a){if(a instanceof GLM.quat)return GLM.$outer.mat4_array_from_quat(a);c=a.elements||a;if(a instanceof GLM.vec4)return[c[0],0,0,0,0,c[1],0,0,0,0,c[2],0,0,0,0,c[3]];if(9===c.length)return[c[0],c[1],c[2],0,c[3],c[4],
c[5],0,c[6],c[7],c[8],0,0,0,0,1];if(16===c.length)return c}throw new GLMJSError("unrecognized object passed to GLM.mat4: "+[a,c&&c.length]);}});
GLM.quat=GLM_template.GLMType("quat",{identity:[0,0,0,1],components:["xyzw","0123"],undefined0:function(){return this.identity},number1:function(a){if(1!==a)throw Error("only quat(1) syntax supported for quat(number1 args)...");return this.identity},number4:function(a,c,f,g){return[c,f,g,a]},object1:function(a){if(a){if(a instanceof GLM.mat4)return GLM.$outer.quat_array_from_mat4(a);if(4===a.length)return[a[0],a[1],a[2],a[3]];if(a instanceof GLM.quat)return[a.x,a.y,a.z,a.w];if(a instanceof GLM.vec3)return GLM.$outer.quat_array_from_zyx(a);
if("w"in a&&"x"in a)return[a.x,a.y,a.z,a.w]}throw new GLMJSError("unrecognized object passed to GLM.quat.object1: "+[a,a&&a.$type,typeof a,a&&a.constructor]);}});
(function(){var a=function(a,c,e){var m=[0,1,2,3].map(function(a){return{enumerable:e,get:function(){return this.elements[a]},set:function(c){this.elements[a]=c}}});c.forEach(function(c,e){Object.defineProperty(a.prototype,c,m[e])});if(isNaN(c[0])&&!/^_/.test(c[0])){var r={xyz:{yz:1},xyzw:{yzw:1,yz:1,zw:2}}[c.join("")];if(r)for(var h in r)(function(c,e,g,h){Object.defineProperty(a.prototype,c,{enumerable:!1,get:function(){return new GLM[e](this.elements.subarray(0*g+h,1*g+h))},set:function(a){return(new GLM[e](this.elements.subarray(0*
g+h,1*g+h)))["="](a)}})})(h,a.prototype.$type.replace(/[1-9]$/,h.length),h.length,r[h]);do(function(c,e,g){Object.defineProperty(a.prototype,c,{enumerable:!1,get:function(){return new GLM[e](this.elements.subarray(0*g,1*g))},set:function(a){return(new GLM[e](this.elements.subarray(0*g,1*g)))["="](a)}})})(c.join(""),a.prototype.$type.replace(/[1-9]$/,c.length),c.length);while(c[1]!=c.pop())}};a(GLM.vec2,["x","y"],!0);a(GLM.vec3,["x","y","z"],!0);a(GLM.vec3,["r","g","b"]);a(GLM.vec4,["x","y","z","w"],
!0);a(GLM.vec4,["r","g","b","a"]);a(GLM.quat,["x","y","z","w"],!0);a(GLM.uvec4,["x","y","z","w"],!0);a(GLM.uvec4,["0","1","2","3"]);Object.defineProperty(GLM.quat.prototype,"_x",{get:function(){throw Error("erroneous quat._x access");}});[2,3,4].forEach(function(c){c=GLM["vec"+c];a(c,c.$.identity.map(function(a,c){return c}))});var c=Float32Array.BYTES_PER_ELEMENT;GLM.$partition=function(a,g,e,m){if(void 0===e)throw new GLMJSError("nrows is undefined");var r=g.$.identity.length;e=e||r;for(var h=function(a){GLM.$DEBUG&&
GLM.$outer.console.debug("CACHEDBG: "+a)},s=c*r,j=0;j<e;j++)(function(c){var e=c*s,j=m&&m+c,B=c*r;Object.defineProperty(a,c,{configurable:!0,enumerable:!0,set:function(e){if(e instanceof g)this.elements.set(e.elements,B);else if(e&&e.length===r)this.elements.set(e,B);else throw new GLMJSError("unsupported argtype to "+(a&&a.$type)+"["+c+"] setter: "+[typeof e,e]);},get:function(){if(m){if(this[j])return c||h("cache hit "+j),this[j];c||h("cache miss "+j)}var a,f=new g(a=new Float32Array(this.elements.buffer,
this.elements.byteOffset+e,r));if(f.elements!==a)throw new GLMJSError("v.elements !== t");m&&Object.defineProperty(this,j,{configurable:!0,enumerable:!1,value:f});return f}})})(j)};GLM.$partition(GLM.mat4.prototype,GLM.vec4,4,"_cache_");GLM.$partition(GLM.mat3.prototype,GLM.vec3,3,"_cache_")})();GLM.$dumpTypes=function(a){GLM.$types.forEach(function(c){GLM[c].componentLength&&a("GLM."+c,JSON.stringify({"#type":GLM[c].prototype.$type_name,"#floats":GLM[c].componentLength,"#bytes":GLM[c].BYTES_PER_ELEMENT}))})};
GLM.$init=function(a){a.prefix&&(GLMJS_PREFIX=a.prefix);var c=a.log||function(){};try{c("GLM-js: ENV: "+_ENV._VERSION)}catch(f){}c("GLM-JS: initializing: "+JSON.stringify(a,0,2));c(JSON.stringify({functions:Object.keys(GLM.$outer.functions)}));GLM.$outer.vec3_eulerAngles=GLM.$outer.vec3_eulerAngles||GLM.$outer._vec3_eulerAngles;GLM.$symbols=[];for(var g in GLM)"function"===typeof GLM[g]&&/^[a-z]/.test(g)&&GLM.$symbols.push(g);GLM.$types.forEach(function(a){var c=GLM[a].prototype.$type,f;for(f in GLM.$outer.functions){var g=
GLM.$outer.functions[f];g.$op&&(GLM.$DEBUG&&GLM.$outer.console.debug("mapping operator<"+c+"> "+f+" / "+g.$op),GLM[a].prototype[f]=g,GLM[a].prototype[g.$op]=g)}});c("GLM-JS: "+GLM.version+" emulating GLM_VERSION="+GLM.GLM_VERSION+" vendor_name="+a.vendor_name+" vendor_version="+a.vendor_version);glm.vendor=a};
GLM.using_namespace=function(a){GLM.$DEBUG&&GLM.$outer.console.debug("GLM.using_namespace munges globals; it should probably not be used!");var c=[],f=GLM.$symbols,g=f.filter(function(a){return eval("1, 'undefined' !== typeof "+a)});f.map(function(a){var f="GLM.using_namespace."+a+"=undefined;delete GLM.using_namespace."+a+";";try{GLM.using_namespace[a]=eval("1,"+a),c.push(new Function("",a+"=GLM.using_namespace."+a+";"+f))}catch(g){c.push(new Function("",a+"=undefined;delete "+a+";"+f))}eval(a+"=GLM."+
a)});a=a();c.map(function(a){a()});f=f.filter(function(a){return eval("1, 'undefined' !== typeof "+a)});if(g.length!==f.length)throw Error(JSON.stringify({before:g,after:f,usn:Object.keys(GLM.using_namespace)}));return a};try{module.exports=GLM}catch(e$$17){}GLMAT.mat4.exists;glm=GLM;
var DLL={_version:"0.0.1",_name:"glm.gl-matrix.js",_glm_version:glm.version,prefix:"glm-js[glMatrix]: ",vendor_version:GLMAT.VERSION,vendor_name:"glMatrix",statics:{mat4_perspective:function(a,c,f,g){return new glm.mat4(GLMAT.mat4.perspective(new Float32Array(16),a,c,f,g))},mat4_angleAxis:function(a,c){var f=GLMAT.quat.setAxisAngle(new Float32Array(4),c,a);return new glm.mat4(GLMAT.mat4.fromQuat(new Float32Array(16),f))},quat_angleAxis:function(a,c){return new glm.quat(GLMAT.quat.setAxisAngle(new Float32Array(4),
c,a))},mat4_translation:function(a){var c=new glm.mat4;GLMAT.mat4.translate(c.elements,c.elements,a.elements);return c},mat4_scale:function(a){var c=new glm.mat4;GLMAT.mat4.scale(c.elements,c.elements,a.elements);return c},vec3_eulerAngles:function(a){var c=new Float32Array(16);GLMAT.mat4.fromQuat(c,a.elements);a=c[0];var f=c[4],g=c[1],e=c[5],m=c[2],r=c[6],c=c[10],h=new glm.vec3;h.y=Math.asin(-glm.clamp(m,-1,1));0.99999>Math.abs(m)?(h.x=Math.atan2(r,c),h.z=Math.atan2(g,a)):(h.x=0,h.z=Math.atan2(-f,
e));return h},mat4_array_from_quat:function(a){return GLMAT.mat4.fromQuat(new Float32Array(16),a.elements)},quat_array_from_mat4:function(a){a=GLMAT.mat3.fromMat4(new Float32Array(9),a.elements);return GLMAT.quat.fromMat3(new Float32Array(4),a)}},operations:{mul:{$op:"*","quat,vec3":function(a,c){return new glm.vec3(GLMAT.vec3.transformQuat(new Float32Array(3),c.elements,a.elements))},"vec3,quat":function(a,c){return this["quat,vec3"](c,a)},"vec4,quat":function(a,c){return new glm.vec4(this["quat,vec3"](c,
a),1)},"vec<N>,float":function(a,c){return new glm.vecN(GLMAT.vecN.scale(new Float32Array(N),a.elements,c))},"mat4,vec4":function(a,c){return new glm.vec4(GLMAT.vec4.transformMat4(new Float32Array(4),c.elements,a.elements))},"mat<N>,mat<N>":function(a,c){return new glm.matN(GLMAT.matN.mul(new Float32Array(N*N),a.elements,c.elements))},"quat,quat":function(a,c){return new glm.quat(GLMAT.quat.multiply(new Float32Array(4),a.elements,c.elements))}},mul_eq:{$op:"*=","mat<N>,mat<N>":function(a,c){GLMAT.matN.multiply(a.elements,
a.elements,c.elements);return a},"vec<N>,float":function(a,c){return GLMAT.vecN.scale(a,a,c)},"quat,quat":function(a,c){GLMAT.quat.multiply(a.elements,a.elements,c.elements);return a}}},functions:{mix:{"quat,quat":function(a,c,f){return new glm.quat(GLMAT.quat.slerp(new Float32Array(4),a.elements,c.elements,f))}}},calculators:{normalize:{"vec<N>":function(a){return new glm.vecN(GLMAT.vecN.normalize(new Float32Array(N),a))},quat:function(a){return new glm.quat(GLMAT.quat.normalize(new Float32Array(4),
a.elements))}},length:{quat:function(a){return GLMAT.quat.length(a.elements)},"vec<N>":function(a){return GLMAT.vecN.length(a.elements)}},length2:{quat:function(a){return GLMAT.quat.squaredLength(a.elements)},"vec<N>":function(a){return GLMAT.vecN.squaredLength(a.elements)}},inverse:{quat:function(a){return new glm.quat(GLMAT.quat.invert(new Float32Array(4),a.elements))},mat4:function(a){return new glm.mat4(GLMAT.mat4.invert(new Float32Array(16),a.elements))}},transpose:{mat4:function(a){return new glm.mat4(GLMAT.mat4.transpose(new Float32Array(16),
a.elements))}}}};glm.$outer.$import(DLL);try{module.exports=glm}catch(e$$18){};
