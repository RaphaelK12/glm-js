tdl={};tdl.fast=tdl.fast||{};tdl.fast.temp0v3_=new Float32Array(3);tdl.fast.temp1v3_=new Float32Array(3);tdl.fast.temp2v3_=new Float32Array(3);tdl.fast.temp0v4_=new Float32Array(4);tdl.fast.temp1v4_=new Float32Array(4);tdl.fast.temp2v4_=new Float32Array(4);tdl.fast.temp0m4_=new Float32Array(16);tdl.fast.temp1m4_=new Float32Array(16);tdl.fast.temp2m4_=new Float32Array(16);tdl.fast.matrix4=tdl.fast.matrix4||{};tdl.fast.rowMajor=tdl.fast.rowMajor||{};tdl.fast.columnMajor=tdl.fast.columnMajor||{};
tdl.fast.addVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]+c[e];return a};tdl.fast.subVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]-c[e];return a};tdl.fast.lerpVector=function(a,b,c,d){for(var e=b.length,f=0;f<e;++f)a[f]=(1-d)*b[f]+d*c[f];return a};tdl.fast.divVectorScalar=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]/c;return a};tdl.fast.cross=function(a,b,c){a[0]=b[1]*c[2]-b[2]*c[1];a[1]=b[2]*c[0]-b[0]*c[2];a[2]=b[0]*c[1]-b[1]*c[0];return a};
tdl.fast.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};tdl.fast.normalize=function(a,b){for(var c=0,d=b.length,e=0;e<d;++e)c+=b[e]*b[e];c=Math.sqrt(c);if(1E-5<c)for(e=0;e<d;++e)a[e]=b[e]/c;else for(e=0;e<d;++e)a[e]=0;return a};tdl.fast.negativeVector=function(a,b){for(var c=b.length,d=0;d<c;++d)a[d]=-b[d];return a};tdl.fast.negativeMatrix=function(a,b){for(var c=b.length,d=0;d<c;++d)a[d]=-b[d];return a};tdl.fast.copyVector=function(a,b){a.set(b);return a};
tdl.fast.copyMatrix=function(a,b){a.set(b);return a};tdl.fast.mulScalarVector=function(a,b,c){for(var d=c.length,e=0;e<d;++e)a[e]=b*c[e];return a};tdl.fast.mulVectorScalar=function(a,b,c){return tdl.fast.mulScalarVector(a,c,b)};tdl.fast.mulScalarMatrix=function(a,b,c){for(var d=c.length,e=0;e<d;++e)a[e]=b*c[e];return a};tdl.fast.mulMatrixScalar=function(a,b,c){return tdl.fast.mulScalarMatrix(a,c,b)};tdl.fast.mulVectorVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]*c[e];return a};
tdl.fast.divVectorVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]/c[e];return a};tdl.fast.rowMajor.mulVectorMatrix4=function(a,b,c){for(var d=0;4>d;++d)for(var e=a[d]=0;4>e;++e)a[d]+=b[e]*c[4*e+d];return a};tdl.fast.columnMajor.mulVectorMatrix4=function(a,b,c){for(var d=0;4>d;++d){a[d]=0;for(var e=4*d,f=0;4>f;++f)a[d]+=b[f]*c[e+f]}return a};tdl.fast.mulVectorMatrix4=null;
tdl.fast.rowMajor.mulMatrix4Vector=function(a,b,c){for(var d=0;4>d;++d){a[d]=0;for(var e=4*d,f=0;4>f;++f)a[d]+=b[e+f]*c[f]}return a};tdl.fast.columnMajor.mulMatrix4Vector=function(a,b,c){for(var d=0;4>d;++d)for(var e=a[d]=0;4>e;++e)a[d]+=c[e]*b[4*e+d];return a};tdl.fast.mulMatrix4Vector=null;
tdl.fast.rowMajor.mulMatrixMatrix3=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],i=b[6],j=b[7];b=b[8];var l=c[0],p=c[1],q=c[2],m=c[3],n=c[4],r=c[5],s=c[6],t=c[7];c=c[8];a[0]=d*l+e*m+f*s;a[1]=d*p+e*n+f*t;a[2]=d*q+e*r+f*c;a[3]=g*l+h*m+k*s;a[4]=g*p+h*n+k*t;a[5]=g*q+h*r+k*c;a[6]=i*l+j*m+b*s;a[7]=i*p+j*n+b*t;a[8]=i*q+j*r+b*c;return a};
tdl.fast.columnMajor.mulMatrixMatrix3=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],i=b[6],j=b[7];b=b[8];var l=c[0],p=c[1],q=c[2],m=c[3],n=c[4],r=c[5],s=c[6],t=c[7];c=c[8];a[0]=d*l+g*p+i*q;a[1]=e*l+h*p+j*q;a[2]=f*l+k*p+b*q;a[3]=d*m+g*n+i*r;a[4]=e*m+h*n+j*r;a[5]=f*m+k*n+b*r;a[6]=d*s+g*t+i*c;a[7]=e*s+h*t+j*c;a[8]=f*s+k*t+b*c;return a};tdl.fast.mulMatrixMatrix3=null;
tdl.fast.rowMajor.mulMatrixMatrix4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],i=b[6],j=b[7],l=b[8],p=b[9],q=b[10],m=b[11],n=b[12],r=b[13],s=b[14];b=b[15];var t=c[0],u=c[1],v=c[2],w=c[3],z=c[4],A=c[5],B=c[6],C=c[7],D=c[8],E=c[9],F=c[10],y=c[11],G=c[12],H=c[13],I=c[14];c=c[15];a[0]=d*t+e*z+f*D+g*G;a[1]=d*u+e*A+f*E+g*H;a[2]=d*v+e*B+f*F+g*I;a[3]=d*w+e*C+f*y+g*c;a[4]=h*t+k*z+i*D+j*G;a[5]=h*u+k*A+i*E+j*H;a[6]=h*v+k*B+i*F+j*I;a[7]=h*w+k*C+i*y+j*c;a[8]=l*t+p*z+q*D+m*G;a[9]=l*u+p*A+q*E+
m*H;a[10]=l*v+p*B+q*F+m*I;a[11]=l*w+p*C+q*y+m*c;a[12]=n*t+r*z+s*D+b*G;a[13]=n*u+r*A+s*E+b*H;a[14]=n*v+r*B+s*F+b*I;a[15]=n*w+r*C+s*y+b*c;return a};
tdl.fast.columnMajor.mulMatrixMatrix4=function(a,b,c){var d=b[0],e=b[1],f=b[2],g=b[3],h=b[4],k=b[5],i=b[6],j=b[7],l=b[8],p=b[9],q=b[10],m=b[11],n=b[12],r=b[13],s=b[14];b=b[15];var t=c[0],u=c[1],v=c[2],w=c[3],z=c[4],A=c[5],B=c[6],C=c[7],D=c[8],E=c[9],F=c[10],y=c[11],G=c[12],H=c[13],I=c[14];c=c[15];a[0]=d*t+h*u+l*v+n*w;a[1]=e*t+k*u+p*v+r*w;a[2]=f*t+i*u+q*v+s*w;a[3]=g*t+j*u+m*v+b*w;a[4]=d*z+h*A+l*B+n*C;a[5]=e*z+k*A+p*B+r*C;a[6]=f*z+i*A+q*B+s*C;a[7]=g*z+j*A+m*B+b*C;a[8]=d*D+h*E+l*F+n*y;a[9]=e*D+k*E+p*
F+r*y;a[10]=f*D+i*E+q*F+s*y;a[11]=g*D+j*E+m*F+b*y;a[12]=d*G+h*H+l*I+n*c;a[13]=e*G+k*H+p*I+r*c;a[14]=f*G+i*H+q*I+s*c;a[15]=g*G+j*H+m*I+b*c;return a};tdl.fast.mulMatrixMatrix4=null;tdl.fast.rowMajor.column4=function(a,b,c){for(var d=0;4>d;++d)a[d]=b[4*d+c];return a};tdl.fast.columnMajor.column4=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];a[3]=b[c+3];return a};tdl.fast.column4=null;tdl.fast.rowMajor.row4=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];a[3]=b[c+3];return a};
tdl.fast.columnMajor.row4=function(a,b,c){for(var d=0;4>d;++d)a[d]=b[4*d+c];return a};tdl.fast.row4=null;tdl.fast.identity4=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
tdl.fast.transpose4=function(a,b){if(a===b){var c;c=b[1];b[1]=b[4];b[4]=c;c=b[2];b[2]=b[8];b[8]=c;c=b[3];b[3]=b[12];b[12]=c;c=b[6];b[6]=b[9];b[9]=c;c=b[7];b[7]=b[13];b[13]=c;c=b[11];b[11]=b[14];b[14]=c;return a}c=b[1];var d=b[2],e=b[3],f=b[4],g=b[5],h=b[6],k=b[7],i=b[8],j=b[9],l=b[10],p=b[11],q=b[12],m=b[13],n=b[14],r=b[15];a[0]=b[0];a[1]=f;a[2]=i;a[3]=q;a[4]=c;a[5]=g;a[6]=j;a[7]=m;a[8]=d;a[9]=h;a[10]=l;a[11]=n;a[12]=e;a[13]=k;a[14]=p;a[15]=r;return a};
tdl.fast.inverse4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=b[4],h=b[5],k=b[6],i=b[7],j=b[8],l=b[9],p=b[10],q=b[11],m=b[12],n=b[13],r=b[14],s=b[15],t=p*s,u=r*q,v=k*s,w=r*i,z=k*q,A=p*i,B=e*s,C=r*f,D=e*q,E=p*f,F=e*i,y=k*f,G=j*n,H=m*l,I=g*n,J=m*h,K=g*l,L=j*h,M=c*n,O=m*d,P=c*l,Q=j*d,R=c*h,S=g*d,T=t*h+w*l+z*n-(u*h+v*l+A*n),U=u*d+B*l+E*n-(t*d+C*l+D*n),n=v*d+C*h+F*n-(w*d+B*h+y*n),d=A*d+D*h+y*l-(z*d+E*h+F*l),h=1/(c*T+g*U+j*n+m*d);a[0]=h*T;a[1]=h*U;a[2]=h*n;a[3]=h*d;a[4]=h*(u*g+v*j+A*m-(t*g+w*j+z*m));
a[5]=h*(t*c+C*j+D*m-(u*c+B*j+E*m));a[6]=h*(w*c+B*g+y*m-(v*c+C*g+F*m));a[7]=h*(z*c+E*g+F*j-(A*c+D*g+y*j));a[8]=h*(G*i+J*q+K*s-(H*i+I*q+L*s));a[9]=h*(H*f+M*q+Q*s-(G*f+O*q+P*s));a[10]=h*(I*f+O*i+R*s-(J*f+M*i+S*s));a[11]=h*(L*f+P*i+S*q-(K*f+Q*i+R*q));a[12]=h*(I*p+L*r+H*k-(K*r+G*k+J*p));a[13]=h*(P*r+G*e+O*p-(M*p+Q*r+H*e));a[14]=h*(M*k+S*r+J*e-(R*r+I*e+O*k));a[15]=h*(R*p+K*e+Q*k-(P*k+S*p+L*e));return a};tdl.fast.matrix4.inverse=function(a,b){return tdl.fast.inverse4(a,b)};
tdl.fast.matrix4.mul=function(a,b,c){return tdl.fast.mulMatrixMatrix4(a,b,c)};tdl.fast.matrix4.copy=function(a,b){return tdl.fast.copyMatrix(a,b)};tdl.fast.matrix4.setTranslation=function(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.fast.matrix4.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};tdl.fast.matrix4.identity=function(a){return tdl.fast.identity4(a)};tdl.fast.matrix4.getAxis=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];return a};
tdl.fast.matrix4.perspective=function(a,b,c,d,e){b=Math.tan(0.5*Math.PI-0.5*b);var f=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+e)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*e*f;a[15]=0;return a};tdl.fast.matrix4.ortho=function(a,b,c,d,e,f,g){a[0]=2/(c-b);a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2/(e-d);a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=-1/(g-f);a[11]=0;a[12]=(c+b)/(b-c);a[13]=(e+d)/(d-e);a[14]=-f/(f-g);a[15]=1;return a};
tdl.fast.matrix4.frustum=function(a,b,c,d,e,f,g){var h=c-b,k=e-d,i=f-g;a[0]=2*f/h;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f/k;a[6]=0;a[7]=0;a[8]=(b+c)/h;a[9]=(e+d)/k;a[10]=g/i;a[11]=-1;a[12]=0;a[13]=0;a[14]=f*g/i;a[15]=0;return a};
tdl.fast.matrix4.lookAt=function(a,b,c,d){var e=tdl.fast.temp0v3_,f=tdl.fast.temp1v3_,g=tdl.fast.temp2v3_;c=tdl.fast.normalize(e,tdl.fast.subVector(e,b,c));d=tdl.fast.normalize(f,tdl.fast.cross(f,d,c));g=tdl.fast.cross(g,c,d);a[0]=d[0];a[1]=g[0];a[2]=c[0];a[3]=0;a[4]=d[1];a[5]=g[1];a[6]=c[1];a[7]=0;a[8]=d[2];a[9]=g[2];a[10]=c[2];a[11]=0;a[12]=-tdl.fast.dot(d,b);a[13]=-tdl.fast.dot(g,b);a[14]=-tdl.fast.dot(c,b);a[15]=1;return a};
tdl.fast.matrix4.cameraLookAt=function(a,b,c,d){var e=tdl.fast.temp0v3_,f=tdl.fast.temp1v3_,g=tdl.fast.temp2v3_;c=tdl.fast.normalize(e,tdl.fast.subVector(e,b,c));d=tdl.fast.normalize(f,tdl.fast.cross(f,d,c));g=tdl.fast.cross(g,c,d);a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=0;a[4]=g[0];a[5]=g[1];a[6]=g[2];a[7]=0;a[8]=c[0];a[9]=c[1];a[10]=c[2];a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};
tdl.fast.matrix4.translation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.fast.matrix4.translate=function(a,b){var c=b[0],d=b[1],e=b[2],f=a[1],g=a[2],h=a[3],k=a[5],i=a[6],j=a[7],l=a[9],p=a[10],q=a[11],m=a[13],n=a[14],r=a[15];a[12]=a[0]*c+a[4]*d+a[8]*e+a[12];a[13]=f*c+k*d+l*e+m;a[14]=g*c+i*d+p*e+n;a[15]=h*c+j*d+q*e+r;return a};tdl.fast.matrix4.transpose=tdl.fast.transpose4;
tdl.fast.matrix4.rotationX=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateX=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],g=a[8],h=a[9],k=a[10],i=a[11],j=Math.cos(b),l=Math.sin(b);a[4]=j*c+l*g;a[5]=j*d+l*h;a[6]=j*e+l*k;a[7]=j*f+l*i;a[8]=j*g-l*c;a[9]=j*h-l*d;a[10]=j*k-l*e;a[11]=j*i-l*f;return a};
tdl.fast.matrix4.rotationY=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=c;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[8],h=a[9],k=a[10],i=a[11],j=Math.cos(b),l=Math.sin(b);a[0]=j*c-l*g;a[1]=j*d-l*h;a[2]=j*e-l*k;a[3]=j*f-l*i;a[8]=j*g+l*c;a[9]=j*h+l*d;a[10]=j*k+l*e;a[11]=j*i+l*f;return a};
tdl.fast.matrix4.rotationZ=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=c;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],i=a[7],j=Math.cos(b),l=Math.sin(b);a[0]=j*c+l*g;a[1]=j*d+l*h;a[2]=j*e+l*k;a[3]=j*f+l*i;a[4]=j*g-l*c;a[5]=j*h-l*d;a[6]=j*k-l*e;a[7]=j*i-l*f;return a};
tdl.fast.matrix4.axisRotation=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=Math.sqrt(d*d+e*e+b*b),d=d/f,e=e/f;b/=f;var f=d*d,g=e*e,h=b*b,k=Math.cos(c);c=Math.sin(c);var i=1-k;a[0]=f+(1-f)*k;a[1]=d*e*i+b*c;a[2]=d*b*i-e*c;a[3]=0;a[4]=d*e*i-b*c;a[5]=g+(1-g)*k;a[6]=e*b*i+d*c;a[7]=0;a[8]=d*b*i+e*c;a[9]=e*b*i-d*c;a[10]=h+(1-h)*k;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
tdl.fast.matrix4.axisRotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=Math.sqrt(d*d+e*e+f*f);d/=b;e/=b;f/=b;b=d*d;var g=e*e,h=f*f,k=Math.cos(c),i=Math.sin(c),j=1-k;c=b+(1-b)*k;b=d*e*j+f*i;var l=d*f*j-e*i,p=d*e*j-f*i,g=g+(1-g)*k,q=e*f*j+d*i,m=d*f*j+e*i,d=e*f*j-d*i,e=h+(1-h)*k,f=a[0],h=a[1],k=a[2],i=a[3],j=a[4],n=a[5],r=a[6],s=a[7],t=a[8],u=a[9],v=a[10],w=a[11];a[0]=c*f+b*j+l*t;a[1]=c*h+b*n+l*u;a[2]=c*k+b*r+l*v;a[3]=c*i+b*s+l*w;a[4]=p*f+g*j+q*t;a[5]=p*h+g*n+q*u;a[6]=p*k+g*r+q*v;a[7]=p*i+g*s+q*w;a[8]=
m*f+d*j+e*t;a[9]=m*h+d*n+e*u;a[10]=m*k+d*r+e*v;a[11]=m*i+d*s+e*w;return a};tdl.fast.matrix4.scaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.scale=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]*=c;a[1]*=c;a[2]*=c;a[3]*=c;a[4]*=d;a[5]*=d;a[6]*=d;a[7]*=d;a[8]*=e;a[9]*=e;a[10]*=e;a[11]*=e;return a};
tdl.fast.installRowMajorFunctions=function(){for(var a in tdl.fast.rowMajor)tdl.fast[a]=tdl.fast.rowMajor[a]};tdl.fast.installColumnMajorFunctions=function(){for(var a in tdl.fast.columnMajor)tdl.fast[a]=tdl.fast.columnMajor[a]};tdl.fast.installRowMajorFunctions();tdl.quaternions=tdl.quaternions||{};tdl.quaternions.mathType=function(a){return"number"===typeof a?"Scalar":"Quaternion"};tdl.quaternions.identity=function(){return[0,0,0,1]};tdl.quaternions.copy=function(a){return a.slice()};
tdl.quaternions.negative=function(a){return[-a[0],-a[1],-a[2],-a[3]]};tdl.quaternions.addQuaternionQuaternion=function(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3]]};tdl.quaternions.addQuaternionScalar=function(a,b){return a.slice(0,3).concat(a[3]+b)};tdl.quaternions.addScalarQuaternion=function(a,b){return b.slice(0,3).concat(a+b[3])};tdl.quaternions.subQuaternionQuaternion=function(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2],a[3]-b[3]]};
tdl.quaternions.subQuaternionScalar=function(a,b){return a.slice(0,3).concat(a[3]-b)};tdl.quaternions.subScalarQuaternion=function(a,b){return[-b[0],-b[1],-b[2],a-b[3]]};tdl.quaternions.mulScalarQuaternion=function(a,b){return[a*b[0],a*b[1],a*b[2],a*b[3]]};tdl.quaternions.mulQuaternionScalar=function(a,b){return[b*a[0],b*a[1],b*a[2],b*a[3]]};
tdl.quaternions.mulQuaternionQuaternion=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],k=b[2],i=b[3];return[f*g+c*i+d*k-e*h,f*h+d*i+e*g-c*k,f*k+e*i+c*h-d*g,f*i-c*g-d*h-e*k]};tdl.quaternions.divQuaternionQuaternion=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],k=b[2],i=b[3],j=1/(i*i+g*g+h*h+k*k);return[(c*i-f*g-d*k+e*h)*j,(c*k-f*h+d*i-e*g)*j,(d*g+e*i-f*k-c*h)*j,(f*i+c*g+d*h+e*k)*j]};tdl.quaternions.divQuaternionScalar=function(a,b){return[a[0]/b,a[1]/b,a[2]/b,a[3]/b]};
tdl.quaternions.divScalarQuaternion=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],g=1/(c*c+d*d+e*e+f*f);return[-a*c*g,-a*d*g,-a*e*g,a*f*g]};tdl.quaternions.inverse=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=1/(b*b+c*c+d*d+a*a);return[-b*e,-c*e,-d*e,a*e]};tdl.quaternions.mul=function(a,b){return tdl.quaternions["mul"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};
tdl.quaternions.div=function(a,b){return tdl.quaternions["div"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.add=function(a,b){return tdl.quaternions["add"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.sub=function(a,b){return tdl.quaternions["sub"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.length=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3])};
tdl.quaternions.lengthSquared=function(a){return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]};tdl.quaternions.normalize=function(a){var b=1/Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]);return[a[0]*b,a[1]*b,a[2]*b,a[3]*b]};tdl.quaternions.conjugate=function(a){return[-a[0],-a[1],-a[2],a[3]]};tdl.quaternions.rotationX=function(a){return[Math.sin(a/2),0,0,Math.cos(a/2)]};tdl.quaternions.rotationY=function(a){return[0,Math.sin(a/2),0,Math.cos(a/2)]};
tdl.quaternions.rotationZ=function(a){return[0,0,Math.sin(a/2),Math.cos(a/2)]};tdl.quaternions.axisRotation=function(a,b){var c=1/Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),d=Math.sin(b/2),e=Math.cos(b/2);return[d*a[0]*c,d*a[1]*c,d*a[2]*c,e]};
tdl.quaternions.quaternionToRotation=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];a=e*e;var f=e*b,g=e*c,e=e*d,h=b*b,k=b*c,b=b*d,i=c*c,c=c*d,d=d*d,j=a+h+i+d;return[(a+h-i-d)/j,2*(e+k)/j,2*(b-g)/j,0,2*(k-e)/j,(a-h+i-d)/j,2*(f+c)/j,0,2*(g+b)/j,2*(c-f)/j,(a-h-i+d)/j,0,0,0,0,1]};
tdl.quaternions.rotationToQuaternion=function(a){var b,c,d;a[0]>a[5]&&a[0]>a[10]?(b=0,c=1,d=2):a[5]>a[0]&&a[5]>a[10]?(b=1,c=2,d=0):(b=2,c=0,d=1);var e=Math.sqrt(1+a[4*b+b]-a[4*c+c]-a[4*d+d]),f=[];f[b]=0.5*e;f[c]=0.5*(a[4*c+b]+a[4*b+c])/e;f[d]=0.5*(a[4*b+d]+a[4*d+b])/e;f[3]=0.5*(a[4*c+d]-a[4*d+c])/e;return f};try{module.exports=tdl}catch(e$$10){}tdl.math=tdl.math||{};tdl.math.randomSeed_=0;tdl.math.RANDOM_RANGE_=Math.pow(2,32);tdl.math.matrix4=tdl.math.matrix4||{};
tdl.math.rowMajor=tdl.math.rowMajor||{};tdl.math.columnMajor=tdl.math.columnMajor||{};tdl.math.pseudoRandom=function(){var a=tdl.math;return(a.randomSeed_=(134775813*a.randomSeed_+1)%a.RANDOM_RANGE_)/a.RANDOM_RANGE_};tdl.math.resetPseudoRandom=function(){tdl.math.randomSeed_=0};tdl.math.randomInt=function(a){return Math.floor(Math.random()*a)};tdl.math.degToRad=function(a){return a*Math.PI/180};tdl.math.radToDeg=function(a){return 180*a/Math.PI};
tdl.math.lerpScalar=function(a,b,c){return(1-c)*a+c*b};tdl.math.addVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]+b[e];return c};tdl.math.subVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]-b[e];return c};tdl.math.lerpVector=function(a,b,c){for(var d=[],e=a.length,f=0;f<e;++f)d[f]=(1-c)*a[f]+c*b[f];return d};tdl.math.modClamp=function(a,b,c){c=c||0;if(1E-5>b)return c;a-=c;a=0>a?a-Math.floor(a/b)*b:a%b;return a+c};
tdl.math.lerpCircular=function(a,b,c,d){a=tdl.math.modClamp(a,d);b=tdl.math.modClamp(b,d);var e=b-a;Math.abs(e)>0.5*d&&(b=0<e?b-d:b+d);return tdl.math.modClamp(tdl.math.lerpScalar(a,b,c),d)};tdl.math.lerpRadian=function(a,b,c){return tdl.math.lerpCircular(a,b,c,2*Math.PI)};tdl.math.divVectorScalar=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b;return c};tdl.math.dot=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)c+=a[e]*b[e];return c};
tdl.math.cross=function(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]};tdl.math.length=function(a){for(var b=0,c=a.length,d=0;d<c;++d)b+=a[d]*a[d];return Math.sqrt(b)};tdl.math.lengthSquared=function(a){for(var b=0,c=a.length,d=0;d<c;++d)b+=a[d]*a[d];return b};tdl.math.distance=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)var f=a[e]-b[e],c=c+f*f;return Math.sqrt(c)};tdl.math.distanceSquared=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)var f=a[e]-b[e],c=c+f*f;return c};
tdl.math.normalize=function(a){for(var b=[],c=0,d=a.length,e=0;e<d;++e)c+=a[e]*a[e];c=Math.sqrt(c);if(1E-5<c)for(e=0;e<d;++e)b[e]=a[e]/c;else b=[0,0,0];return b};tdl.math.addMatrix=function(a,b){for(var c=[],d=a.length,e=a[0].length,f=0;f<d;++f){for(var g=[],h=a[f],k=b[f],i=0;i<e;++i)g[i]=h[i]+k[i];c[f]=g}return c};tdl.math.subMatrix=function(a,b){for(var c=[],d=a.length,e=a[0].length,f=0;f<d;++f){for(var g=[],h=a[f],k=b[f],i=0;i<e;++i)g[i]=h[i]-k[i];c[f]=g}return c};
tdl.math.lerpMatrix=function(a,b,c){for(var d=[],e=a.length,f=0;f<e;++f)d[f]=(1-c)*a[f]+c*b[f];return d};tdl.math.divMatrixScalar=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b;return c};tdl.math.negativeScalar=function(a){return-a};tdl.math.negativeVector=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=-a[d];return b};tdl.math.negativeMatrix=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=-a[d];return b};tdl.math.copyScalar=function(a){return a};
tdl.math.copyVector=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b};tdl.math.copyMatrix=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=a[d];return b};tdl.math.mulScalarScalar=function(a,b){return a*b};tdl.math.mulScalarVector=function(a,b){for(var c=[],d=b.length,e=0;e<d;++e)c[e]=a*b[e];return c};tdl.math.mulVectorScalar=function(a,b){return tdl.math.mulScalarVector(b,a)};tdl.math.mulScalarMatrix=function(a,b){for(var c=[],d=b.length,e=0;e<d;++e)c[e]=a*b[e];return c};
tdl.math.mulMatrixScalar=function(a,b){return tdl.math.mulScalarMatrix(b,a)};tdl.math.mulVectorVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]*b[e];return c};tdl.math.divVectorVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b[e];return c};tdl.math.rowMajor.mulVectorMatrix4=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=a[e]*b[4*e+d];return c};
tdl.math.columnMajor.mulVectorMatrix=function(a){for(var b=[],c=0;4>c;++c)for(var d=b[c]=0;4>d;++d)b[c]+=a[d]*b[4*c+d];return b};tdl.math.mulVectorMatrix=null;tdl.math.rowMajor.mulMatrixVector=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=a[4*d+e]*b[e];return c};tdl.math.columnMajor.mulMatrixVector=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=b[e]*a[4*e+d];return c};tdl.math.mulMatrixVector=null;
tdl.math.rowMajor.mulMatrixMatrix2=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],k=b[2],i=b[3];return[c*g+d*k,c*h+d*i,e*g+f*k,e*h+f*i]};tdl.math.columnMajor.mulMatrixMatrix2=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=b[0],h=b[1],k=b[2],i=b[3];return[c*g+e*h,d*g+f*h,c*k+e*i,d*k+f*i]};tdl.math.mulMatrixMatrix2=null;
tdl.math.rowMajor.mulMatrixMatrix3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],i=a[7],j=a[8],l=b[0],p=b[1],q=b[2],m=b[3],n=b[4],r=b[5],s=b[6],t=b[7],u=b[8];return[c*l+d*m+e*s,c*p+d*n+e*t,c*q+d*r+e*u,f*l+g*m+h*s,f*p+g*n+h*t,f*q+g*r+h*u,k*l+i*m+j*s,k*p+i*n+j*t,k*q+i*r+j*u]};
tdl.math.columnMajor.mulMatrixMatrix3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],i=a[7],j=a[8],l=b[0],p=b[1],q=b[2],m=b[3],n=b[4],r=b[5],s=b[6],t=b[7],u=b[8];return[c*l+f*p+k*q,d*l+g*p+i*q,e*l+h*p+j*q,c*m+f*n+k*r,d*m+g*n+i*r,e*m+h*n+j*r,c*s+f*t+k*u,d*s+g*t+i*u,e*s+h*t+j*u]};tdl.math.mulMatrixMatrix3=null;
tdl.math.rowMajor.mulMatrixMatrix4=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],i=a[7],j=a[8],l=a[9],p=a[10],q=a[11],m=a[12],n=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],z=b[4],A=b[5],B=b[6],C=b[7],D=b[8],E=b[9],F=b[10],y=b[11],G=b[12],H=b[13],I=b[14],J=b[15];return[c*t+d*z+e*D+f*G,c*u+d*A+e*E+f*H,c*v+d*B+e*F+f*I,c*w+d*C+e*y+f*J,g*t+h*z+k*D+i*G,g*u+h*A+k*E+i*H,g*v+h*B+k*F+i*I,g*w+h*C+k*y+i*J,j*t+l*z+p*D+q*G,j*u+l*A+p*E+q*H,j*v+l*B+p*F+q*I,j*w+l*C+p*y+q*J,m*t+n*z+r*D+s*
G,m*u+n*A+r*E+s*H,m*v+n*B+r*F+s*I,m*w+n*C+r*y+s*J]};
tdl.math.columnMajor.mulMatrixMatrix4=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],i=a[7],j=a[8],l=a[9],p=a[10],q=a[11],m=a[12],n=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],z=b[4],A=b[5],B=b[6],C=b[7],D=b[8],E=b[9],F=b[10],y=b[11],G=b[12],H=b[13],I=b[14],J=b[15];return[c*t+g*u+j*v+m*w,d*t+h*u+l*v+n*w,e*t+k*u+p*v+r*w,f*t+i*u+q*v+s*w,c*z+g*A+j*B+m*C,d*z+h*A+l*B+n*C,e*z+k*A+p*B+r*C,f*z+i*A+q*B+s*C,c*D+g*E+j*F+m*y,d*D+h*E+l*F+n*y,e*D+k*E+p*F+r*y,f*D+i*E+q*F+s*y,c*G+g*H+j*
I+m*J,d*G+h*H+l*I+n*J,e*G+k*H+p*I+r*J,f*G+i*H+q*I+s*J]};tdl.math.mulMatrixMatrix4=null;tdl.math.rowMajor.mulMatrixMatrix=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=0;4>e;++e)for(var f=c[4*d+e]=0;4>f;++f)c[4*d+e]+=a[4*d+f]*b[4*f+e];return c};tdl.math.columnMajor.mulMatrixMatrix=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=0;4>e;++e)for(var f=c[4*d+e]=0;4>f;++f)c[4*d+e]+=b[4*d+f]*a[4*f+e];return c};tdl.math.mulMatrixMatrix=null;
tdl.math.rowMajor.column=function(a,b){for(var c=[],d=0;4>d;++d)c[d]=a[4*d+b];return c};tdl.math.columnMajor.column=function(a,b){for(var c=[],d=0;4>d;++d)c[d]=a[4*b+d];return c};tdl.math.column=null;tdl.math.rowMajor.row=function(a,b){for(var c=[],d=0;4>d;++d)c[b]=a[4*b+d];return c};tdl.math.columnMajor.row=function(a,b,c){c=c||4;for(var d=[],e=0;e<c;++e)d[e]=a[e*c+b];return d};tdl.math.row=null;
tdl.math.transpose=function(a){var b=[],c=a[1],d=a[2],e=a[3],f=a[4],g=a[5],h=a[6],k=a[7],i=a[8],j=a[9],l=a[10],p=a[11],q=a[12],m=a[13],n=a[14],r=a[15];b[0]=a[0];b[1]=f;b[2]=i;b[3]=q;b[4]=c;b[5]=g;b[6]=j;b[7]=m;b[8]=d;b[9]=h;b[10]=l;b[11]=n;b[12]=e;b[13]=k;b[14]=p;b[15]=r;return b};tdl.math.trace=function(a){for(var b=0,c=0;4>c;++c)b+=a[4*c+c];return b};tdl.math.det1=function(a){return a[0]};tdl.math.det2=function(a){return a[0]*a[3]-a[1]*a[2]};
tdl.math.det3=function(a){return a[8]*(a[0]*a[4]-a[1]*a[3])-a[7]*(a[0]*a[5]-a[2]*a[3])+a[6]*(a[1]*a[5]-a[2]*a[4])};tdl.math.det4=function(a){var b=a[0]*a[5]-a[1]*a[4],c=a[0]*a[6]-a[2]*a[4],d=a[0]*a[7]-a[3]*a[4],e=a[1]*a[6]-a[2]*a[5],f=a[1]*a[7]-a[3]*a[5],g=a[2]*a[7]-a[3]*a[6];return a[15]*(a[10]*b-a[9]*c+a[8]*e)-a[14]*(a[11]*b-a[9]*d+a[8]*f)+a[13]*(a[11]*c-a[10]*d+a[8]*g)-a[12]*(a[11]*e-a[10]*f+a[9]*g)};tdl.math.inverse1=function(a){return[[1/a[0]]]};
tdl.math.inverse2=function(a){var b=1/(a[0]*a[3]-a[1]*a[2]);return[b*a[3],-b*a[1],-b*a[2],b*a[0]]};tdl.math.inverse3=function(a){var b=a[4]*a[8]-a[5]*a[7],c=a[1]*a[8]-a[2]*a[7],d=a[1]*a[5]-a[2]*a[4],e=1/(a[0]*b-a[3]*c+a[6]*d);return[e*b,-e*c,e*d,-e*(a[3]*a[8]-a[5]*a[6]),e*(a[0]*a[8]-a[2]*a[6]),-e*(a[0]*a[5]-a[2]*a[3]),e*(a[3]*a[7]-a[4]*a[6]),-e*(a[0]*a[7]-a[1]*a[6]),e*(a[0]*a[4]-a[1]*a[3])]};
tdl.math.inverse4=function(a){var b=a[10]*a[15],c=a[14]*a[11],d=a[6]*a[15],e=a[14]*a[7],f=a[6]*a[11],g=a[10]*a[7],h=a[2]*a[15],k=a[14]*a[3],i=a[2]*a[11],j=a[10]*a[3],l=a[2]*a[7],p=a[6]*a[3],q=a[8]*a[13],m=a[12]*a[9],n=a[4]*a[13],r=a[12]*a[5],s=a[4]*a[9],t=a[8]*a[5],u=a[0]*a[13],v=a[12]*a[1],w=a[0]*a[9],z=a[8]*a[1],A=a[0]*a[5],B=a[4]*a[1],C=b*a[5]+e*a[9]+f*a[13]-(c*a[5]+d*a[9]+g*a[13]),D=c*a[1]+h*a[9]+j*a[13]-(b*a[1]+k*a[9]+i*a[13]),E=d*a[1]+k*a[5]+l*a[13]-(e*a[1]+h*a[5]+p*a[13]),F=g*a[1]+i*a[5]+p*
a[9]-(f*a[1]+j*a[5]+l*a[9]),y=1/(a[0]*C+a[4]*D+a[8]*E+a[12]*F);return[y*C,y*D,y*E,y*F,y*(c*a[4]+d*a[8]+g*a[12]-(b*a[4]+e*a[8]+f*a[12])),y*(b*a[0]+k*a[8]+i*a[12]-(c*a[0]+h*a[8]+j*a[12])),y*(e*a[0]+h*a[4]+p*a[12]-(d*a[0]+k*a[4]+l*a[12])),y*(f*a[0]+j*a[4]+l*a[8]-(g*a[0]+i*a[4]+p*a[8])),y*(q*a[7]+r*a[11]+s*a[15]-(m*a[7]+n*a[11]+t*a[15])),y*(m*a[3]+u*a[11]+z*a[15]-(q*a[3]+v*a[11]+w*a[15])),y*(n*a[3]+v*a[7]+A*a[15]-(r*a[3]+u*a[7]+B*a[15])),y*(t*a[3]+w*a[7]+B*a[11]-(s*a[3]+z*a[7]+A*a[11])),y*(n*a[10]+t*
a[14]+m*a[6]-(s*a[14]+q*a[6]+r*a[10])),y*(w*a[14]+q*a[2]+v*a[10]-(u*a[10]+z*a[14]+m*a[2])),y*(u*a[6]+B*a[14]+r*a[2]-(A*a[14]+n*a[2]+v*a[6])),y*(A*a[10]+s*a[2]+z*a[6]-(w*a[6]+B*a[10]+t*a[2]))]};tdl.math.codet=function(a,b,c){for(var d=[],e=0,f=0;3>f;++f){e==b&&e++;for(var g=0,h=0;3>h;++h)g==c&&g++,d[4*f+h]=a[4*e+g],g++;e++}return tdl.math.det(d)};tdl.math.det=function(a){return tdl.math.det4(a)};tdl.math.inverse=function(a){return tdl.math.inverse4(a)};tdl.math.orthonormalize=function(){};
tdl.math.matrix4.inverse=function(a){return tdl.math.inverse4(a)};tdl.math.matrix4.mul=function(a,b){return tdl.math.mulMatrixMatrix4(a,b)};tdl.math.matrix4.det=function(a){return tdl.math.det4(a)};tdl.math.matrix4.copy=function(a){return tdl.math.copyMatrix(a)};tdl.math.matrix4.transpose=tdl.math.transpose;tdl.math.matrix4.setUpper3x3=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[4]=b[3];a[5]=b[4];a[6]=b[5];a[8]=b[6];a[9]=b[7];a[10]=b[8];return a};
tdl.math.matrix4.getUpper3x3=function(a){return[a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]]};tdl.math.matrix4.setTranslation=function(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.math.matrix4.getTranslation=function(a){return[a[12],a[13],a[14],a[15]]};tdl.math.matrix4.transformPoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*a[3]+d*a[7]+e*a[11]+a[15];return[(c*a[0]+d*a[4]+e*a[8]+a[12])/f,(c*a[1]+d*a[5]+e*a[9]+a[13])/f,(c*a[2]+d*a[6]+e*a[10]+a[14])/f]};
tdl.math.matrix4.transformVector4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];return[c*a[0]+d*a[4]+e*a[8]+f*a[12],c*a[1]+d*a[5]+e*a[9]+f*a[13],c*a[2]+d*a[6]+e*a[10]+f*a[14],c*a[3]+d*a[7]+e*a[11]+f*a[15]]};tdl.math.matrix4.transformDirection=function(a,b){var c=b[0],d=b[1],e=b[2];return[c*a[0]+d*a[4]+e*a[8],c*a[1]+d*a[5]+e*a[9],c*a[2]+d*a[6]+e*a[10]]};
tdl.math.matrix4.transformNormal=function(a,b){var c=tdl.math.inverse4(a),d=b[0],e=b[1],f=b[2];return[d*c[0]+e*c[1]+f*c[2],d*c[4]+e*c[5]+f*c[6],d*c[8]+e*c[9]+f*c[10]]};tdl.math.matrix4.identity=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};tdl.math.matrix4.setIdentity=function(a){for(var b=0;4>b;b++)for(var c=0;4>c;c++)a[4*b+c]=b==c?1:0;return a};tdl.math.matrix4.perspective=function(a,b,c,d){a=Math.tan(0.5*Math.PI-0.5*a);var e=1/(c-d);return[a/b,0,0,0,0,a,0,0,0,0,(c+d)*e,-1,0,0,2*c*d*e,0]};
tdl.math.matrix4.orthographic=function(a,b,c,d,e,f){return[2/(b-a),0,0,0,0,2/(d-c),0,0,0,0,1/(e-f),0,(a+b)/(a-b),(c+d)/(c-d),e/(e-f),1]};tdl.math.matrix4.frustum=function(a,b,c,d,e,f){var g=b-a,h=d-c,k=e-f;return[2*e/g,0,0,0,0,2*e/h,0,0,(a+b)/g,(d+c)/h,f/k,-1,0,0,e*f/k,0]};tdl.math.matrix4.lookAt=function(a,b,c){return tdl.math.inverse(tdl.math.matrix4.cameraLookAt(a,b,c))};
tdl.math.matrix4.cameraLookAt=function(a,b,c){b=tdl.math.normalize(tdl.math.subVector(a,b));c=tdl.math.normalize(tdl.math.cross(c,b));var d=tdl.math.cross(b,c);return tdl.math.inverse([c[0],c[1],c[2],0,d[0],d[1],d[2],0,b[0],b[1],b[2],0,-tdl.math.dot(c,a),-tdl.math.dot(d,a),-tdl.math.dot(b,a),1])};
tdl.math.matrix4.composition=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],i=a[7],j=a[8],l=a[9],p=a[10],q=a[11],m=a[12],n=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],z=b[4],A=b[5],B=b[6],C=b[7],D=b[8],E=b[9],F=b[10],y=b[11],G=b[12],H=b[13],I=b[14],J=b[15];return[c*t+g*u+j*v+m*w,d*t+h*u+l*v+n*w,e*t+k*u+p*v+r*w,f*t+i*u+q*v+s*w,c*z+g*A+j*B+m*C,d*z+h*A+l*B+n*C,e*z+k*A+p*B+r*C,f*z+i*A+q*B+s*C,c*D+g*E+j*F+m*y,d*D+h*E+l*F+n*y,e*D+k*E+p*F+r*y,f*D+i*E+q*F+s*y,c*G+g*H+j*I+m*J,d*G+
h*H+l*I+n*J,e*G+k*H+p*I+r*J,f*G+i*H+q*I+s*J]};
tdl.math.matrix4.compose=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],i=a[7],j=a[8],l=a[9],p=a[10],q=a[11],m=a[12],n=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],z=b[4],A=b[5],B=b[6],C=b[7],D=b[8],E=b[9],F=b[10],y=b[11],G=b[12],H=b[13],I=b[14],J=b[15];a[0]=c*t+g*u+j*v+m*w;a[1]=d*t+h*u+l*v+n*w;a[2]=e*t+k*u+p*v+r*w;a[3]=f*t+i*u+q*v+s*w;a[4]=c*z+g*A+j*B+m*C;a[5]=d*z+h*A+l*B+n*C;a[6]=e*z+k*A+p*B+r*C;a[7]=f*z+i*A+q*B+s*C;a[8]=c*D+g*E+j*F+m*y;a[9]=d*D+h*E+l*F+n*y;a[10]=e*D+k*
E+p*F+r*y;a[11]=f*D+i*E+q*F+s*y;a[12]=c*G+g*H+j*I+m*J;a[13]=d*G+h*H+l*I+n*J;a[14]=e*G+k*H+p*I+r*J;a[15]=f*G+i*H+q*I+s*J;return a};tdl.math.matrix4.translation=function(a){return[1,0,0,0,0,1,0,0,0,0,1,0,a[0],a[1],a[2],1]};tdl.math.matrix4.translate=function(a,b){var c=a[1],d=a[2],e=a[3],f=a[5],g=a[6],h=a[7],k=a[9],i=a[10],j=a[11],l=a[13],p=a[14],q=a[15],m=b[0],n=b[1],r=b[2];a[12]=a[0]*m+a[4]*n+a[8]*r+a[12];a[13]=c*m+f*n+k*r+l;a[14]=d*m+g*n+i*r+p;a[15]=e*m+h*n+j*r+q;return a};
tdl.math.matrix4.scaling=function(a){return[a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,1]};tdl.math.matrix4.scale=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]*=c;a[1]*=c;a[2]*=c;a[3]*=c;a[4]*=d;a[5]*=d;a[6]*=d;a[7]*=d;a[8]*=e;a[9]*=e;a[10]*=e;a[11]*=e;return a};tdl.math.matrix4.rotationX=function(a){var b=Math.cos(a);a=Math.sin(a);return[1,0,0,0,0,b,a,0,0,-a,b,0,0,0,0,1]};
tdl.math.matrix4.rotateX=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],g=a[8],h=a[9],k=a[10],i=a[11],j=Math.cos(b),l=Math.sin(b);a[4]=j*c+l*g;a[5]=j*d+l*h;a[6]=j*e+l*k;a[7]=j*f+l*i;a[8]=j*g-l*c;a[9]=j*h-l*d;a[10]=j*k-l*e;a[11]=j*i-l*f;return a};tdl.math.matrix4.rotationY=function(a){var b=Math.cos(a);a=Math.sin(a);return[b,0,-a,0,0,1,0,0,a,0,b,0,0,0,0,1]};
tdl.math.matrix4.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[8],h=a[9],k=a[10],i=a[11],j=Math.cos(b),l=Math.sin(b);a[0]=j*c-l*g;a[1]=j*d-l*h;a[2]=j*e-l*k;a[3]=j*f-l*i;a[8]=j*g+l*c;a[9]=j*h+l*d;a[10]=j*k+l*e;a[11]=j*i+l*f;return a};tdl.math.matrix4.rotationZ=function(a){var b=Math.cos(a);a=Math.sin(a);return[b,a,0,0,-a,b,0,0,0,0,1,0,0,0,0,1]};
tdl.math.matrix4.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],g=a[4],h=a[5],k=a[6],i=a[7],j=Math.cos(b),l=Math.sin(b);a[0]=j*c+l*g;a[1]=j*d+l*h;a[2]=j*e+l*k;a[3]=j*f+l*i;a[4]=j*g-l*c;a[5]=j*h-l*d;a[6]=j*k-l*e;a[7]=j*i-l*f;return a};tdl.math.matrix4.rotationZYX=function(a){var b=Math.sin(a[0]),c=Math.cos(a[0]),d=Math.sin(a[1]),e=Math.cos(a[1]),f=Math.sin(a[2]);a=Math.cos(a[2]);var g=a*d,h=f*d;return[a*e,f*e,-d,0,g*b-f*c,h*b+a*c,e*b,0,g*c+f*b,h*c-a*b,e*c,0,0,0,0,1]};
tdl.math.matrix4.rotateZYX=function(a,b){var c=Math.sin(b[0]),d=Math.cos(b[0]),e=Math.sin(b[1]),f=Math.cos(b[1]),g=Math.sin(b[2]),h=Math.cos(b[2]),k=h*e,i=g*e,j=h*f,l=g*f,e=-e,p=k*c-g*d,q=i*c+h*d,m=f*c,g=k*d+g*c,c=i*d-h*c,d=f*d,f=a[0],h=a[1],i=a[2],k=a[3],n=a[4],r=a[5],s=a[6],t=a[7],u=a[8],v=a[9],w=a[10],z=a[11];a[0]=j*f+l*n+e*u;a[1]=j*h+l*r+e*v;a[2]=j*i+l*s+e*w;a[3]=j*k+l*t+e*z;a[4]=p*f+q*n+m*u;a[5]=p*h+q*r+m*v;a[6]=p*i+q*s+m*w;a[7]=p*k+q*t+m*z;a[8]=g*f+c*n+d*u;a[9]=g*h+c*r+d*v;a[10]=g*i+c*s+d*w;
a[11]=g*k+c*t+d*z;return a};tdl.math.matrix4.axisRotation=function(a,b){var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e),c=c/f,d=d/f,e=e/f,f=c*c,g=d*d,h=e*e,k=Math.cos(b),i=Math.sin(b),j=1-k;return[f+(1-f)*k,c*d*j+e*i,c*e*j-d*i,0,c*d*j-e*i,g+(1-g)*k,d*e*j+c*i,0,c*e*j+d*i,d*e*j-c*i,h+(1-h)*k,0,0,0,0,1]};
tdl.math.matrix4.axisRotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=Math.sqrt(d*d+e*e+f*f);d/=b;e/=b;f/=b;b=d*d;var g=e*e,h=f*f,k=Math.cos(c),i=Math.sin(c),j=1-k;c=b+(1-b)*k;b=d*e*j+f*i;var l=d*f*j-e*i,p=d*e*j-f*i,g=g+(1-g)*k,q=e*f*j+d*i,m=d*f*j+e*i,d=e*f*j-d*i,e=h+(1-h)*k,f=a[0],h=a[1],k=a[2],i=a[3],j=a[4],n=a[5],r=a[6],s=a[7],t=a[8],u=a[9],v=a[10],w=a[11];a[0]=c*f+b*j+l*t;a[1]=c*h+b*n+l*u;a[2]=c*k+b*r+l*v;a[3]=c*i+b*s+l*w;a[4]=p*f+g*j+q*t;a[5]=p*h+g*n+q*u;a[6]=p*k+g*r+q*v;a[7]=p*i+g*s+q*w;a[8]=
m*f+d*j+e*t;a[9]=m*h+d*n+e*u;a[10]=m*k+d*r+e*v;a[11]=m*i+d*s+e*w;return a};tdl.math.installRowMajorFunctions=function(){for(var a in tdl.math.rowMajor)tdl.math[a]=tdl.math.rowMajor[a]};tdl.math.installColumnMajorFunctions=function(){for(var a in tdl.math.columnMajor)tdl.math[a]=tdl.math.columnMajor[a]};tdl.math.installErrorCheckFunctions=function(){for(var a in tdl.math.errorCheck)tdl.math[a]=tdl.math.errorCheck[a]};
tdl.math.installErrorCheckFreeFunctions=function(){for(var a in tdl.math.errorCheckFree)tdl.math[a]=tdl.math.errorCheckFree[a]};tdl.math.installRowMajorFunctions();tdl.math.installErrorCheckFunctions();GLMJS_PREFIX="glm-js: ";function GLMJSError(a){var b;a:{try{generror_()}catch(c){b=c.stack.split(/\n/)[4];break a}b=void 0}this.e=b;this.toString=function(){return"[GLMJSError "+GLMJS_PREFIX+a+"]"+this.e};generatedError.prototype.message=a}function generatedError(){}generatedError.prototype=Error();
GLMJSError.prototype=new generatedError;$GLM_extern=function(a,b){try{console.debug("extern "+a,b)}catch(c){}b=b||a;return function(){GLM[b]=GLM.$functions[a]||GLM.$DLL[a];if(!GLM[b])throw new GLMJSError("$GLM_extern: unresolved external symbol: "+a);return GLM[b].apply(this,arguments)}};$GLM_intern=function(a,b){if(void 0===b&&"object"===typeof a)for(var c in a)$GLM_intern(c,a[c]);else return GLM.$DLL.console.debug("intern "+a,b&&(b.name||typeof b)),GLM.$DLL[a]=b};
GLM={version:"0.0.1",GLM_VERSION:95,$operations:{},$functions:{},$DLL:{console:{debug:function(){}||(console.debug?function(){console.debug([].slice.call(arguments))}:function(){console.warn([].slice.call(arguments))}),warn:function(){console.warn([].slice.call(arguments))},error:function(){console.error([].slice.call(arguments))},write:function(a){try{console.write(a)}catch(b){this.debug(a)}}},vec3_eulerAngles:function(a){var b=this.mat4_array_from_quat(a);a=b[0];var c=b[4],d=b[1],e=b[5],f=b[2],
g=b[6],b=b[10],h=new glm.vec3;h.y=Math.asin(-glm.clamp(f,-1,1));0.99999>Math.abs(f)?(h.x=Math.atan2(g,b),h.z=Math.atan2(d,a)):(h.x=0,h.z=Math.atan2(-c,e));return h}},$intern:$GLM_intern,$extern:$GLM_extern,GLMJSError:GLMJSError,_radians:function(a){return a*Math.PI/180},_degrees:function(a){return 180*a/Math.PI},normalize:$GLM_extern("normalize"),inverse:$GLM_extern("inverse"),length:$GLM_extern("length"),transpose:$GLM_extern("transpose"),rotate:function(a,b,c){return a.mul(GLM.$DLL.mat4_angleAxis(b,
c))},scale:function(a,b){return a.mul(GLM.$DLL.mat4_scale(b))},translate:function(a,b){return a.mul(GLM.$DLL.mat4_translation(b))},perspective:function(a,b,c,d){return GLM.$DLL.mat4_perspective(a,b,c,d)},eulerAngles:function(a){return GLM.$DLL.vec3_eulerAngles(a)},angleAxis:function(a,b){return GLM.$DLL.quat_angleAxis(a,b)},make_vec2:function(a){return new GLM.vec2([].slice.call(a,0,2))},make_vec3:function(a){return new GLM.vec3([].slice.call(a,0,3))},make_vec4:function(a){return new GLM.vec4([].slice.call(a,
0,4))},make_quat:function(a){return new GLM.quat([].slice.call(a,0,4))},make_mat3:function(a){return new GLM.mat3([].slice.call(a,0,9))},make_mat4:function(a){return new GLM.mat4([].slice.call(a,0,16))},toMat4:function(a){return new GLM.mat4(a)},FAITHFUL:!0,to_string:function(a){try{var b=a.$type||typeof a;if(!GLM[b])throw new GLMJSError("unsupported argtype to GLM.to_string: "+[a,b]);if(!GLM[b].$)throw new GLMJSError("missing .$... GLM.to_string: "+[a,b]);return GLM.FAITHFUL?GLM[b].$.to_string(a).replace(/[\t\n]/g,
""):GLM[b].$.to_string(a)}catch(c){GLM.$DLL.console.error("to_string error: ",b,a+"",c)}},$to_array:function(a){return[].slice.call(a.elements)},clamp:function(a,b,c){return a<b?b:a>c?c:a},max:function(a,b){return Math.max(a,b)},min:function(a,b){return Math.min(a,b)},sign:Math.sign||function(a){return 0<a?1:0>a?-1:0},epsilon:function(){return 1E-6},FIXEDPRECISION:6,$toString:function(a,b,c){try{var d="";c.map(function(a){return b[d=a].toFixed(0)})}catch(e){throw GLM.$DLL.console.error("$toString error",
a,b,d),new GLMJSError(e);}return[a,"(",c.map(function(a){return b[a].toFixed(GLM.FIXEDPRECISION)}).join(", "),")"].join("")}};
var GLM_template=GLM.$template={jstypes:{number:"float","[object Float32Array]":"Float32Array"},"<T>":function(a,b){var c=function(c){var e=[c.$type||GLM_template.jstypes[typeof c]||"null"];if(!a[e])throw new GLMJSError("unsupported argtype to GLM."+b+"<T>: "+[e||typeof c]);return a[e](c)};c["<T>"]=c.$template=a;return c},"<T,V>":function(a,b){var c=function(c,e){this.$type&&(e=c,c=this);var f=[c.$type,e.$type||GLM_template.jstypes[typeof e]||GLM_template.jstypes[e+""]||"<unknown "+e+">"];if(!a[f])throw new GLMJSError("unsupported argtype to "+
b+"<T,V>: "+f);return a[f](c,e)};c["<T,V>"]=c.$template=a;return c},operations:function(a){return this._override("<T,V>",a,GLM.$operations)},functions:function(a){return this._override("<T>",a,GLM.$functions)},_override:function(a,b,c){for(var d in b)this.override(a,d,b[d],c);return c},denify:function(a){for(var b in a)if(/vec<N>/.test(b)){var c=a[b];delete a[b];[2,3,4].forEach(function(d){var e=b.replace(/<N>/,d);e in a||(a[e]=eval(("1,"+c).replace(/N/g,d)))})}return a},override:function(a,b,c,d){GLM.$DLL.console.debug("override",
a,b,c.op);d[b]=GLM_template[a](GLM_template.denify(c),b);c.op&&(d[c.op]=d[b]);return d},GLMType:function(a,b){var c=b.identity.length,d=function(e){var f=typeof e+arguments.length,g=b[f];if(!g)throw new GLMJSError("no template found for "+a+".$."+f);if(this instanceof d)e instanceof Float32Array?(e.length>c&&(e=e.subarray(0,c)),this.elements=e):(this.elements=new Float32Array(c)).set(g.apply(b,arguments));else return new d(g.apply(b,arguments))};d.$=b;d.componentLength=c;d.BYTES_PER_ELEMENT=c*Float32Array.BYTES_PER_ELEMENT;
d.toString=function(){return"function GLM."+a+"(){ [ GLMType ] }"};d.prototype={$type:a,$typeName:b.name||"<"+a+">",$len:c,constructor:d,__proto__:5,clone:function(){return new d(this)},toString:function(){return b.to_string(this)},byteLength:d.BYTES_PER_ELEMENT,componentLength:d.componentLength,get address(){var a=this.elements.byteOffset.toString(16);return"0x00000000".substr(0,10-a.length)+a}};return d}};
GLM.degrees=GLM.$template.override("<T>","degrees",{"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._degrees))},"float":function(a){return GLM._degrees(a)}},GLM.$functions).degrees;GLM.radians=GLM.$template.override("<T>","radians",{"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._radians))},"float":function(a){return GLM._radians(a)}},GLM.$functions).radians;
GLM.$template.override("<T,V>","copy",{op:"=","mat4,mat4":function(a,b){a.elements.set(b.elements);return a}},GLM.$operations);GLM.string={$typeName:"string",$:{to_string:function(a){return a}}};GLM.number={$typeName:"float",$:{to_string:function(a){return GLM.$toString("float",{value:a},["value"])}}};
GLM.vec2=GLM_template.GLMType("vec2",{name:"fvec2",identity:[0,0],undefined0:function(){return this.identity},number1:function(a){return[a,a]},number2:function(a,b){return[a,b]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]];default:if("y"in a&&"x"in a)return[a.x,a.y]}throw new GLMJSError("unrecognized object passed to GLM.vec2: "+a);},to_string:function(a){return GLM.$toString(a.$typeName,a,["x","y"])}});
GLM.vec3=GLM_template.GLMType("vec3",{name:"fvec3",identity:[0,0,0],undefined0:function(){return GLM.vec3.$.identity},number1:function(a){return[a,a,a]},number2:function(a,b){return[a,b,b]},number3:function(a,b,c){return[a,b,c]},object1:function(a){switch(a.length){case 4:case 3:return[a[0],a[1],a[2]];case 2:return[a[0],a[1],a[1]];default:if("z"in a&&"x"in a)return[a.x,a.y,a.z]}throw new GLMJSError("unrecognized object passed to GLM.vec3: "+a);},to_string:function(a){return GLM.$toString(a.$typeName,
a,["x","y","z"])}});
GLM.vec4=GLM_template.GLMType("vec4",{name:"fvec4",identity:[0,0,0,0],undefined0:function(){return this.identity},number1:function(a){return[a,a,a,a]},number2:function(a,b){return[a,b,b,b]},number3:function(a,b,c){return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d]},object1:function(a){switch(a.length){case 4:return[a[0],a[1],a[2],a[3]];case 3:return[a[0],a[1],a[2],a[2]];case 2:return[a[0],a[1],a[1],a[1]];default:if("w"in a&&"x"in a)return[a.x,a.y,a.z,a.w]}throw new GLMJSError("unrecognized object passed to GLM.vec4: "+[a,
a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,b];throw new GLMJSError("unrecognized object passed to GLM.vec4(o,w): "+[a,b]);},to_string:function(a){return GLM.$toString(a.$typeName,a,["x","y","z","w"])}});
GLM.mat3=GLM_template.GLMType("mat3",{name:"mat3x3",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,a,0,0,0,a]},object1:function(a){var b=a.elements||a;if(16===b.length)return[b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]];if(9===b.length)return b;throw new GLMJSError("unrecognized object passed to GLM.mat3: "+a);},to_string:function(a){var b=[0,1,2].map(function(b){return a[b]}).map(function(a){return GLM.$toString("\t",
a,["x","y","z"])});return a.$typeName+"(\n"+b.join(", \n")+"\n)"}});
GLM.mat4=GLM_template.GLMType("mat4",{name:"mat4x4",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]},object1:function(a){if(a instanceof GLM.quat)return GLM.$DLL.mat4_array_from_quat(a);var b=a.elements||a;if(9===b.length)return[b[0],b[1],b[2],0,b[3],b[4],b[5],0,b[6],b[7],b[8],0,0,0,0,1];if(16!==b.length)throw new GLMJSError("unrecognized object passed to GLM.mat4: "+[a,b.length]);
return b},to_string:function(a){var b=[0,1,2,3].map(function(b){return a[b]}).map(function(a){return GLM.$toString("\t",a,["x","y","z","w"])});return a.$typeName+"(\n"+b.join(", \n")+"\n)"}});
GLM.quat=GLM_template.GLMType("quat",{identity:[0,0,0,1],undefined0:function(){return this.identity},number4:function(a,b,c,d){return[b,c,d,a]},object1:function(a){if(a instanceof GLM.mat4)return GLM.$DLL.quat_array_from_mat4(a);if(4===a.length)return a;if(a instanceof GLM.quat||"w"in a&&"x"in a)return[a.x,a.y,a.z,a.w];throw new GLMJSError("unrecognized object passed to GLM.quat.object1: "+[a,a.$type,typeof a,a.constructor]);},to_string:function(a){a=GLM.degrees(GLM.eulerAngles(a));return GLM.$toString("<quat>"+
a.$typeName,a,["x","y","z"])}});
(function(){function a(a,b){var c=b.$.identity.length;[0,1,2,3].slice(0,c).forEach(function(h){var k=h*d*c,i="_cached_"+h;Object.defineProperty(a.prototype,h,{configurable:!0,enumerable:!0,set:function(d){if(d instanceof b)return this[h].elements.set(d.elements);if(d.length===c)return this[h].elements.set(d);throw new GLMJSError("unsupported argtype to "+a.prototype.$type+"["+h+"] setter: "+[typeof d,d]);},get:function(){if(this[i])return this[i];Object.defineProperty(this,i,{configurable:!0,enumerable:!1,
value:new b(new Float32Array(this.elements.buffer,this.elements.byteOffset+k))});return this[i]}})})}var b=[0,1,2,3].map(function(a){return{get:function(){return this.elements[a]},set:function(b){this.elements[a]=b}}}),c=function(a,c){c.forEach(function(c,d){Object.defineProperty(a.prototype,c,b[d])});if(isNaN(c[0])&&!/^_/.test(c[0])){do(function(b,c,d){Object.defineProperty(a.prototype,b,{get:function(){return new GLM[c](this.elements.subarray(0*d,1*d))}})})(c.join(""),"vec"+c.length,c.length);while(c[1]!=
c.pop())}};c(GLM.vec2,["x","y"]);c(GLM.vec3,["x","y","z"]);c(GLM.vec3,["r","g","b"]);c(GLM.vec4,["x","y","z","w"]);c(GLM.vec4,["r","g","b","a"]);c(GLM.quat,["x","y","z","w"]);[2,3,4].forEach(function(a){a=GLM["vec"+a];c(a,a.$.identity.map(function(a,b){return b}))});var d=Float32Array.BYTES_PER_ELEMENT;a(GLM.mat4,GLM.vec4);a(GLM.mat3,GLM.vec3)})();
GLM.$dumpTypes=function(a){for(var b in GLM)GLM[b].componentLength&&a("GLM."+b,JSON.stringify({"#type":GLM[b].prototype.$typeName,"#floats":GLM[b].componentLength,"#bytes":GLM[b].BYTES_PER_ELEMENT}))};
GLM.init=function(a,b){b&&(GLMJS_PREFIX=b);var c=function(a){GLM.$DLL.console.write("\u00e2\u009c\u0094 "+a);try{"node"===process.title&&GLM.$DLL.console.write("\n")}catch(b){}};try{c("GLM-js: ENV: "+_ENV._VERSION)}catch(d){}c("GLM-JS: initializing: "+JSON.stringify(a,0,2));c(JSON.stringify({functions:Object.keys(GLM.$functions),operations:Object.keys(GLM.$operations)}));for(var e in GLM)if("function"===typeof GLM[e]&&"$"in GLM[e])for(var f in GLM.$operations)GLM[e].prototype[f]=GLM.$operations[f];
c("GLM-JS: "+GLM.version+" emulating GLM_VERSION="+GLM.GLM_VERSION+" vendor_name="+a.vendor_name+" vendor_version="+a.vendor_version)};try{module.exports=GLM}catch(e$$18){}try{tdl.fast.exists}catch(e$$19){tdl.fast.exists}var glm=GLM,DLL=glm.$DLL["tdl-fast.js"]={vendor_name:"tdl-fast.js",vendor_version:"2009?",_name:"glm.tdl-fast.js",_version:"0.0.0"};
DLL.$functions=function(){return{mat4_angleAxis:function(a,b){return new glm.mat4(tdl.fast.matrix4.axisRotation(new Float32Array(16),b,a))},quat_angleAxis:function(a,b){var c=tdl.quaternions.axisRotation(b.elements,a);return new glm.quat(c)},mat4_array_from_quat:function(a){return tdl.quaternions.quaternionToRotation(a.elements)},quat_array_from_mat4:function(a){return tdl.quaternions.rotationToQuaternion(a.elements)}}}();
DLL.$operations=function(){return{mul:{op:"*","quat,vec<N>":function(a,b){return glm.toMat4(a).mul(b)},"vec<N>,quat":function(a,b){return glm.toMat4(b).mul(a)},"vec<N>,float":function(a,b){return new glm.vecN(tdl.fast.mulVectorScalar(new Float32Array(N),a.elements,b))},"mat4,vec3":function(a,b){return new glm.vec3(this["mat4,vec4"](a,new glm.vec4(b,1)).elements)},"mat4,vec4":function(a,b){return new glm.vec4(tdl.fast.rowMajor.mulVectorMatrix4(new Float32Array(4),b,a.elements))},"mat4,mat4":function(a,
b){return new glm.mat4(tdl.fast.rowMajor.mulMatrixMatrix4(new Float32Array(16),a.elements,b.elements))}},mul_eq:{op:"*=","vec<N>,float":function(a,b){tdl.fast.mulVectorScalar(a.elements,a.elements,b);return a}},normalize:{"vec<N>":function(a){return new glm.vecN(tdl.fast.normalize(new Float32Array(N),a.elements))},quat:function(a){return new glm.quat(tdl.quaternions.normalize(a.elements))}},length:{"vec<N>":function(a){return tdl.math.length(a.elements)},quat:function(a){return tdl.quaternions.length(a.elements)}},
inverse:{mat4:function(a){return new glm.mat4(tdl.fast.inverse4(new Float32Array(16),a.elements))}},transpose:{mat4:function(a){return new glm.mat4(tdl.fast.transpose4(new Float32Array(16),a.elements))}}}}();glm.$intern(DLL.$functions);for(x in DLL.$operations)DLL.$operations[x].op?glm.$template.override("<T,V>",x,DLL.$operations[x],glm.$operations):glm.$template.override("<T>",x,DLL.$operations[x],glm.$functions);glm.init({vendor_name:DLL.vendor_name},"glm-js[tdl-fast]: ");try{module.exports=glm}catch(e$$20){};
