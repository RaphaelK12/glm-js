glm = (function glmjs_scope(g) { var GLMJS_PREFIX, $GLM_reset_logging;
tdl={};tdl.fast=tdl.fast||{};tdl.fast.temp0v3_=new Float32Array(3);tdl.fast.temp1v3_=new Float32Array(3);tdl.fast.temp2v3_=new Float32Array(3);tdl.fast.temp0v4_=new Float32Array(4);tdl.fast.temp1v4_=new Float32Array(4);tdl.fast.temp2v4_=new Float32Array(4);tdl.fast.temp0m4_=new Float32Array(16);tdl.fast.temp1m4_=new Float32Array(16);tdl.fast.temp2m4_=new Float32Array(16);tdl.fast.matrix4=tdl.fast.matrix4||{};tdl.fast.rowMajor=tdl.fast.rowMajor||{};tdl.fast.columnMajor=tdl.fast.columnMajor||{};
tdl.fast.addVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]+c[e];return a};tdl.fast.subVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]-c[e];return a};tdl.fast.lerpVector=function(a,b,c,d){for(var e=b.length,f=0;f<e;++f)a[f]=(1-d)*b[f]+d*c[f];return a};tdl.fast.divVectorScalar=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]/c;return a};tdl.fast.cross=function(a,b,c){a[0]=b[1]*c[2]-b[2]*c[1];a[1]=b[2]*c[0]-b[0]*c[2];a[2]=b[0]*c[1]-b[1]*c[0];return a};
tdl.fast.dot=function(a,b){return a[0]*b[0]+a[1]*b[1]+a[2]*b[2]};tdl.fast.normalize=function(a,b){for(var c=0,d=b.length,e=0;e<d;++e)c+=b[e]*b[e];c=Math.sqrt(c);if(1E-5<c)for(e=0;e<d;++e)a[e]=b[e]/c;else for(e=0;e<d;++e)a[e]=0;return a};tdl.fast.negativeVector=function(a,b){for(var c=b.length,d=0;d<c;++d)a[d]=-b[d];return a};tdl.fast.negativeMatrix=function(a,b){for(var c=b.length,d=0;d<c;++d)a[d]=-b[d];return a};tdl.fast.copyVector=function(a,b){a.set(b);return a};
tdl.fast.copyMatrix=function(a,b){a.set(b);return a};tdl.fast.mulScalarVector=function(a,b,c){for(var d=c.length,e=0;e<d;++e)a[e]=b*c[e];return a};tdl.fast.mulVectorScalar=function(a,b,c){return tdl.fast.mulScalarVector(a,c,b)};tdl.fast.mulScalarMatrix=function(a,b,c){for(var d=c.length,e=0;e<d;++e)a[e]=b*c[e];return a};tdl.fast.mulMatrixScalar=function(a,b,c){return tdl.fast.mulScalarMatrix(a,c,b)};tdl.fast.mulVectorVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]*c[e];return a};
tdl.fast.divVectorVector=function(a,b,c){for(var d=b.length,e=0;e<d;++e)a[e]=b[e]/c[e];return a};tdl.fast.rowMajor.mulVectorMatrix4=function(a,b,c){for(var d=0;4>d;++d)for(var e=a[d]=0;4>e;++e)a[d]+=b[e]*c[4*e+d];return a};tdl.fast.columnMajor.mulVectorMatrix4=function(a,b,c){for(var d=0;4>d;++d){a[d]=0;for(var e=4*d,f=0;4>f;++f)a[d]+=b[f]*c[e+f]}return a};tdl.fast.mulVectorMatrix4=null;
tdl.fast.rowMajor.mulMatrix4Vector=function(a,b,c){for(var d=0;4>d;++d){a[d]=0;for(var e=4*d,f=0;4>f;++f)a[d]+=b[e+f]*c[f]}return a};tdl.fast.columnMajor.mulMatrix4Vector=function(a,b,c){for(var d=0;4>d;++d)for(var e=a[d]=0;4>e;++e)a[d]+=c[e]*b[4*e+d];return a};tdl.fast.mulMatrix4Vector=null;
tdl.fast.rowMajor.mulMatrixMatrix3=function(a,b,c){var d=b[0],e=b[1],f=b[2],h=b[3],g=b[4],k=b[5],j=b[6],i=b[7];b=b[8];var l=c[0],m=c[1],n=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7];c=c[8];a[0]=d*l+e*p+f*s;a[1]=d*m+e*q+f*t;a[2]=d*n+e*r+f*c;a[3]=h*l+g*p+k*s;a[4]=h*m+g*q+k*t;a[5]=h*n+g*r+k*c;a[6]=j*l+i*p+b*s;a[7]=j*m+i*q+b*t;a[8]=j*n+i*r+b*c;return a};
tdl.fast.columnMajor.mulMatrixMatrix3=function(a,b,c){var d=b[0],e=b[1],f=b[2],h=b[3],g=b[4],k=b[5],j=b[6],i=b[7];b=b[8];var l=c[0],m=c[1],n=c[2],p=c[3],q=c[4],r=c[5],s=c[6],t=c[7];c=c[8];a[0]=d*l+h*m+j*n;a[1]=e*l+g*m+i*n;a[2]=f*l+k*m+b*n;a[3]=d*p+h*q+j*r;a[4]=e*p+g*q+i*r;a[5]=f*p+k*q+b*r;a[6]=d*s+h*t+j*c;a[7]=e*s+g*t+i*c;a[8]=f*s+k*t+b*c;return a};tdl.fast.mulMatrixMatrix3=null;
tdl.fast.rowMajor.mulMatrixMatrix4=function(a,b,c){var d=b[0],e=b[1],f=b[2],h=b[3],g=b[4],k=b[5],j=b[6],i=b[7],l=b[8],m=b[9],n=b[10],p=b[11],q=b[12],r=b[13],s=b[14];b=b[15];var t=c[0],u=c[1],v=c[2],w=c[3],y=c[4],z=c[5],A=c[6],B=c[7],C=c[8],D=c[9],E=c[10],x=c[11],F=c[12],G=c[13],H=c[14];c=c[15];a[0]=d*t+e*y+f*C+h*F;a[1]=d*u+e*z+f*D+h*G;a[2]=d*v+e*A+f*E+h*H;a[3]=d*w+e*B+f*x+h*c;a[4]=g*t+k*y+j*C+i*F;a[5]=g*u+k*z+j*D+i*G;a[6]=g*v+k*A+j*E+i*H;a[7]=g*w+k*B+j*x+i*c;a[8]=l*t+m*y+n*C+p*F;a[9]=l*u+m*z+n*D+
p*G;a[10]=l*v+m*A+n*E+p*H;a[11]=l*w+m*B+n*x+p*c;a[12]=q*t+r*y+s*C+b*F;a[13]=q*u+r*z+s*D+b*G;a[14]=q*v+r*A+s*E+b*H;a[15]=q*w+r*B+s*x+b*c;return a};
tdl.fast.columnMajor.mulMatrixMatrix4=function(a,b,c){var d=b[0],e=b[1],f=b[2],h=b[3],g=b[4],k=b[5],j=b[6],i=b[7],l=b[8],m=b[9],n=b[10],p=b[11],q=b[12],r=b[13],s=b[14];b=b[15];var t=c[0],u=c[1],v=c[2],w=c[3],y=c[4],z=c[5],A=c[6],B=c[7],C=c[8],D=c[9],E=c[10],x=c[11],F=c[12],G=c[13],H=c[14];c=c[15];a[0]=d*t+g*u+l*v+q*w;a[1]=e*t+k*u+m*v+r*w;a[2]=f*t+j*u+n*v+s*w;a[3]=h*t+i*u+p*v+b*w;a[4]=d*y+g*z+l*A+q*B;a[5]=e*y+k*z+m*A+r*B;a[6]=f*y+j*z+n*A+s*B;a[7]=h*y+i*z+p*A+b*B;a[8]=d*C+g*D+l*E+q*x;a[9]=e*C+k*D+m*
E+r*x;a[10]=f*C+j*D+n*E+s*x;a[11]=h*C+i*D+p*E+b*x;a[12]=d*F+g*G+l*H+q*c;a[13]=e*F+k*G+m*H+r*c;a[14]=f*F+j*G+n*H+s*c;a[15]=h*F+i*G+p*H+b*c;return a};tdl.fast.mulMatrixMatrix4=null;tdl.fast.rowMajor.column4=function(a,b,c){for(var d=0;4>d;++d)a[d]=b[4*d+c];return a};tdl.fast.columnMajor.column4=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];a[3]=b[c+3];return a};tdl.fast.column4=null;tdl.fast.rowMajor.row4=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];a[3]=b[c+3];return a};
tdl.fast.columnMajor.row4=function(a,b,c){for(var d=0;4>d;++d)a[d]=b[4*d+c];return a};tdl.fast.row4=null;tdl.fast.identity4=function(a){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
tdl.fast.transpose4=function(a,b){if(a===b){var c;c=b[1];b[1]=b[4];b[4]=c;c=b[2];b[2]=b[8];b[8]=c;c=b[3];b[3]=b[12];b[12]=c;c=b[6];b[6]=b[9];b[9]=c;c=b[7];b[7]=b[13];b[13]=c;c=b[11];b[11]=b[14];b[14]=c;return a}c=b[1];var d=b[2],e=b[3],f=b[4],h=b[5],g=b[6],k=b[7],j=b[8],i=b[9],l=b[10],m=b[11],n=b[12],p=b[13],q=b[14],r=b[15];a[0]=b[0];a[1]=f;a[2]=j;a[3]=n;a[4]=c;a[5]=h;a[6]=i;a[7]=p;a[8]=d;a[9]=g;a[10]=l;a[11]=q;a[12]=e;a[13]=k;a[14]=m;a[15]=r;return a};
tdl.fast.inverse4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],h=b[4],g=b[5],k=b[6],j=b[7],i=b[8],l=b[9],m=b[10],n=b[11],p=b[12],q=b[13],r=b[14],s=b[15],t=m*s,u=r*n,v=k*s,w=r*j,y=k*n,z=m*j,A=e*s,B=r*f,C=e*n,D=m*f,E=e*j,x=k*f,F=i*q,G=p*l,H=h*q,I=p*g,J=h*l,K=i*g,L=c*q,M=p*d,O=c*l,P=i*d,Q=c*g,R=h*d,S=t*g+w*l+y*q-(u*g+v*l+z*q),T=u*d+A*l+D*q-(t*d+B*l+C*q),q=v*d+B*g+E*q-(w*d+A*g+x*q),d=z*d+C*g+x*l-(y*d+D*g+E*l),g=1/(c*S+h*T+i*q+p*d);a[0]=g*S;a[1]=g*T;a[2]=g*q;a[3]=g*d;a[4]=g*(u*h+v*i+z*p-(t*h+w*i+y*p));
a[5]=g*(t*c+B*i+C*p-(u*c+A*i+D*p));a[6]=g*(w*c+A*h+x*p-(v*c+B*h+E*p));a[7]=g*(y*c+D*h+E*i-(z*c+C*h+x*i));a[8]=g*(F*j+I*n+J*s-(G*j+H*n+K*s));a[9]=g*(G*f+L*n+P*s-(F*f+M*n+O*s));a[10]=g*(H*f+M*j+Q*s-(I*f+L*j+R*s));a[11]=g*(K*f+O*j+R*n-(J*f+P*j+Q*n));a[12]=g*(H*m+K*r+G*k-(J*r+F*k+I*m));a[13]=g*(O*r+F*e+M*m-(L*m+P*r+G*e));a[14]=g*(L*k+R*r+I*e-(Q*r+H*e+M*k));a[15]=g*(Q*m+J*e+P*k-(O*k+R*m+K*e));return a};tdl.fast.matrix4.inverse=function(a,b){return tdl.fast.inverse4(a,b)};
tdl.fast.matrix4.mul=function(a,b,c){return tdl.fast.mulMatrixMatrix4(a,b,c)};tdl.fast.matrix4.copy=function(a,b){return tdl.fast.copyMatrix(a,b)};tdl.fast.matrix4.setTranslation=function(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.fast.matrix4.getTranslation=function(a,b){a[0]=b[12];a[1]=b[13];a[2]=b[14];return a};tdl.fast.matrix4.identity=function(a){return tdl.fast.identity4(a)};tdl.fast.matrix4.getAxis=function(a,b,c){c*=4;a[0]=b[c+0];a[1]=b[c+1];a[2]=b[c+2];return a};
tdl.fast.matrix4.perspective=function(a,b,c,d,e){b=Math.tan(0.5*Math.PI-0.5*b);var f=1/(d-e);a[0]=b/c;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=(d+e)*f;a[11]=-1;a[12]=0;a[13]=0;a[14]=2*d*e*f;a[15]=0;return a};tdl.fast.matrix4.ortho=function(a,b,c,d,e,f,h){a[0]=2/(c-b);a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2/(e-d);a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=-1/(h-f);a[11]=0;a[12]=(c+b)/(b-c);a[13]=(e+d)/(d-e);a[14]=-f/(f-h);a[15]=1;return a};
tdl.fast.matrix4.frustum=function(a,b,c,d,e,f,h){var g=c-b,k=e-d,j=f-h;a[0]=2*f/g;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=2*f/k;a[6]=0;a[7]=0;a[8]=(b+c)/g;a[9]=(e+d)/k;a[10]=h/j;a[11]=-1;a[12]=0;a[13]=0;a[14]=f*h/j;a[15]=0;return a};
tdl.fast.matrix4.lookAt=function(a,b,c,d){var e=tdl.fast.temp0v3_,f=tdl.fast.temp1v3_,h=tdl.fast.temp2v3_;c=tdl.fast.normalize(e,tdl.fast.subVector(e,b,c));d=tdl.fast.normalize(f,tdl.fast.cross(f,d,c));h=tdl.fast.cross(h,c,d);a[0]=d[0];a[1]=h[0];a[2]=c[0];a[3]=0;a[4]=d[1];a[5]=h[1];a[6]=c[1];a[7]=0;a[8]=d[2];a[9]=h[2];a[10]=c[2];a[11]=0;a[12]=-tdl.fast.dot(d,b);a[13]=-tdl.fast.dot(h,b);a[14]=-tdl.fast.dot(c,b);a[15]=1;return a};
tdl.fast.matrix4.cameraLookAt=function(a,b,c,d){var e=tdl.fast.temp0v3_,f=tdl.fast.temp1v3_,h=tdl.fast.temp2v3_;c=tdl.fast.normalize(e,tdl.fast.subVector(e,b,c));d=tdl.fast.normalize(f,tdl.fast.cross(f,d,c));h=tdl.fast.cross(h,c,d);a[0]=d[0];a[1]=d[1];a[2]=d[2];a[3]=0;a[4]=h[0];a[5]=h[1];a[6]=h[2];a[7]=0;a[8]=c[0];a[9]=c[1];a[10]=c[2];a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};
tdl.fast.matrix4.translation=function(a,b){a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.fast.matrix4.translate=function(a,b){var c=b[0],d=b[1],e=b[2],f=a[1],h=a[2],g=a[3],k=a[5],j=a[6],i=a[7],l=a[9],m=a[10],n=a[11],p=a[13],q=a[14],r=a[15];a[12]=a[0]*c+a[4]*d+a[8]*e+a[12];a[13]=f*c+k*d+l*e+p;a[14]=h*c+j*d+m*e+q;a[15]=g*c+i*d+n*e+r;return a};tdl.fast.matrix4.transpose=tdl.fast.transpose4;
tdl.fast.matrix4.rotationX=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=1;a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=c;a[6]=d;a[7]=0;a[8]=0;a[9]=-d;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateX=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],h=a[8],g=a[9],k=a[10],j=a[11],i=Math.cos(b),l=Math.sin(b);a[4]=i*c+l*h;a[5]=i*d+l*g;a[6]=i*e+l*k;a[7]=i*f+l*j;a[8]=i*h-l*c;a[9]=i*g-l*d;a[10]=i*k-l*e;a[11]=i*j-l*f;return a};
tdl.fast.matrix4.rotationY=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=c;a[1]=0;a[2]=-d;a[3]=0;a[4]=0;a[5]=1;a[6]=0;a[7]=0;a[8]=d;a[9]=0;a[10]=c;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[8],g=a[9],k=a[10],j=a[11],i=Math.cos(b),l=Math.sin(b);a[0]=i*c-l*h;a[1]=i*d-l*g;a[2]=i*e-l*k;a[3]=i*f-l*j;a[8]=i*h+l*c;a[9]=i*g+l*d;a[10]=i*k+l*e;a[11]=i*j+l*f;return a};
tdl.fast.matrix4.rotationZ=function(a,b){var c=Math.cos(b),d=Math.sin(b);a[0]=c;a[1]=d;a[2]=0;a[3]=0;a[4]=-d;a[5]=c;a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=1;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],k=a[6],j=a[7],i=Math.cos(b),l=Math.sin(b);a[0]=i*c+l*h;a[1]=i*d+l*g;a[2]=i*e+l*k;a[3]=i*f+l*j;a[4]=i*h-l*c;a[5]=i*g-l*d;a[6]=i*k-l*e;a[7]=i*j-l*f;return a};
tdl.fast.matrix4.axisRotation=function(a,b,c){var d=b[0],e=b[1];b=b[2];var f=Math.sqrt(d*d+e*e+b*b),d=d/f,e=e/f;b/=f;var f=d*d,h=e*e,g=b*b,k=Math.cos(c);c=Math.sin(c);var j=1-k;a[0]=f+(1-f)*k;a[1]=d*e*j+b*c;a[2]=d*b*j-e*c;a[3]=0;a[4]=d*e*j-b*c;a[5]=h+(1-h)*k;a[6]=e*b*j+d*c;a[7]=0;a[8]=d*b*j+e*c;a[9]=e*b*j-d*c;a[10]=g+(1-g)*k;a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};
tdl.fast.matrix4.axisRotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=Math.sqrt(d*d+e*e+f*f);d/=b;e/=b;f/=b;b=d*d;var h=e*e,g=f*f,k=Math.cos(c),j=Math.sin(c),i=1-k;c=b+(1-b)*k;b=d*e*i+f*j;var l=d*f*i-e*j,m=d*e*i-f*j,h=h+(1-h)*k,n=e*f*i+d*j,p=d*f*i+e*j,d=e*f*i-d*j,e=g+(1-g)*k,f=a[0],g=a[1],k=a[2],j=a[3],i=a[4],q=a[5],r=a[6],s=a[7],t=a[8],u=a[9],v=a[10],w=a[11];a[0]=c*f+b*i+l*t;a[1]=c*g+b*q+l*u;a[2]=c*k+b*r+l*v;a[3]=c*j+b*s+l*w;a[4]=m*f+h*i+n*t;a[5]=m*g+h*q+n*u;a[6]=m*k+h*r+n*v;a[7]=m*j+h*s+n*w;a[8]=
p*f+d*i+e*t;a[9]=p*g+d*q+e*u;a[10]=p*k+d*r+e*v;a[11]=p*j+d*s+e*w;return a};tdl.fast.matrix4.scaling=function(a,b){a[0]=b[0];a[1]=0;a[2]=0;a[3]=0;a[4]=0;a[5]=b[1];a[6]=0;a[7]=0;a[8]=0;a[9]=0;a[10]=b[2];a[11]=0;a[12]=0;a[13]=0;a[14]=0;a[15]=1;return a};tdl.fast.matrix4.scale=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]*=c;a[1]*=c;a[2]*=c;a[3]*=c;a[4]*=d;a[5]*=d;a[6]*=d;a[7]*=d;a[8]*=e;a[9]*=e;a[10]*=e;a[11]*=e;return a};
tdl.fast.installRowMajorFunctions=function(){for(var a in tdl.fast.rowMajor)tdl.fast[a]=tdl.fast.rowMajor[a]};tdl.fast.installColumnMajorFunctions=function(){for(var a in tdl.fast.columnMajor)tdl.fast[a]=tdl.fast.columnMajor[a]};tdl.fast.installRowMajorFunctions();tdl.quaternions=tdl.quaternions||{};tdl.quaternions.mathType=function(a){return"number"===typeof a?"Scalar":"Quaternion"};tdl.quaternions.identity=function(){return[0,0,0,1]};tdl.quaternions.copy=function(a){return a.slice()};
tdl.quaternions.negative=function(a){return[-a[0],-a[1],-a[2],-a[3]]};tdl.quaternions.addQuaternionQuaternion=function(a,b){return[a[0]+b[0],a[1]+b[1],a[2]+b[2],a[3]+b[3]]};tdl.quaternions.addQuaternionScalar=function(a,b){return a.slice(0,3).concat(a[3]+b)};tdl.quaternions.addScalarQuaternion=function(a,b){return b.slice(0,3).concat(a+b[3])};tdl.quaternions.subQuaternionQuaternion=function(a,b){return[a[0]-b[0],a[1]-b[1],a[2]-b[2],a[3]-b[3]]};
tdl.quaternions.subQuaternionScalar=function(a,b){return a.slice(0,3).concat(a[3]-b)};tdl.quaternions.subScalarQuaternion=function(a,b){return[-b[0],-b[1],-b[2],a-b[3]]};tdl.quaternions.mulScalarQuaternion=function(a,b){return[a*b[0],a*b[1],a*b[2],a*b[3]]};tdl.quaternions.mulQuaternionScalar=function(a,b){return[b*a[0],b*a[1],b*a[2],b*a[3]]};
tdl.quaternions.mulQuaternionQuaternion=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=b[0],g=b[1],k=b[2],j=b[3];return[f*h+c*j+d*k-e*g,f*g+d*j+e*h-c*k,f*k+e*j+c*g-d*h,f*j-c*h-d*g-e*k]};tdl.quaternions.divQuaternionQuaternion=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=b[0],g=b[1],k=b[2],j=b[3],i=1/(j*j+h*h+g*g+k*k);return[(c*j-f*h-d*k+e*g)*i,(c*k-f*g+d*j-e*h)*i,(d*h+e*j-f*k-c*g)*i,(f*j+c*h+d*g+e*k)*i]};tdl.quaternions.divQuaternionScalar=function(a,b){return[a[0]/b,a[1]/b,a[2]/b,a[3]/b]};
tdl.quaternions.divScalarQuaternion=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3],h=1/(c*c+d*d+e*e+f*f);return[-a*c*h,-a*d*h,-a*e*h,a*f*h]};tdl.quaternions.inverse=function(a){var b=a[0],c=a[1],d=a[2];a=a[3];var e=1/(b*b+c*c+d*d+a*a);return[-b*e,-c*e,-d*e,a*e]};tdl.quaternions.mul=function(a,b){return tdl.quaternions["mul"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};
tdl.quaternions.div=function(a,b){return tdl.quaternions["div"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.add=function(a,b){return tdl.quaternions["add"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.sub=function(a,b){return tdl.quaternions["sub"+tdl.quaternions.mathType(a)+tdl.quaternions.mathType(b)](a,b)};tdl.quaternions.length=function(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3])};
tdl.quaternions.lengthSquared=function(a){return a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]};tdl.quaternions.normalize=function(a){var b=1/Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]+a[3]*a[3]);return[a[0]*b,a[1]*b,a[2]*b,a[3]*b]};tdl.quaternions.conjugate=function(a){return[-a[0],-a[1],-a[2],a[3]]};tdl.quaternions.rotationX=function(a){return[Math.sin(a/2),0,0,Math.cos(a/2)]};tdl.quaternions.rotationY=function(a){return[0,Math.sin(a/2),0,Math.cos(a/2)]};
tdl.quaternions.rotationZ=function(a){return[0,0,Math.sin(a/2),Math.cos(a/2)]};tdl.quaternions.axisRotation=function(a,b){var c=1/Math.sqrt(a[0]*a[0]+a[1]*a[1]+a[2]*a[2]),d=Math.sin(b/2),e=Math.cos(b/2);return[d*a[0]*c,d*a[1]*c,d*a[2]*c,e]};
tdl.quaternions.quaternionToRotation=function(a){var b=a[0],c=a[1],d=a[2],e=a[3];a=e*e;var f=e*b,h=e*c,e=e*d,g=b*b,k=b*c,b=b*d,j=c*c,c=c*d,d=d*d,i=a+g+j+d;return[(a+g-j-d)/i,2*(e+k)/i,2*(b-h)/i,0,2*(k-e)/i,(a-g+j-d)/i,2*(f+c)/i,0,2*(h+b)/i,2*(c-f)/i,(a-g-j+d)/i,0,0,0,0,1]};
tdl.quaternions.rotationToQuaternion=function(a){var b,c,d;a[0]>a[5]&&a[0]>a[10]?(b=0,c=1,d=2):a[5]>a[0]&&a[5]>a[10]?(b=1,c=2,d=0):(b=2,c=0,d=1);var e=Math.sqrt(1+a[4*b+b]-a[4*c+c]-a[4*d+d]),f=[];f[b]=0.5*e;f[c]=0.5*(a[4*c+b]+a[4*b+c])/e;f[d]=0.5*(a[4*b+d]+a[4*d+b])/e;f[3]=0.5*(a[4*c+d]-a[4*d+c])/e;return f};try{module.exports=tdl}catch(e$$10){}tdl.math=tdl.math||{};tdl.math.randomSeed_=0;tdl.math.RANDOM_RANGE_=Math.pow(2,32);tdl.math.matrix4=tdl.math.matrix4||{};
tdl.math.rowMajor=tdl.math.rowMajor||{};tdl.math.columnMajor=tdl.math.columnMajor||{};tdl.math.pseudoRandom=function(){var a=tdl.math;return(a.randomSeed_=(134775813*a.randomSeed_+1)%a.RANDOM_RANGE_)/a.RANDOM_RANGE_};tdl.math.resetPseudoRandom=function(){tdl.math.randomSeed_=0};tdl.math.randomInt=function(a){return Math.floor(Math.random()*a)};tdl.math.degToRad=function(a){return a*Math.PI/180};tdl.math.radToDeg=function(a){return 180*a/Math.PI};
tdl.math.lerpScalar=function(a,b,c){return(1-c)*a+c*b};tdl.math.addVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]+b[e];return c};tdl.math.subVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]-b[e];return c};tdl.math.lerpVector=function(a,b,c){for(var d=[],e=a.length,f=0;f<e;++f)d[f]=(1-c)*a[f]+c*b[f];return d};tdl.math.modClamp=function(a,b,c){c=c||0;if(1E-5>b)return c;a-=c;a=0>a?a-Math.floor(a/b)*b:a%b;return a+c};
tdl.math.lerpCircular=function(a,b,c,d){a=tdl.math.modClamp(a,d);b=tdl.math.modClamp(b,d);var e=b-a;Math.abs(e)>0.5*d&&(b=0<e?b-d:b+d);return tdl.math.modClamp(tdl.math.lerpScalar(a,b,c),d)};tdl.math.lerpRadian=function(a,b,c){return tdl.math.lerpCircular(a,b,c,2*Math.PI)};tdl.math.divVectorScalar=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b;return c};tdl.math.dot=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)c+=a[e]*b[e];return c};
tdl.math.cross=function(a,b){return[a[1]*b[2]-a[2]*b[1],a[2]*b[0]-a[0]*b[2],a[0]*b[1]-a[1]*b[0]]};tdl.math.length=function(a){for(var b=0,c=a.length,d=0;d<c;++d)b+=a[d]*a[d];return Math.sqrt(b)};tdl.math.lengthSquared=function(a){for(var b=0,c=a.length,d=0;d<c;++d)b+=a[d]*a[d];return b};tdl.math.distance=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)var f=a[e]-b[e],c=c+f*f;return Math.sqrt(c)};tdl.math.distanceSquared=function(a,b){for(var c=0,d=a.length,e=0;e<d;++e)var f=a[e]-b[e],c=c+f*f;return c};
tdl.math.normalize=function(a){for(var b=[],c=0,d=a.length,e=0;e<d;++e)c+=a[e]*a[e];c=Math.sqrt(c);if(1E-5<c)for(e=0;e<d;++e)b[e]=a[e]/c;else b=[0,0,0];return b};tdl.math.addMatrix=function(a,b){for(var c=[],d=a.length,e=a[0].length,f=0;f<d;++f){for(var h=[],g=a[f],k=b[f],j=0;j<e;++j)h[j]=g[j]+k[j];c[f]=h}return c};tdl.math.subMatrix=function(a,b){for(var c=[],d=a.length,e=a[0].length,f=0;f<d;++f){for(var h=[],g=a[f],k=b[f],j=0;j<e;++j)h[j]=g[j]-k[j];c[f]=h}return c};
tdl.math.lerpMatrix=function(a,b,c){for(var d=[],e=a.length,f=0;f<e;++f)d[f]=(1-c)*a[f]+c*b[f];return d};tdl.math.divMatrixScalar=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b;return c};tdl.math.negativeScalar=function(a){return-a};tdl.math.negativeVector=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=-a[d];return b};tdl.math.negativeMatrix=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=-a[d];return b};tdl.math.copyScalar=function(a){return a};
tdl.math.copyVector=function(a){for(var b=[],c=0;c<a.length;c++)b[c]=a[c];return b};tdl.math.copyMatrix=function(a){for(var b=[],c=a.length,d=0;d<c;++d)b[d]=a[d];return b};tdl.math.mulScalarScalar=function(a,b){return a*b};tdl.math.mulScalarVector=function(a,b){for(var c=[],d=b.length,e=0;e<d;++e)c[e]=a*b[e];return c};tdl.math.mulVectorScalar=function(a,b){return tdl.math.mulScalarVector(b,a)};tdl.math.mulScalarMatrix=function(a,b){for(var c=[],d=b.length,e=0;e<d;++e)c[e]=a*b[e];return c};
tdl.math.mulMatrixScalar=function(a,b){return tdl.math.mulScalarMatrix(b,a)};tdl.math.mulVectorVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]*b[e];return c};tdl.math.divVectorVector=function(a,b){for(var c=[],d=a.length,e=0;e<d;++e)c[e]=a[e]/b[e];return c};tdl.math.rowMajor.mulVectorMatrix4=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=a[e]*b[4*e+d];return c};
tdl.math.columnMajor.mulVectorMatrix=function(a){for(var b=[],c=0;4>c;++c)for(var d=b[c]=0;4>d;++d)b[c]+=a[d]*b[4*c+d];return b};tdl.math.mulVectorMatrix=null;tdl.math.rowMajor.mulMatrixVector=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=a[4*d+e]*b[e];return c};tdl.math.columnMajor.mulMatrixVector=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=c[d]=0;4>e;++e)c[d]+=b[e]*a[4*e+d];return c};tdl.math.mulMatrixVector=null;
tdl.math.rowMajor.mulMatrixMatrix2=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=b[0],g=b[1],k=b[2],j=b[3];return[c*h+d*k,c*g+d*j,e*h+f*k,e*g+f*j]};tdl.math.columnMajor.mulMatrixMatrix2=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=b[0],g=b[1],k=b[2],j=b[3];return[c*h+e*g,d*h+f*g,c*k+e*j,d*k+f*j]};tdl.math.mulMatrixMatrix2=null;
tdl.math.rowMajor.mulMatrixMatrix3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],k=a[6],j=a[7],i=a[8],l=b[0],m=b[1],n=b[2],p=b[3],q=b[4],r=b[5],s=b[6],t=b[7],u=b[8];return[c*l+d*p+e*s,c*m+d*q+e*t,c*n+d*r+e*u,f*l+h*p+g*s,f*m+h*q+g*t,f*n+h*r+g*u,k*l+j*p+i*s,k*m+j*q+i*t,k*n+j*r+i*u]};
tdl.math.columnMajor.mulMatrixMatrix3=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],k=a[6],j=a[7],i=a[8],l=b[0],m=b[1],n=b[2],p=b[3],q=b[4],r=b[5],s=b[6],t=b[7],u=b[8];return[c*l+f*m+k*n,d*l+h*m+j*n,e*l+g*m+i*n,c*p+f*q+k*r,d*p+h*q+j*r,e*p+g*q+i*r,c*s+f*t+k*u,d*s+h*t+j*u,e*s+g*t+i*u]};tdl.math.mulMatrixMatrix3=null;
tdl.math.rowMajor.mulMatrixMatrix4=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],k=a[6],j=a[7],i=a[8],l=a[9],m=a[10],n=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],y=b[4],z=b[5],A=b[6],B=b[7],C=b[8],D=b[9],E=b[10],x=b[11],F=b[12],G=b[13],H=b[14],I=b[15];return[c*t+d*y+e*C+f*F,c*u+d*z+e*D+f*G,c*v+d*A+e*E+f*H,c*w+d*B+e*x+f*I,h*t+g*y+k*C+j*F,h*u+g*z+k*D+j*G,h*v+g*A+k*E+j*H,h*w+g*B+k*x+j*I,i*t+l*y+m*C+n*F,i*u+l*z+m*D+n*G,i*v+l*A+m*E+n*H,i*w+l*B+m*x+n*I,p*t+q*y+r*C+s*
F,p*u+q*z+r*D+s*G,p*v+q*A+r*E+s*H,p*w+q*B+r*x+s*I]};
tdl.math.columnMajor.mulMatrixMatrix4=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],k=a[6],j=a[7],i=a[8],l=a[9],m=a[10],n=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],y=b[4],z=b[5],A=b[6],B=b[7],C=b[8],D=b[9],E=b[10],x=b[11],F=b[12],G=b[13],H=b[14],I=b[15];return[c*t+h*u+i*v+p*w,d*t+g*u+l*v+q*w,e*t+k*u+m*v+r*w,f*t+j*u+n*v+s*w,c*y+h*z+i*A+p*B,d*y+g*z+l*A+q*B,e*y+k*z+m*A+r*B,f*y+j*z+n*A+s*B,c*C+h*D+i*E+p*x,d*C+g*D+l*E+q*x,e*C+k*D+m*E+r*x,f*C+j*D+n*E+s*x,c*F+h*G+i*
H+p*I,d*F+g*G+l*H+q*I,e*F+k*G+m*H+r*I,f*F+j*G+n*H+s*I]};tdl.math.mulMatrixMatrix4=null;tdl.math.rowMajor.mulMatrixMatrix=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=0;4>e;++e)for(var f=c[4*d+e]=0;4>f;++f)c[4*d+e]+=a[4*d+f]*b[4*f+e];return c};tdl.math.columnMajor.mulMatrixMatrix=function(a,b){for(var c=[],d=0;4>d;++d)for(var e=0;4>e;++e)for(var f=c[4*d+e]=0;4>f;++f)c[4*d+e]+=b[4*d+f]*a[4*f+e];return c};tdl.math.mulMatrixMatrix=null;
tdl.math.rowMajor.column=function(a,b){for(var c=[],d=0;4>d;++d)c[d]=a[4*d+b];return c};tdl.math.columnMajor.column=function(a,b){for(var c=[],d=0;4>d;++d)c[d]=a[4*b+d];return c};tdl.math.column=null;tdl.math.rowMajor.row=function(a,b){for(var c=[],d=0;4>d;++d)c[b]=a[4*b+d];return c};tdl.math.columnMajor.row=function(a,b,c){c=c||4;for(var d=[],e=0;e<c;++e)d[e]=a[e*c+b];return d};tdl.math.row=null;
tdl.math.transpose=function(a){var b=[],c=a[1],d=a[2],e=a[3],f=a[4],h=a[5],g=a[6],k=a[7],j=a[8],i=a[9],l=a[10],m=a[11],n=a[12],p=a[13],q=a[14],r=a[15];b[0]=a[0];b[1]=f;b[2]=j;b[3]=n;b[4]=c;b[5]=h;b[6]=i;b[7]=p;b[8]=d;b[9]=g;b[10]=l;b[11]=q;b[12]=e;b[13]=k;b[14]=m;b[15]=r;return b};tdl.math.trace=function(a){for(var b=0,c=0;4>c;++c)b+=a[4*c+c];return b};tdl.math.det1=function(a){return a[0]};tdl.math.det2=function(a){return a[0]*a[3]-a[1]*a[2]};
tdl.math.det3=function(a){return a[8]*(a[0]*a[4]-a[1]*a[3])-a[7]*(a[0]*a[5]-a[2]*a[3])+a[6]*(a[1]*a[5]-a[2]*a[4])};tdl.math.det4=function(a){var b=a[0]*a[5]-a[1]*a[4],c=a[0]*a[6]-a[2]*a[4],d=a[0]*a[7]-a[3]*a[4],e=a[1]*a[6]-a[2]*a[5],f=a[1]*a[7]-a[3]*a[5],h=a[2]*a[7]-a[3]*a[6];return a[15]*(a[10]*b-a[9]*c+a[8]*e)-a[14]*(a[11]*b-a[9]*d+a[8]*f)+a[13]*(a[11]*c-a[10]*d+a[8]*h)-a[12]*(a[11]*e-a[10]*f+a[9]*h)};tdl.math.inverse1=function(a){return[[1/a[0]]]};
tdl.math.inverse2=function(a){var b=1/(a[0]*a[3]-a[1]*a[2]);return[b*a[3],-b*a[1],-b*a[2],b*a[0]]};tdl.math.inverse3=function(a){var b=a[4]*a[8]-a[5]*a[7],c=a[1]*a[8]-a[2]*a[7],d=a[1]*a[5]-a[2]*a[4],e=1/(a[0]*b-a[3]*c+a[6]*d);return[e*b,-e*c,e*d,-e*(a[3]*a[8]-a[5]*a[6]),e*(a[0]*a[8]-a[2]*a[6]),-e*(a[0]*a[5]-a[2]*a[3]),e*(a[3]*a[7]-a[4]*a[6]),-e*(a[0]*a[7]-a[1]*a[6]),e*(a[0]*a[4]-a[1]*a[3])]};
tdl.math.inverse4=function(a){var b=a[10]*a[15],c=a[14]*a[11],d=a[6]*a[15],e=a[14]*a[7],f=a[6]*a[11],h=a[10]*a[7],g=a[2]*a[15],k=a[14]*a[3],j=a[2]*a[11],i=a[10]*a[3],l=a[2]*a[7],m=a[6]*a[3],n=a[8]*a[13],p=a[12]*a[9],q=a[4]*a[13],r=a[12]*a[5],s=a[4]*a[9],t=a[8]*a[5],u=a[0]*a[13],v=a[12]*a[1],w=a[0]*a[9],y=a[8]*a[1],z=a[0]*a[5],A=a[4]*a[1],B=b*a[5]+e*a[9]+f*a[13]-(c*a[5]+d*a[9]+h*a[13]),C=c*a[1]+g*a[9]+i*a[13]-(b*a[1]+k*a[9]+j*a[13]),D=d*a[1]+k*a[5]+l*a[13]-(e*a[1]+g*a[5]+m*a[13]),E=h*a[1]+j*a[5]+m*
a[9]-(f*a[1]+i*a[5]+l*a[9]),x=1/(a[0]*B+a[4]*C+a[8]*D+a[12]*E);return[x*B,x*C,x*D,x*E,x*(c*a[4]+d*a[8]+h*a[12]-(b*a[4]+e*a[8]+f*a[12])),x*(b*a[0]+k*a[8]+j*a[12]-(c*a[0]+g*a[8]+i*a[12])),x*(e*a[0]+g*a[4]+m*a[12]-(d*a[0]+k*a[4]+l*a[12])),x*(f*a[0]+i*a[4]+l*a[8]-(h*a[0]+j*a[4]+m*a[8])),x*(n*a[7]+r*a[11]+s*a[15]-(p*a[7]+q*a[11]+t*a[15])),x*(p*a[3]+u*a[11]+y*a[15]-(n*a[3]+v*a[11]+w*a[15])),x*(q*a[3]+v*a[7]+z*a[15]-(r*a[3]+u*a[7]+A*a[15])),x*(t*a[3]+w*a[7]+A*a[11]-(s*a[3]+y*a[7]+z*a[11])),x*(q*a[10]+t*
a[14]+p*a[6]-(s*a[14]+n*a[6]+r*a[10])),x*(w*a[14]+n*a[2]+v*a[10]-(u*a[10]+y*a[14]+p*a[2])),x*(u*a[6]+A*a[14]+r*a[2]-(z*a[14]+q*a[2]+v*a[6])),x*(z*a[10]+s*a[2]+y*a[6]-(w*a[6]+A*a[10]+t*a[2]))]};tdl.math.codet=function(a,b,c){for(var d=[],e=0,f=0;3>f;++f){e==b&&e++;for(var h=0,g=0;3>g;++g)h==c&&h++,d[4*f+g]=a[4*e+h],h++;e++}return tdl.math.det(d)};tdl.math.det=function(a){return tdl.math.det4(a)};tdl.math.inverse=function(a){return tdl.math.inverse4(a)};tdl.math.orthonormalize=function(){};
tdl.math.matrix4.inverse=function(a){return tdl.math.inverse4(a)};tdl.math.matrix4.mul=function(a,b){return tdl.math.mulMatrixMatrix4(a,b)};tdl.math.matrix4.det=function(a){return tdl.math.det4(a)};tdl.math.matrix4.copy=function(a){return tdl.math.copyMatrix(a)};tdl.math.matrix4.transpose=tdl.math.transpose;tdl.math.matrix4.setUpper3x3=function(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[4]=b[3];a[5]=b[4];a[6]=b[5];a[8]=b[6];a[9]=b[7];a[10]=b[8];return a};
tdl.math.matrix4.getUpper3x3=function(a){return[a[0],a[1],a[2],a[4],a[5],a[6],a[8],a[9],a[10]]};tdl.math.matrix4.setTranslation=function(a,b){a[12]=b[0];a[13]=b[1];a[14]=b[2];a[15]=1;return a};tdl.math.matrix4.getTranslation=function(a){return[a[12],a[13],a[14],a[15]]};tdl.math.matrix4.transformPoint=function(a,b){var c=b[0],d=b[1],e=b[2],f=c*a[3]+d*a[7]+e*a[11]+a[15];return[(c*a[0]+d*a[4]+e*a[8]+a[12])/f,(c*a[1]+d*a[5]+e*a[9]+a[13])/f,(c*a[2]+d*a[6]+e*a[10]+a[14])/f]};
tdl.math.matrix4.transformVector4=function(a,b){var c=b[0],d=b[1],e=b[2],f=b[3];return[c*a[0]+d*a[4]+e*a[8]+f*a[12],c*a[1]+d*a[5]+e*a[9]+f*a[13],c*a[2]+d*a[6]+e*a[10]+f*a[14],c*a[3]+d*a[7]+e*a[11]+f*a[15]]};tdl.math.matrix4.transformDirection=function(a,b){var c=b[0],d=b[1],e=b[2];return[c*a[0]+d*a[4]+e*a[8],c*a[1]+d*a[5]+e*a[9],c*a[2]+d*a[6]+e*a[10]]};
tdl.math.matrix4.transformNormal=function(a,b){var c=tdl.math.inverse4(a),d=b[0],e=b[1],f=b[2];return[d*c[0]+e*c[1]+f*c[2],d*c[4]+e*c[5]+f*c[6],d*c[8]+e*c[9]+f*c[10]]};tdl.math.matrix4.identity=function(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]};tdl.math.matrix4.setIdentity=function(a){for(var b=0;4>b;b++)for(var c=0;4>c;c++)a[4*b+c]=b==c?1:0;return a};tdl.math.matrix4.perspective=function(a,b,c,d){a=Math.tan(0.5*Math.PI-0.5*a);var e=1/(c-d);return[a/b,0,0,0,0,a,0,0,0,0,(c+d)*e,-1,0,0,2*c*d*e,0]};
tdl.math.matrix4.orthographic=function(a,b,c,d,e,f){return[2/(b-a),0,0,0,0,2/(d-c),0,0,0,0,1/(e-f),0,(a+b)/(a-b),(c+d)/(c-d),e/(e-f),1]};tdl.math.matrix4.frustum=function(a,b,c,d,e,f){var h=b-a,g=d-c,k=e-f;return[2*e/h,0,0,0,0,2*e/g,0,0,(a+b)/h,(d+c)/g,f/k,-1,0,0,e*f/k,0]};tdl.math.matrix4.lookAt=function(a,b,c){return tdl.math.inverse(tdl.math.matrix4.cameraLookAt(a,b,c))};
tdl.math.matrix4.cameraLookAt=function(a,b,c){b=tdl.math.normalize(tdl.math.subVector(a,b));c=tdl.math.normalize(tdl.math.cross(c,b));var d=tdl.math.cross(b,c);return tdl.math.inverse([c[0],c[1],c[2],0,d[0],d[1],d[2],0,b[0],b[1],b[2],0,-tdl.math.dot(c,a),-tdl.math.dot(d,a),-tdl.math.dot(b,a),1])};
tdl.math.matrix4.composition=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],k=a[6],j=a[7],i=a[8],l=a[9],m=a[10],n=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],y=b[4],z=b[5],A=b[6],B=b[7],C=b[8],D=b[9],E=b[10],x=b[11],F=b[12],G=b[13],H=b[14],I=b[15];return[c*t+h*u+i*v+p*w,d*t+g*u+l*v+q*w,e*t+k*u+m*v+r*w,f*t+j*u+n*v+s*w,c*y+h*z+i*A+p*B,d*y+g*z+l*A+q*B,e*y+k*z+m*A+r*B,f*y+j*z+n*A+s*B,c*C+h*D+i*E+p*x,d*C+g*D+l*E+q*x,e*C+k*D+m*E+r*x,f*C+j*D+n*E+s*x,c*F+h*G+i*H+p*I,d*F+
g*G+l*H+q*I,e*F+k*G+m*H+r*I,f*F+j*G+n*H+s*I]};
tdl.math.matrix4.compose=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],k=a[6],j=a[7],i=a[8],l=a[9],m=a[10],n=a[11],p=a[12],q=a[13],r=a[14],s=a[15],t=b[0],u=b[1],v=b[2],w=b[3],y=b[4],z=b[5],A=b[6],B=b[7],C=b[8],D=b[9],E=b[10],x=b[11],F=b[12],G=b[13],H=b[14],I=b[15];a[0]=c*t+h*u+i*v+p*w;a[1]=d*t+g*u+l*v+q*w;a[2]=e*t+k*u+m*v+r*w;a[3]=f*t+j*u+n*v+s*w;a[4]=c*y+h*z+i*A+p*B;a[5]=d*y+g*z+l*A+q*B;a[6]=e*y+k*z+m*A+r*B;a[7]=f*y+j*z+n*A+s*B;a[8]=c*C+h*D+i*E+p*x;a[9]=d*C+g*D+l*E+q*x;a[10]=e*C+k*
D+m*E+r*x;a[11]=f*C+j*D+n*E+s*x;a[12]=c*F+h*G+i*H+p*I;a[13]=d*F+g*G+l*H+q*I;a[14]=e*F+k*G+m*H+r*I;a[15]=f*F+j*G+n*H+s*I;return a};tdl.math.matrix4.translation=function(a){return[1,0,0,0,0,1,0,0,0,0,1,0,a[0],a[1],a[2],1]};tdl.math.matrix4.translate=function(a,b){var c=a[1],d=a[2],e=a[3],f=a[5],h=a[6],g=a[7],k=a[9],j=a[10],i=a[11],l=a[13],m=a[14],n=a[15],p=b[0],q=b[1],r=b[2];a[12]=a[0]*p+a[4]*q+a[8]*r+a[12];a[13]=c*p+f*q+k*r+l;a[14]=d*p+h*q+j*r+m;a[15]=e*p+g*q+i*r+n;return a};
tdl.math.matrix4.scaling=function(a){return[a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,1]};tdl.math.matrix4.scale=function(a,b){var c=b[0],d=b[1],e=b[2];a[0]*=c;a[1]*=c;a[2]*=c;a[3]*=c;a[4]*=d;a[5]*=d;a[6]*=d;a[7]*=d;a[8]*=e;a[9]*=e;a[10]*=e;a[11]*=e;return a};tdl.math.matrix4.rotationX=function(a){var b=Math.cos(a);a=Math.sin(a);return[1,0,0,0,0,b,a,0,0,-a,b,0,0,0,0,1]};
tdl.math.matrix4.rotateX=function(a,b){var c=a[4],d=a[5],e=a[6],f=a[7],h=a[8],g=a[9],k=a[10],j=a[11],i=Math.cos(b),l=Math.sin(b);a[4]=i*c+l*h;a[5]=i*d+l*g;a[6]=i*e+l*k;a[7]=i*f+l*j;a[8]=i*h-l*c;a[9]=i*g-l*d;a[10]=i*k-l*e;a[11]=i*j-l*f;return a};tdl.math.matrix4.rotationY=function(a){var b=Math.cos(a);a=Math.sin(a);return[b,0,-a,0,0,1,0,0,a,0,b,0,0,0,0,1]};
tdl.math.matrix4.rotateY=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[8],g=a[9],k=a[10],j=a[11],i=Math.cos(b),l=Math.sin(b);a[0]=i*c-l*h;a[1]=i*d-l*g;a[2]=i*e-l*k;a[3]=i*f-l*j;a[8]=i*h+l*c;a[9]=i*g+l*d;a[10]=i*k+l*e;a[11]=i*j+l*f;return a};tdl.math.matrix4.rotationZ=function(a){var b=Math.cos(a);a=Math.sin(a);return[b,a,0,0,-a,b,0,0,0,0,1,0,0,0,0,1]};
tdl.math.matrix4.rotateZ=function(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],g=a[5],k=a[6],j=a[7],i=Math.cos(b),l=Math.sin(b);a[0]=i*c+l*h;a[1]=i*d+l*g;a[2]=i*e+l*k;a[3]=i*f+l*j;a[4]=i*h-l*c;a[5]=i*g-l*d;a[6]=i*k-l*e;a[7]=i*j-l*f;return a};tdl.math.matrix4.rotationZYX=function(a){var b=Math.sin(a[0]),c=Math.cos(a[0]),d=Math.sin(a[1]),e=Math.cos(a[1]),f=Math.sin(a[2]);a=Math.cos(a[2]);var h=a*d,g=f*d;return[a*e,f*e,-d,0,h*b-f*c,g*b+a*c,e*b,0,h*c+f*b,g*c-a*b,e*c,0,0,0,0,1]};
tdl.math.matrix4.rotateZYX=function(a,b){var c=Math.sin(b[0]),d=Math.cos(b[0]),e=Math.sin(b[1]),f=Math.cos(b[1]),h=Math.sin(b[2]),g=Math.cos(b[2]),k=g*e,j=h*e,i=g*f,l=h*f,e=-e,m=k*c-h*d,n=j*c+g*d,p=f*c,h=k*d+h*c,c=j*d-g*c,d=f*d,f=a[0],g=a[1],j=a[2],k=a[3],q=a[4],r=a[5],s=a[6],t=a[7],u=a[8],v=a[9],w=a[10],y=a[11];a[0]=i*f+l*q+e*u;a[1]=i*g+l*r+e*v;a[2]=i*j+l*s+e*w;a[3]=i*k+l*t+e*y;a[4]=m*f+n*q+p*u;a[5]=m*g+n*r+p*v;a[6]=m*j+n*s+p*w;a[7]=m*k+n*t+p*y;a[8]=h*f+c*q+d*u;a[9]=h*g+c*r+d*v;a[10]=h*j+c*s+d*w;
a[11]=h*k+c*t+d*y;return a};tdl.math.matrix4.axisRotation=function(a,b){var c=a[0],d=a[1],e=a[2],f=Math.sqrt(c*c+d*d+e*e),c=c/f,d=d/f,e=e/f,f=c*c,h=d*d,g=e*e,k=Math.cos(b),j=Math.sin(b),i=1-k;return[f+(1-f)*k,c*d*i+e*j,c*e*i-d*j,0,c*d*i-e*j,h+(1-h)*k,d*e*i+c*j,0,c*e*i+d*j,d*e*i-c*j,g+(1-g)*k,0,0,0,0,1]};
tdl.math.matrix4.axisRotate=function(a,b,c){var d=b[0],e=b[1],f=b[2];b=Math.sqrt(d*d+e*e+f*f);d/=b;e/=b;f/=b;b=d*d;var h=e*e,g=f*f,k=Math.cos(c),j=Math.sin(c),i=1-k;c=b+(1-b)*k;b=d*e*i+f*j;var l=d*f*i-e*j,m=d*e*i-f*j,h=h+(1-h)*k,n=e*f*i+d*j,p=d*f*i+e*j,d=e*f*i-d*j,e=g+(1-g)*k,f=a[0],g=a[1],k=a[2],j=a[3],i=a[4],q=a[5],r=a[6],s=a[7],t=a[8],u=a[9],v=a[10],w=a[11];a[0]=c*f+b*i+l*t;a[1]=c*g+b*q+l*u;a[2]=c*k+b*r+l*v;a[3]=c*j+b*s+l*w;a[4]=m*f+h*i+n*t;a[5]=m*g+h*q+n*u;a[6]=m*k+h*r+n*v;a[7]=m*j+h*s+n*w;a[8]=
p*f+d*i+e*t;a[9]=p*g+d*q+e*u;a[10]=p*k+d*r+e*v;a[11]=p*j+d*s+e*w;return a};tdl.math.installRowMajorFunctions=function(){for(var a in tdl.math.rowMajor)tdl.math[a]=tdl.math.rowMajor[a]};tdl.math.installColumnMajorFunctions=function(){for(var a in tdl.math.columnMajor)tdl.math[a]=tdl.math.columnMajor[a]};tdl.math.installErrorCheckFunctions=function(){for(var a in tdl.math.errorCheck)tdl.math[a]=tdl.math.errorCheck[a]};
tdl.math.installErrorCheckFreeFunctions=function(){for(var a in tdl.math.errorCheckFree)tdl.math[a]=tdl.math.errorCheckFree[a]};tdl.math.installRowMajorFunctions();tdl.math.installErrorCheckFunctions();try{glm.exists&&alert("glm.common.js loaded over exist glm instance: "+glm)}catch(e$$11){}glm=null;GLMJS_PREFIX="glm-js: ";
var GLMJSError=function(a,b){function c(c){this.name=a;Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=Error().stack;this.message=c;b&&b.apply(this,arguments)}c.prototype=Error();c.prototype.name=a;return c.prototype.constructor=c}("GLMJSError");
$GLM_extern=function(a,b){b=b||a;return function(){GLM[b]=GLM.$outer.functions[a]||GLM.$outer[a];if(!GLM[b])throw new GLM.GLMJSError("$GLM_extern: unresolved external symbol: "+a);GLM.$DEBUG&&GLM.$outer.console.debug("$GLM_extern: resolved external symbol "+a+" "+typeof GLM[b]);return GLM[b].apply(this,arguments)}};
$GLM_reset_logging=function(a){if(a||"undefined"===typeof $GLM_log)$GLM_log=function(a,b){GLM.$outer.console.log.apply(GLM.$outer.console,[].slice.call(arguments).map(function(a){var b=typeof a;return"boolean"===b||"string"===b?a+"":GLM.$isGLMObject(a)||!isNaN(a)?GLM.to_string(a):a+""}))};if(a||"undefined"===typeof $GLM_console_log)$GLM_console_log=function(a,b){(console[a]||function(){}).apply(console,[].slice.call(arguments,1))};if(a||"undefined"===typeof $GLM_console_logger)$GLM_console_logger=
function(a){return $GLM_console_log.bind($GLM_console_log,a)};var b=$GLM_console_logger,c={};"debug,warn,info,error,log,write".replace(/\w+/g,function(a){c[a]=b(a)});"object"===typeof GLM&&GLM.$outer&&(GLM.$outer.console=c);return c};
GLM={$DEBUG:"undefined"!==typeof $GLM_DEBUG&&$GLM_DEBUG,version:"0.0.4c",GLM_VERSION:96,$outer:{functions:{},intern:function(a,b){if(void 0===b&&"object"===typeof a)for(var c in a)GLM.$outer.intern(c,a[c]);else return GLM.$DEBUG&&GLM.$outer.console.debug("intern "+a,b&&(b.name||typeof b)),GLM.$outer[a]=b},$import:function(a){GLM.$outer.intern(a.statics);GLM.$template.extend(GLM,GLM.$template.functions(a.functions),GLM.$template.operations(a.operations),GLM.$template.calculators(a.calculators));GLM.$init(a)},
console:$GLM_reset_logging(),quat_array_from_xyz:function(a){var b=glm.quat();b["*="](glm.angleAxis(a.x,glm.vec3(1,0,0)));b["*="](glm.angleAxis(a.y,glm.vec3(0,1,0)));b["*="](glm.angleAxis(a.z,glm.vec3(0,0,1)));return b.elements},quat_array_from_zyx:function(a){var b=glm.quat();b["*="](glm.angleAxis(a.z,glm.vec3(0,0,1)));b["*="](glm.angleAxis(a.y,glm.vec3(0,1,0)));b["*="](glm.angleAxis(a.x,glm.vec3(1,0,0)));return b.elements},_vec3_eulerAngles:function(a){var b=this.mat4_array_from_quat(a);a=b[0];
var c=b[4],d=b[1],e=b[5],f=b[2],h=b[6],b=b[10],g=new glm.vec3;g.y=Math.asin(-glm._clamp(f,-1,1));0.99999>Math.abs(f)?(g.x=Math.atan2(h,b),g.z=Math.atan2(d,a)):(g.x=0,g.z=Math.atan2(-c,e));return g},ArrayBuffer:ArrayBuffer,Float32Array:Float32Array,Float64Array:Float64Array,Uint8Array:Uint8Array,Uint16Array:Uint16Array,Uint32Array:Uint32Array,Int8Array:Int8Array,Int16Array:Int16Array,Int32Array:Int32Array,$rebindTypedArrays:function(a){var b=Object.keys(GLM.$outer).filter(RegExp.prototype.test.bind(/Array/)).map(function(b){var d=
a.call(this,b,GLM.$outer[b]);d!==GLM.$outer[b]&&(GLM.$outer.console.warn("$rebindTypedArrays("+b+")... replacing"),GLM.$outer[b]=d);return d});GLM.$subarray=GLM.patch_subarray();return b}},$extern:$GLM_extern,$log:$GLM_log,GLMJSError:GLMJSError,_radians:function(a){return a*Math.PI/180},_degrees:function(a){return 180*a/Math.PI},normalize:$GLM_extern("normalize"),inverse:$GLM_extern("inverse"),length:$GLM_extern("length"),length2:$GLM_extern("length2"),transpose:$GLM_extern("transpose"),mix:$GLM_extern("mix"),
clamp:$GLM_extern("clamp"),angleAxis:$GLM_extern("angleAxis"),rotate:$GLM_extern("rotate"),scale:$GLM_extern("scale"),translate:$GLM_extern("translate"),perspective:function(a,b,c,d){return GLM.$outer.mat4_perspective(a,b,c,d)},eulerAngles:function(a){return GLM.$outer.vec3_eulerAngles(a)},angle:function(a){return 2*Math.acos(a.w)},axis:function(a){var b=1-a.w*a.w;if(0>=b)return glm.vec3(0,0,1);b=1/Math.sqrt(b);return glm.vec3(a.x*b,a.y*b,a.z*b)},$from_ptr:function(a,b,c){if(this!==GLM)throw new GLM.GLMJSError("... use glm.make_<type>() (not new glm.make<type>())");
b=new GLM.$outer.Float32Array(b.buffer||b,c||0,a.componentLength);b=new GLM.$outer.Float32Array(b);return new a(b)},make_vec2:function(a,b){return GLM.$from_ptr.call(this,GLM.vec2,a,2===arguments.length?b:a.byteOffset)},make_vec3:function(a,b){return GLM.$from_ptr.call(this,GLM.vec3,a,2===arguments.length?b:a.byteOffset)},make_vec4:function(a,b){return GLM.$from_ptr.call(this,GLM.vec4,a,2===arguments.length?b:a.byteOffset)},make_quat:function(a,b){return GLM.$from_ptr.call(this,GLM.quat,a,2===arguments.length?
b:a.byteOffset)},make_mat3:function(a,b){return GLM.$from_ptr.call(this,GLM.mat3,a,2===arguments.length?b:a.byteOffset)},make_mat4:function(a,b){return GLM.$from_ptr.call(this,GLM.mat4,a,2===arguments.length?b:a.byteOffset)},diagonal4x4:function(a){if("vec4"!==a.$type)throw new GLM.GLMJSError("unsupported argtype to GLM.diagonal4x4: "+["type:"+type.o]);a=a.elements;return new GLM.mat4([a[0],0,0,0,0,a[1],0,0,0,0,a[2],0,0,0,0,a[3]])},toMat4:function(a){return new GLM.mat4(GLM.$outer.mat4_array_from_quat(a))},
FAITHFUL:!0,to_string:function(a,b){try{var c=a.$type||typeof a;if(!GLM[c])throw new GLM.GLMJSError("unsupported argtype to GLM.to_string: "+["type:"+c,a]);return GLM.FAITHFUL?GLM.$to_string(a,b).replace(/[\t\n]/g,""):GLM.$to_string(a,b)}catch(d){return GLM.$DEBUG&&GLM.$outer.console.error("to_string error: ",c,a+"",d),d+""}},$sizeof:function(a){return a.BYTES_PER_ELEMENT},$types:[],$isGLMConstructor:function(a){return!!(a&&a.prototype instanceof GLM.$GLMBaseType)},$getGLMType:function(a){return a instanceof
GLM.$GLMBaseType&&a.constructor||"string"===typeof a&&GLM[a]},$isGLMObject:function(a){return a instanceof GLM.$GLMBaseType&&a.$type},$to_array:function(a){return[].slice.call(a.elements)},$to_json:function(a,b,c){this instanceof GLM.$GLMBaseType&&(c=b,b=a,a=this);return JSON.stringify(GLM.$to_object(a),b,c)},$inspect:function(a){this instanceof GLM.$GLMBaseType&&(a=this);return GLM.$to_json(a,null,2)},_clamp:function(a,b,c){return a<b?b:a>c?c:a},max:function(a,b){return Math.max(a,b)},min:function(a,
b){return Math.min(a,b)},_sign:function(a){return 0<a?1:0>a?-1:+a},epsilon:function(){return 1E-6},FIXEDPRECISION:6,$toFixedString:function(a,b,c,d){void 0===d&&(d=GLM.FIXEDPRECISION);if(!c||!c.map)throw Error("unsupported argtype to $toFixedString(..,..,props="+typeof c+")");try{var e="";c.map(function(a){a=b[e=a];if(!a.toFixed)throw Error("!toFixed in w");return a.toFixed(0)})}catch(f){throw GLM.$DEBUG&&GLM.$outer.console.error("$toFixedString error",a,typeof b,Object.prototype.toString.call(b),
e),GLM.$DEBUG&&glm.$log("$toFixedString error",a,typeof b,Object.prototype.toString.call(b),e),new GLM.GLMJSError(f);}c=c.map(function(a){return b[a].toFixed(d)});return a+"("+c.join(", ")+")"}};GLM.sign=Math.sign||GLM._sign;
GLM.$GLMBaseType=function(){function a(a,c){var d=a.$||{};this.$type=c;this.$type_name=d.name||"<"+c+">";d.components&&(this.$components=d.components[0]);this.$len=this.components=a.componentLength;this.constructor=a;this.byteLength=a.BYTES_PER_ELEMENT;GLM.$types.push(c)}a.prototype={clone:function(){return new this.constructor(new this.elements.constructor(this.elements))},toString:function(){return GLM.$to_string(this)},inspect:function(){return GLM.$inspect(this)},toJSON:function(){return GLM.$to_object(this)}};
Object.defineProperty(a.prototype,"address",{get:function(){var a=this.elements.byteOffset.toString(16);return"0x00000000".substr(0,10-a.length)+a}});return a}();
(function(){function a(a,b,c){return a.subarray(b,c||a.length)}function b(a,b,c){c=c||a.length;return new GLM.$outer.Float32Array(a.buffer,a.byteOffset+b*GLM.$outer.Float32Array.BYTES_PER_ELEMENT,c-b)}var c=new ArrayBuffer(64);(new Float32Array(c)).length===c.byteLength&&GLM.$outer.console.error("BROKEN TypedArrays detected");Object.defineProperty(GLM,"patch_subarray",{configurable:!0,value:function(){var c=new GLM.$outer.Float32Array([0,0]);c.subarray(1).subarray(0)[0]=1;return 1!==c[1]||4!==(new GLM.$outer.Float32Array(16)).subarray(12,
16).length?b:a}})})();GLM.$subarray=GLM.patch_subarray();
var GLM_template=GLM.$template={_genArgError:function(a,b,c,d){~d.indexOf(void 0)&&(d=d.slice(0,d.indexOf(void 0)));var e=RegExp.prototype.test.bind(/^[^$_]/);return new GLM.GLMJSError("unsupported argtype to "+b+""+a.$sig+": [typ="+c+"] :: got arg types: "+d.map(GLM.$template.jstypes.get)+" // supported types: "+Object.keys(a).filter(e).join("||"))},jstypes:{get:function(a){if(null===a)a="null";else if(void 0===a)a="undefined";else{var b;if(!(b=a.$type))if(!(b=GLM.$template.jstypes[typeof a]))if(!(b=
GLM.$template.jstypes[a+""]))a:{if("object"===typeof a){if(a instanceof GLM.$outer.Float32Array){b="Float32Array";break a}if(a instanceof GLM.$outer.ArrayBuffer){b="ArrayBuffer";break a}}b="<unknown "+[typeof a,a]+">"}a=b}return a},"0":"float",number:"float",string:"string","[object Float32Array]":"Float32Array","[object ArrayBuffer]":"ArrayBuffer","function":"function"},_add_overrides:function(a,b){for(var c in b)b[c]&&GLM[c].override(a,b[c])},_add_inline_override:function(a,b,c){this[b]=eval(GLM.$template._traceable("glm_"+
a+"_"+b,c))();return this},_inline_helpers:function(a,b){return{$type:"built-in",$type_name:b,$template:a,F:a,dbg:b,override:this._add_inline_override.bind(a,b),link:function(c){var d=a[c];d||(d=a[[c,"undefined"]]);if(!d)throw new GLM.GLMJSError("error linking direct function for "+b+"<"+c+"> or "+b+"<"+[c,void 0]+">");return/\bthis\./.test(d+"")?d.bind(a):d}}},"<T>":function(a,b){a.$sig="<T>";return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("Tglm_"+b,function(b){this instanceof
GLM.$GLMBaseType&&(b=this);var d=[b&&b.$type||GLM.$template.jstypes[typeof b]||"null"];if(!a[d])throw GLM.$template._genArgError(a,arguments.callee.dbg,d,[b]);return a[d](b)}))())},"<T,...>":function(a,b){a.$sig="<T,...>";var c=GLM.$template.jstypes;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("Tdotglm_"+b,function(b){for(var e=Array(arguments.length),f=0;f<e.length;f++)e[f]=arguments[f];this instanceof GLM.$GLMBaseType&&e.unshift(b=this);f=[b&&b.$type||c[typeof b]||c.get(b)||
"null"];if(!a[f])throw GLM.$template._genArgError(a,arguments.callee.dbg,f,e);return a[f].apply(a,e)}))())},"<T,V,n>":function(a,b){a.$sig="<T,V,n>";var c=GLM.$template.jstypes;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("TVnglm_"+b,function(){for(var b=Array(arguments.length),e=0;e<b.length;e++)b[e]=arguments[e];this instanceof GLM.$GLMBaseType&&b.unshift(this);var e=b[0],f=b[1],b=b[2],h=[e&&e.$type||c[typeof e]||c[e+""]||"<unknown "+e+">",f&&f.$type||c[typeof f]||c[f+""]||
"<unknown "+f+">"];if(!a[h])throw GLM.$template._genArgError(a,arguments.callee.dbg,h,[e,f,b]);if("number"!==typeof b)throw new GLM.GLMJSError(arguments.callee.dbg+a.$sig+": unsupported n type: "+[typeof b,b]);return a[h](e,f,b)}))())},"<T,V>":function(a,b){a.$sig="<T,V>";var c=GLM.$template.jstypes,d=GLM.$GLMBaseType,e=GLM.$template._genArgError;return this.slingshot(this._inline_helpers(a,b),eval(this._traceable("TVglm_"+b,function(){for(var b=Array(arguments.length),h=0;h<b.length;h++)b[h]=arguments[h];
this instanceof d&&b.unshift(this);var h=b[0],g=b[1],h=[h&&h.$type||c[typeof h],g&&g.$type||c[typeof g]||c[g+""]||Array.isArray(g)&&"array"+g.length+""||""+g+""];if(!a[h])throw e(a,arguments.callee.dbg,h,b);return a[h].apply(a,b)}))())},override:function(a,b,c,d){GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: ",a,b,c.$op?'$op: ["'+c.$op+'"]':"");if(!d)throw Error("unspecified target group "+d+' (expected override(<TV>, "p", {TSP}, ret={GROUP}))');var e=d[b];if(e&&e.$op!==c.$op)throw Error('glm.$template.override: mismatch merging existing override: .$op "'+
[e.$op,"!=",c.$op].join(" ")+'"  p='+[b,e.$op,c.$op,"||"+Object.keys(e.$template).join("||")]);var f=GLM.$template[a](GLM.$template.deNify(c,b),b);f.$op=c.$op;if(e){var h=[],g;for(g in f.$template)g in e.$template||(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+g+" overlayed"),e.$template[g]=f.$template[g]);Object.keys(e.$template).forEach(function(a){a in f.$template||(GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+a+" carried-forward"),h.push(a))});
GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+Object.keys(d[b].$template).filter(function(a){return!~a.indexOf("$")}).map(function(a){return!~h.indexOf(a)?"*"+a+"*":a}).join(" | "))}else d[b]=f,GLM.$DEBUG&&GLM.$outer.console.debug("glm.$template.override: "+b+" ... "+Object.keys(d[b].$template).filter(function(a){return!~a.indexOf("$")}).map(function(a){return"*"+a+"*"}).join(" | "));return d},_override:function(a,b,c){for(var d in b)this.override(a,d,b[d],c);return c},
slingshot:function(){return this.extend.apply(this,[].reverse.call(arguments))},extend:function(a,b){[].slice.call(arguments,1).forEach(function(b){for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d])});return a},operations:function(a){return this._override("<T,V>",a,GLM.$outer.functions)},calculators:function(a){return this._override("<T>",a,GLM.$outer.functions)},varargs_functions:function(a){return this._override("<T,...>",a,GLM.$outer.functions)},functions:function(a){return this._override("<T,V,n>",
a,GLM.$outer.functions)},_tojsname:function(a){return(a||"_").replace(/[^$a-zA-Z0-9_]/g,"_")},_traceable:function(a,b){var c=b;if("function"!==typeof c)throw new GLM.GLMJSError("_traceable expects tidy function as first arg "+c);if(!a)throw new GLM.GLMJSError("_traceable expects hint or what's the point"+[c,a]);a=this._tojsname(a||"_traceable");c=(c+"").replace(/^(\s*var\s*(\w+)\s*=\s*)__VA_ARGS__;/mg,function(a,b,c){return b+"new Array(arguments.length);for(var I=0;I<varname.length;I++)varname[I]=arguments[I];".replace(/I/g,
"__VA_ARGS__I").replace(/varname/g,c)}).replace(/\barguments[.]callee\b/g,a);if(2===c.split(/^\s*function\b/).length)c=(function(){SRC;return HINT}+"").replace("HINT",a.replace(/[$]/g,"$$$$")).replace("SRC",c.replace(/[$]/g,"$$$$").replace(/^function\s*\(/,"function "+a+"("));else throw new GLM.GLMJSError("expected singular anonymous function: "+[c,a]);c="1,"+c;if(GLM.$DEBUG)try{eval(c)}catch(d){throw console.error(a,c,b,d),d;}return c},deNify:function(a,b){var c={vec:[2,3,4],mat:[3,4]},d=this._tojsname.bind(this),
e;for(e in a){var f=!1;e.replace(/([vV]ec|[mM]at)(?:\w*)<N>/,function(h,g){f=!0;var k=a[e];delete a[e];c[g.toLowerCase()].forEach(function(c){var f=e.replace(/<N[*]N>/g,c*c).replace(/<N>/g,c);if(!(f in a)){var h=d("glm_"+b+"_"+f);a[f]=(new Function("","'use strict'; return "+(k+"").replace(/^function\s*\(/,"function "+h+"(").replace(/N[*]N/g,c*c).replace(/N/g,c)))()}})}.bind(this));/^[$]/.test(e)?GLM.$DEBUG&&GLM.$outer.console.debug("@ NOT naming "+e):!f&&("function"===typeof a[e]&&!a[e].name)&&(GLM.$DEBUG&&
GLM.$outer.console.debug("naming "+d(b+"_"+e)),a[e]=eval(this._traceable("glm_"+b+"_"+e,a[e]))())}return a},$_module_stamp:+new Date,_iso:"/[*][^/*]*[*]/",_get_argnames:function(a){return(a+"").replace(/\s+/g,"").replace(RegExp(this._iso,"g"),"").split("){",1)[0].replace(/^[^(]*[(]/,"").replace(/=[^,]+/g,"").split(",").filter(Boolean)},GLMType:function(a,b){var c=b.identity.length;Object.keys(b).filter(function(a){return"function"===typeof b[a]&&!b[a].name}).map(function(c){var d=a+"_"+c;GLM.$DEBUG&&
GLM.$outer.console.debug("naming $."+c+" == "+d,this._traceable(d,b[c]));b[c]=eval(this._traceable("glm_"+d,b[c]))()}.bind(this));var d=eval(this._traceable("glm_"+a+"$class",function(a){for(var b=d.$,c=d.prototype.$type,g=Array(arguments.length),k=0;k<g.length;k++)g[k]=arguments[k];k=b[typeof a+g.length];if(!k){var j="glm."+c,c=j+"("+g.map(function(a){return typeof a})+")",g=Object.keys(b).filter(function(a){return"function"===typeof b[a]&&/^\w+\d+$/.test(a)}).map(function(a){return j+"("+GLM.$template._get_argnames(b[a])+
")"});throw new GLM.GLMJSError("no constructor found for: "+c+"\nsupported signatures:\n\t"+g.join("\n\t"));}if(this instanceof d){if(a instanceof GLM.$outer.Float32Array){2<GLM.$DEBUG&&GLM.$outer.console.info("adopting elements...",typeof a);if(a.length!=d.componentLength)throw GLM.$outer.console.error(c+" elements size mismatch: "+["wanted:"+d.componentLength,"handed:"+a.length]),g=GLM.$subarray(a,0,d.componentLength),new GLM.GLMJSError(c+" elements size mismatch: "+["wanted:"+d.componentLength,
"handed:"+a.length,"theoreticaly-correctable?:"+(g.length===d.componentLength)]);c=a}else(c=new GLM.$outer.Float32Array(d.componentLength)).set(k.apply(b,g));Object.defineProperty(this,"elements",{enumerable:!1,configurable:!0,value:c})}else return new d(k.apply(b,g))}))();b.components=b.components?b.components.map(function(a){return"string"===typeof a?a.split(""):a}):[];d.$=b;d.componentLength=c;d.BYTES_PER_ELEMENT=c*GLM.$outer.Float32Array.BYTES_PER_ELEMENT;d.prototype=new GLM.$GLMBaseType(d,a);
return d}};GLM.$template.functions({mix:{"float,float":function(a,b,c){return b*c+a*(1-c)},"vec<N>,vec<N>":function(a,b,c){if(void 0===c)throw Error("glm.mix<vecN,vecN>(v,n,rt) requires 3 arguments");a=glm.$to_array(a);b=glm.$to_array(b);var d=1-c;return new glm.vecN(a.map(function(a,f){return b[f]*c+a*d}))}},clamp:{"float,float":function(a,b,c){return GLM._clamp(a,b,c)},"vec<N>,float":function(a,b,c){return new GLM.vecN(GLM.$to_array(a).map(function(a){return GLM._clamp(a,b,c)}))}}});
GLM.$template.extend(GLM,GLM.$template.calculators({degrees:{"float":function(a){return GLM._degrees(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._degrees))}},radians:{"float":function(a){return GLM._radians(a)},"vec<N>":function(a){return new GLM.vecN(GLM.$to_array(a).map(GLM._radians))}},$to_object:{vec2:function(a){return{x:a.x,y:a.y}},vec3:function(a){return{x:a.x,y:a.y,z:a.z}},vec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},uvec2:function(a){return{x:a.x,y:a.y}},uvec3:function(a){return{x:a.x,
y:a.y,z:a.z}},uvec4:function(a){return{x:a.x,y:a.y,z:a.z,w:a.w}},quat:function(a){return{w:a.w,x:a.x,y:a.y,z:a.z}},mat3:function(a){return{"0":this.vec3(a[0]),1:this.vec3(a[1]),2:this.vec3(a[2])}},mat4:function(a){return{"0":this.vec4(a[0]),1:this.vec4(a[1]),2:this.vec4(a[2]),3:this.vec4(a[3])}}}}),GLM.$template.varargs_functions({$from_glsl:{string:function(a,b){var c;a.replace(/^([$\w]+)\(([-.0-9ef, ]+)\)$/,function(a,e,f){a=glm[e]||glm["$"+e];if(!a)throw new GLM.GLMJSError("glsl decoding issue: unknown type '"+
e+"'");c=f.split(",").map(parseFloat);if(b){for(;c.length<a.componentLength;)c.push(c[c.length-1]);return c}c=a.apply(glm,c)});return c}},$to_glsl:{"vec<N>":function(a,b){var c=GLM.$to_array(a);b&&("object"===typeof b&&"precision"in b)&&(c=c.map(function(a){return a.toFixed(b.precision)}));for(;c.length&&c[c.length-2]===c[c.length-1];)c.pop();return a.$type+"("+c+")"},"uvec<N>":function(a,b){return this.vecN(a,b)},quat:function(a,b){var c;b&&("object"===typeof b&&"precision"in b)&&(c=b.precision);
return 0===a.x+a.y+a.z?"quat("+(void 0===c?a.w:a.w.toFixed(c))+")":this.vec4(a,b)},"mat<N>":function(a,b){var c;b&&("object"===typeof b&&"precision"in b)&&(c=b.precision);var d=GLM.$to_array(a);void 0!==c&&(d=d.map(function(a){return a.toFixed(c)}));return d.reduce(function(a,b){return a+b},0)===d[0]*N?"matN("+d[0]+")":"matN("+d+")"}}}));
GLM.$template.operations({rotate:{"float,vec3":function(a,b){return GLM.$outer.mat4_angleAxis(a,b)},"mat4,float":function(a,b,c){return a.mul(GLM.$outer.mat4_angleAxis(b,c))}},scale:{"mat4,vec3":function(a,b){return a.mul(GLM.$outer.mat4_scale(b))},"vec3,undefined":function(a){return GLM.$outer.mat4_scale(a)}},translate:{"mat4,vec3":function(a,b){return a.mul(GLM.$outer.mat4_translation(b))},"vec3,undefined":function(a){return GLM.$outer.mat4_translation(a)}},angleAxis:{"float,vec3":function(a,b){return GLM.$outer.quat_angleAxis(a,
b)}}});
GLM.$to_string=GLM.$template.varargs_functions({$to_string:{"function":function(a){return"[function "+(a.name||"anonymous")+"]"},ArrayBuffer:function(a){return"[object ArrayBuffer "+JSON.stringify({byteLength:a.byteLength})+"]"},Float32Array:function(a){return"[object Float32Array "+JSON.stringify({length:a.length,byteOffset:a.byteOffset,byteLength:a.byteLength,BPE:a.BYTES_PER_ELEMENT})+"]"},"float":function(a,b){return GLM.$toFixedString("float",{value:a},["value"],b&&b.precision)},string:function(a){return a},"vec<N>":function(a,
b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&b.precision)},"uvec<N>":function(a,b){return GLM.$toFixedString(a.$type_name,a,a.$components,b&&"object"===typeof b&&b.precision||0)},"mat<N>":function(a,b){var c=[0,1,2,3].slice(0,N).map(function(b){return a[b]}).map(function(a){return GLM.$toFixedString("\t",a,a.$components,b&&b.precision)});return a.$type_name+"(\n"+c.join(", \n")+"\n)"},quat:function(a,b){a=GLM.degrees(GLM.eulerAngles(a));return GLM.$toFixedString("<quat>"+a.$type_name,
a,["x","y","z"],b&&b.precision)}}}).$to_string;
GLM.$template.operations({copy:{$op:"=","vec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a},"vec<N>,array<N>":function(a,b){a.elements.set(b);return a},"uvec<N>,uvec<N>":function(a,b){a.elements.set(b.elements);return a},"uvec<N>,array<N>":function(a,b){a.elements.set(b);return a},"uvec<N>,vec<N>":function(a,b){a.elements.set(b.elements);return a},"vec<N>,uvec<N>":function(a,b){a.elements.set(b.elements);return a},"quat,quat":function(a,b){a.elements.set(b.elements);return a},"mat<N>,mat<N>":function(a,
b){a.elements.set(b.elements);return a},"mat<N>,array<N>":function(a,b){b=b.reduce(function(a,b){if(!a.concat)throw new GLM.GLMJSError("matN,arrayN -- [[.length===4] x 4] expected");return a.concat(b)});if(b===N)throw new GLM.GLMJSError("matN,arrayN -- [[N],[N],[N],[N]] expected");return a["="](b)},"mat<N>,array<N*N>":function(a,b){a.elements.set(b);return a},"mat4,array9":function(a,b){a.elements.set((new glm.mat4(b)).elements);return a}},sub:{$op:"-","vec<N>,vec<N>":function(a,b){return new glm.vecN(glm.$to_array(a).map(function(a,
d){return a-b[d]}))}},sub_eq:{$op:"-=","vec<N>,vec<N>":function(a,b){glm.$to_array(a).map(function(c,d){return a.elements[d]=c-b[d]});return a}},add:{$op:"+","vec<N>,vec<N>":function(a,b){return new glm.vecN(glm.$to_array(a).map(function(a,d){return a+b[d]}))}},add_eq:{$op:"+=","vec<N>,vec<N>":function(a,b){glm.$to_array(a).map(function(c,d){return a.elements[d]=c+b[d]});return a}},div:{$op:"/","vec<N>,float":function(a,b){return new glm.vecN(glm.$to_array(a).map(function(a){return a/b}))}},div_eq:{$op:"/=",
"vec<N>,float":function(a,b){for(var c=0;c<N;c++)a.elements[c]/=b;return a}},eql:{$op:"==",$eq:function(a,b){return b.elements.length===glm.$to_array(a).filter(function(a,d){return a===b.elements[d]}).length},"vec<N>,vec<N>":function(a,b){return this.$eq(a,b)},"mat<N>,mat<N>":function(a,b){return this.$eq(a,b)},"quat,quat":function(a,b){return this.$eq(a,b)},"uvec<N>,uvec<N>":function(a,b){return this.$eq(a,b)}}});GLM.string={$type_name:"string",$:{}};GLM.number={$type_name:"float",$:{}};
GLM.vec2=GLM.$template.GLMType("vec2",{name:"fvec2",identity:[0,0],components:["xy","01"],undefined0:function(){return this.identity},number1:function(a){return[a,a]},number2:function(a,b){return[a,b]},object1:function(a){if(null!==a)switch(a.length){case 4:case 3:case 2:return[a[0],a[1]];default:if("y"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.vec2: "+a);return"string"===typeof a.x?[1*a.x,1*a.y]:[a.x,a.y]}}throw new GLM.GLMJSError("unrecognized object passed to GLM.vec2: "+
a);}});
GLM.uvec2=GLM.$template.GLMType("uvec2",{name:"uvec2",identity:[0,0],components:["xy","01"],_clamp:function(a){return~~a},undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b]},object1:function(a){switch(a.length){case 4:case 3:case 2:return[a[0],a[1]].map(this._clamp);default:if("y"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.uvec2: "+a);
return[a.x,a.y].map(this._clamp)}}throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec2: "+a);}});
GLM.vec3=GLM.$template.GLMType("vec3",{name:"fvec3",identity:[0,0,0],components:["xyz","012","rgb"],undefined0:function(){return GLM.vec3.$.identity},number1:function(a){return[a,a,a]},number2:function(a,b){return[a,b,b]},number3:function(a,b,c){return[a,b,c]},object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]];case 2:return[a[0],a[1],a[1]];default:if("z"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.vec3: "+
a);return"string"===typeof a.x?[1*a.x,1*a.y,1*a.z]:[a.x,a.y,a.z]}}throw new GLM.GLMJSError("unrecognized object passed to GLM.vec3: "+a);},object2:function(a,b){if(a instanceof GLM.vec2||a instanceof GLM.uvec2)return[a.x,a.y,b];throw new GLM.GLMJSError("unrecognized object passed to GLM.vec3(o,z): "+[a,b]);}});
GLM.uvec3=GLM.$template.GLMType("uvec3",{name:"uvec3",identity:[0,0,0],components:["xyz","012"],_clamp:GLM.uvec2.$._clamp,undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c]},object1:function(a){if(a)switch(a.length){case 4:case 3:return[a[0],a[1],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1]].map(this._clamp);
default:if("z"in a&&"x"in a){if(typeof a.x!==typeof a.y)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.uvec3: "+a);return[a.x,a.y,a.z].map(this._clamp)}}throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec3: "+a);},object2:function(a,b){if(a instanceof GLM.vec2)return[a.x,a.y,b].map(this._clamp);if(a instanceof GLM.uvec2)return[a.x,a.y,this._clamp(b)];throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec3(o,z): "+[a,b]);}});
GLM.vec4=GLM.$template.GLMType("vec4",{name:"fvec4",identity:[0,0,0,0],components:["xyzw","0123","rgba"],undefined0:function(){return this.identity},number1:function(a){return[a,a,a,a]},number2:function(a,b){return[a,b,b,b]},number3:function(a,b,c){return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d]},object1:function(a){if(a)switch(a.length){case 4:return[a[0],a[1],a[2],a[3]];case 3:return[a[0],a[1],a[2],a[2]];case 2:return[a[0],a[1],a[1],a[1]];default:if("w"in a&&"x"in a){if(typeof a.x!==
typeof a.w)throw new GLM.GLMJSError("unrecognized .x-ish object passed to GLM.vec4: "+a);return"string"===typeof a.x?[1*a.x,1*a.y,1*a.z,1*a.w]:[a.x,a.y,a.z,a.w]}}throw new GLM.GLMJSError("unrecognized object passed to GLM.vec4: "+[a,a&&a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3||a instanceof GLM.uvec3)return[a.x,a.y,a.z,b];throw new GLM.GLMJSError("unrecognized object passed to GLM.vec4(o,w): "+[a,b]);},object3:function(a,b,c){if(a instanceof GLM.vec2||a instanceof GLM.uvec2)return[a.x,
a.y,b,c];throw new GLM.GLMJSError("unrecognized object passed to GLM.vec4(o,z,w): "+[a,b,c]);}});
GLM.uvec4=GLM.$template.GLMType("uvec4",{name:"uvec4",identity:[0,0,0,0],components:["xyzw","0123"],_clamp:GLM.uvec2.$._clamp,undefined0:function(){return this.identity},number1:function(a){a=this._clamp(a);return[a,a,a,a]},number2:function(a,b){a=this._clamp(a);b=this._clamp(b);return[a,b,b,b]},number3:function(a,b,c){a=this._clamp(a);b=this._clamp(b);c=this._clamp(c);return[a,b,c,c]},number4:function(a,b,c,d){return[a,b,c,d].map(this._clamp)},object1:function(a){if(a)switch(a.length){case 4:return[a[0],
a[1],a[2],a[3]].map(this._clamp);case 3:return[a[0],a[1],a[2],a[2]].map(this._clamp);case 2:return[a[0],a[1],a[1],a[1]].map(this._clamp);default:if("w"in a&&"x"in a)return[a.x,a.y,a.z,a.w].map(this._clamp)}throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec4: "+[a,a&&a.$type]);},object2:function(a,b){if(a instanceof GLM.vec3)return[a.x,a.y,a.z,b].map(this._clamp);if(a instanceof GLM.uvec3)return[a.x,a.y,a.z,this._clamp(b)];throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec4(o,w): "+
[a,b]);},object3:function(a,b,c){if(a instanceof GLM.vec2)return[a.x,a.y,b,c].map(this._clamp);if(a instanceof GLM.uvec2)return[a.x,a.y,this._clamp(b),this._clamp(c)];throw new GLM.GLMJSError("unrecognized object passed to GLM.uvec4(o,z,w): "+[a,b,c]);}});
GLM.mat3=GLM.$template.GLMType("mat3",{name:"mat3x3",identity:[1,0,0,0,1,0,0,0,1],undefined0:function(){return this.identity},number1:function(a){return 1===a?this.identity:[a,0,0,0,a,0,0,0,a]},number9:function(a,b,c,d,e,f,h,g,k){return arguments},object1:function(a){if(a){var b=a.elements||a;if(16===b.length)return[b[0],b[1],b[2],b[4],b[5],b[6],b[8],b[9],b[10]];if(9===b.length)return b;if(0 in b&&1 in b&&2 in b&&!(3 in b)&&"object"===typeof b[2])return[b[0],b[1],b[2]].map(GLM.vec3.$.object1).reduce(function(a,
b){return a.concat(b)})}throw new GLM.GLMJSError("unrecognized object passed to GLM.mat3: "+a);},object3:function(a,b,c){return[a,b,c].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});
GLM.mat4=GLM.$template.GLMType("mat4",{name:"mat4x4",identity:[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],undefined0:function(){return this.identity},number16:function(a,b,c,d,e,f,h,g,k,j,i,l,m,n,p,q){return arguments},number1:function(a){return 1===a?this.identity:[a,0,0,0,0,a,0,0,0,0,a,0,0,0,0,a]},object1:function(a){var b;if(a){b=a.elements||a;if(9===b.length)return[b[0],b[1],b[2],0,b[3],b[4],b[5],0,b[6],b[7],b[8],0,0,0,0,1];if(4===b.length&&b[0]&&4===b[0].length)return b[0].concat(b[1],b[2],b[3]);if(16===
b.length)return b;if(0 in b&&1 in b&&2 in b&&3 in b&&!(4 in b)&&"object"===typeof b[3])return[b[0],b[1],b[2],b[3]].map(GLM.vec4.$.object1).reduce(function(a,b){return a.concat(b)})}throw new GLM.GLMJSError("unrecognized object passed to GLM.mat4: "+[a,b&&b.length]);},object4:function(a,b,c,d){return[a,b,c,d].map(glm.$to_array).reduce(function(a,b){return a.concat(b)})}});
GLM.quat=GLM.$template.GLMType("quat",{identity:[0,0,0,1],components:["xyzw","0123"],undefined0:function(){return this.identity},number1:function(a){if(1!==a)throw Error("only quat(1) syntax supported for quat(number1 args)...");return this.identity},number4:function(a,b,c,d){return[b,c,d,a]},object1:function(a){if(a){if(a instanceof GLM.mat4)return GLM.$outer.quat_array_from_mat4(a);if(4===a.length)return[a[0],a[1],a[2],a[3]];if(a instanceof GLM.quat)return[a.x,a.y,a.z,a.w];if(a instanceof GLM.vec3)return GLM.$outer.quat_array_from_zyx(a);
if("w"in a&&"x"in a)return"string"===typeof a.x?[1*a.x,1*a.y,1*a.z,1*a.w]:[a.x,a.y,a.z,a.w]}throw new GLM.GLMJSError("unrecognized object passed to GLM.quat.object1: "+[a,a&&a.$type,typeof a,a&&a.constructor]);}});
(function(){var a=function(a,c,d,e){a.$properties=a.$properties||{def:function(c,d){this[c]=d;Object.defineProperty(a.prototype,c,d)}};var f=a.$properties,h=f.def.bind(f),g=[0,1,2,3].map(function(a){return{enumerable:d,get:function(){return this.elements[a]},set:function(b){this.elements[a]=b}}});c.forEach(function(a,b){h(a,g[b])});if(isNaN(c[0])&&!/^_/.test(c[0])){var k=c.slice();do(function(a,b,c){"quat"===b&&(b="vec"+c);h(a,{enumerable:!1,get:function(){return new GLM[b](GLM.$subarray(this.elements,
0*c,1*c))},set:function(a){return(new GLM[b](GLM.$subarray(this.elements,0*c,1*c)))["="](a)}})})(k.join(""),a.prototype.$type.replace(/[1-9]$/,k.length),k.length);while(k[1]!=k.pop());if(e)return f;k=c.slice();if(c={xyz:{yz:1},xyzw:{yzw:1,yz:1,zw:2}}[k.join("")])for(var j in c)(function(a,b,c,d){h(a,{enumerable:!1,get:function(){return new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d))},set:function(a){return(new GLM[b](GLM.$subarray(this.elements,0*c+d,1*c+d)))["="](a)}})})(j,a.prototype.$type.replace(/[1-9]$/,
j.length),j.length,c[j])}return f};a(GLM.vec2,GLM.vec2.$.components[0],!0);a(GLM.vec2,GLM.vec2.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[0],!0);a(GLM.vec3,GLM.vec3.$.components[1]);a(GLM.vec3,GLM.vec3.$.components[2]);a(GLM.vec4,GLM.vec4.$.components[0],!0);a(GLM.vec4,GLM.vec4.$.components[1]);a(GLM.vec4,GLM.vec4.$.components[2]);a(GLM.quat,GLM.quat.$.components[0],!0,"noswizzles");a(GLM.quat,GLM.quat.$.components[1]);GLM.quat.$properties.def("wxyz",{enumerable:!1,get:function(){return new GLM.vec4(this.w,
this.x,this.y,this.z)},set:function(a){a=GLM.vec4(a);return this["="](GLM.quat(a.x,a.y,a.z,a.w))}});a(GLM.uvec2,GLM.uvec2.$.components[0],!0);a(GLM.uvec2,GLM.uvec2.$.components[1]);a(GLM.uvec3,GLM.uvec3.$.components[0],!0);a(GLM.uvec3,GLM.uvec3.$.components[1]);a(GLM.uvec4,GLM.uvec4.$.components[0],!0);a(GLM.uvec4,GLM.uvec4.$.components[1]);Object.defineProperty(GLM.quat.prototype,"_x",{get:function(){throw Error("erroneous quat._x access");}});GLM.$partition=function(a,c,d,e){if(void 0===d)throw new GLM.GLMJSError("nrows is undefined");
var f=c.$.identity.length;d=d||f;for(var h=function(a){3<GLM.$DEBUG&&GLM.$outer.console.debug("CACHEDBG: "+a)},g=0;g<d;g++)(function(d){var g=e&&e+d,i=d*f;Object.defineProperty(a,d,{configurable:!0,enumerable:!0,set:function(e){if(e instanceof c)this.elements.set(e.elements,i);else if(e&&e.length===f)this.elements.set(e,i);else throw new GLM.GLMJSError("unsupported argtype to "+(a&&a.$type)+"["+d+"] setter: "+[typeof e,e]);},get:function(){if(e){if(this[g])return d||h("cache hit "+g),this[g];d||h("cache miss "+
g)}var a,b=new c(a=GLM.$subarray(this.elements,i,i+f));if(b.elements!==a)throw new GLM.GLMJSError("v.elements !== t");e&&Object.defineProperty(this,g,{configurable:!0,enumerable:!1,value:b});return b}})})(g)};GLM.$partition(GLM.mat4.prototype,GLM.vec4,4,"_cache_");GLM.$partition(GLM.mat3.prototype,GLM.vec3,3,"_cache_")})();
GLM.$dumpTypes=function(a){GLM.$types.forEach(function(b){GLM[b].componentLength&&a("GLM."+b,JSON.stringify({"#type":GLM[b].prototype.$type_name,"#floats":GLM[b].componentLength,"#bytes":GLM[b].BYTES_PER_ELEMENT}))})};
GLM.$init=function(a){a.prefix&&(GLMJS_PREFIX=a.prefix);GLM.$prefix=GLMJS_PREFIX;var b=a.log||function(){};try{b("GLM-js: ENV: "+_ENV._VERSION)}catch(c){}b("GLM-JS: initializing: "+JSON.stringify(a,0,2));b(JSON.stringify({functions:Object.keys(GLM.$outer.functions)}));GLM.$outer.vec3_eulerAngles=GLM.$outer.vec3_eulerAngles||GLM.$outer._vec3_eulerAngles;GLM.$symbols=[];for(var d in GLM)"function"===typeof GLM[d]&&/^[a-z]/.test(d)&&GLM.$symbols.push(d);GLM.$types.forEach(function(a){var b=GLM[a].prototype.$type,
c;for(c in GLM.$outer.functions){var d=GLM.$outer.functions[c];d.$op&&(GLM.$DEBUG&&GLM.$outer.console.debug("mapping operator<"+b+"> "+c+" / "+d.$op),GLM[a].prototype[c]=d,GLM[a].prototype[d.$op]=d)}});b("GLM-JS: "+GLM.version+" emulating GLM_VERSION="+GLM.GLM_VERSION+" vendor_name="+a.vendor_name+" vendor_version="+a.vendor_version);glm.vendor=a};
GLM.using_namespace=function(a){GLM.$DEBUG&&GLM.$outer.console.debug("GLM.using_namespace munges globals; it should probably not be used!");var b=GLM.$symbols,c=[],d=[],e=GLM.using_namespace.before=[],f=GLM.using_namespace.after=[];eval(b.map(function(a,b){return"GLM.using_namespace['"+a+"'] = GLM.using_namespace.before["+b+"] = 'undefined' !== typeof "+a+";"}).join("\n"));GLM.$DEBUG&&console.warn("GLM.using_namespace before #globals: "+e.length);b.map(function(a){var b="GLM.using_namespace['"+a+
"']=undefined;delete GLM.using_namespace['"+a+"'];";try{d.push(a+"=GLM.using_namespace['"+a+"'];"+b)}catch(e){d.push(a+"=undefined;delete "+a+";"+b)}c.push(a+"=GLM."+a+";")});eval(c.join("\n"));a=a();eval(d.join("\n"));eval(b.map(function(a,b){return"GLM.using_namespace.after["+b+"] = 'undefined' !== typeof "+a+";"}).join("\n"));GLM.$DEBUG&&console.warn("GLM.using_namespace after #globals: "+f.length);if(e.length!==f.length)throw Error(JSON.stringify({before:e,after:f,usn:Object.keys(GLM.using_namespace)}));
return a};try{module.exports=GLM}catch(e$$18){}tdl.fast.exists;glm=GLM;
var DLL={vendor_name:"tdl-fast.js",vendor_version:"2009?",_name:"glm.tdl-fast.js",_version:"0.0.1",prefix:"glm-js[tdl-fast]: ",statics:{mat4_perspective:function(a,b,c,d){return glm.mat4(tdl.fast.matrix4.perspective(new Float32Array(16),a,b,c,d))},mat4_angleAxis:function(a,b){return glm.mat4(tdl.fast.matrix4.axisRotation(new Float32Array(16),b.elements,a))},quat_angleAxis:function(a,b){var c=tdl.quaternions.axisRotation(b.elements,a);return new glm.quat(c)},mat4_translation:function(a){return glm.mat4(tdl.fast.matrix4.translation(new Float32Array(16),
a.elements))},mat4_scale:function(a){return glm.mat4(tdl.fast.matrix4.scaling(new Float32Array(16),a.elements))},mat4_array_from_quat:function(a){return tdl.quaternions.quaternionToRotation(a.elements)},quat_array_from_mat4:function(a){a=tdl.quaternions.rotationToQuaternion(a.elements);return isNaN(a[0])?glm.quat.$.identity:a}}};
DLL.operations={mul:{$op:"*",_mulQuatQuat:tdl.quaternions.mulQuaternionQuaternion,"quat,quat":function(a,b){return new glm.quat(this._mulQuatQuat(a.elements,b.elements))},"quat,vec<N>":function(a,b){return this["mat4,vecN"](glm.toMat4(a),b)},"vec<N>,quat":function(a,b){return this["quat,vecN"](glm.inverse(b),a)},_mulVecSca:tdl.fast.mulVectorScalar,"vec<N>,float":function(a,b){return glm.vecN(this._mulVecSca(new Float32Array(N),a.elements,b))},"mat4,vec3":function(a,b){b=new glm.vec4(b,1);var c=this["mat4,vec4"](a,
b);return new glm.vec3(c)},_mulVecMat4:tdl.fast.rowMajor.mulVectorMatrix4,"mat4,vec4":function(a,b){return glm.vec4(this._mulVecMat4(new Float32Array(4),b.elements,a.elements))},"vec4,mat4":function(a,b){return this["mat4,vec4"](glm.inverse(b),a)},"_mulMatMat<N>":"tdl.fast.columnMajor.mulMatrixMatrixN","mat<N>,mat<N>":function(a,b){return glm.matN(this._mulMatMatN(new Float32Array(N*N),a.elements,b.elements))}},mul_eq:{$op:"*=","vec<N>,float":function(a,b){tdl.fast.mulVectorScalar(a.elements,a.elements,
b);return a},"_mulMatMat<N>":"tdl.fast.columnMajor.mulMatrixMatrixN","mat<N>,mat<N>":function(a,b){this._mulMatMatN(a.elements,a.elements,b.elements);return a},_mulQuatQuat:tdl.quaternions.mulQuaternionQuaternion,"quat,quat":function(a,b){a.elements.set(this._mulQuatQuat(a.elements,b.elements));return a},_mulVecMat4:tdl.fast.rowMajor.mulVectorMatrix4,"inplace:vec3,quat":function(a,b){var c=glm.toMat4(glm.inverse(b)).elements,d=glm.vec4(a,1).elements;this._mulVecMat4(a.elements,d,c);return a},"inplace:vec4,mat4":function(a,
b){var c=glm.inverse(b);this._mulVecMat4(a.elements,new Float32Array(a.elements),c.elements);return a}},cross:{_cross:tdl.fast.cross,"vec3,vec3":function(a,b){return new glm.vec3(this._cross(new Float32Array(3),a,b))}},dot:{_dot:tdl.fast.dot,"vec3,vec3":function(a,b){return this._dot(a,b)}}};
DLL.functions={mix:{"quat,quat":function(a,b,c){a=a.elements;b=b.elements;var d=glm.quat(new Float32Array(4)),e=d.elements,f=a[0],h=a[1],g=a[2],k=a[3],j=b[0],i=b[1],l=b[2];b=b[3];var m=f*j+h*i+g*l+k*b,n;if(1<=Math.abs(m))return e!==a&&(e[0]=f,e[1]=h,e[2]=g,e[3]=k),d;a=Math.acos(m);n=Math.sqrt(1-m*m);m=Math.sin((1-c)*a)/n;c=Math.sin(c*a)/n;e[0]=f*m+j*c;e[1]=h*m+i*c;e[2]=g*m+l*c;e[3]=k*m+b*c;return d}}};
DLL.calculators={normalize:{"vec<N>":function(a){return glm.vecN(tdl.fast.normalize(new Float32Array(N),a.elements))},quat:function(a){return new glm.quat(tdl.quaternions.normalize(a.elements))}},length:{"vec<N>":function(a){return tdl.math.length(a.elements)},quat:function(a){return tdl.quaternions.length(a.elements)}},length2:{"vec<N>":function(a){return tdl.math.lengthSquared(a.elements)},quat:function(a){return tdl.quaternions.lengthSquared(a.elements)}},inverse:{quat:function(a){return new glm.quat(tdl.quaternions.inverse(a.elements))},
xmat4:function(a){return glm.mat4(tdl.fast.inverse4(new Float32Array(16),a.elements))},mat4:function(a){a=a.clone();tdl.fast.inverse4(a.elements,a.elements);return a}},transpose:{xmat4:function(a){return glm.mat4(tdl.fast.transpose4(new Float32Array(16),a.elements))},mat4:function(a){a=a.clone();tdl.fast.transpose4(a.elements,a.elements);return a}}};glm.$outer.$import(DLL);try{module.exports=glm}catch(e$$19){};
return glm; })(this);
